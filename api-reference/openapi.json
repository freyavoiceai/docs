{
  "openapi": "3.0.0",
  "info": {
    "title": "Freyavoice API",
    "version": "2.0.0",
    "description": "Production API for managing calls and campaigns.\n\n**Authentication**: All endpoints require a bearer token issued by Freyavoice.\n\n**Response Format**: All responses are wrapped in a standard envelope:\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"message\": \"Success\",\n    \"result\": { /* endpoint-specific data */ }\n  }\n}\n```\n\nError responses follow the same format with `success: false`:\n```json\n{\n  \"success\": false,\n  \"data\": {\n    \"message\": \"Error description\",\n    \"result\": null\n  }\n}\n```",
    "contact": {
      "name": "Freyavoice Support",
      "email": "support@freyavoice.com"
    }
  },
  "servers": [
    {
      "url": "https://app.freyavoice.ai/api/v2",
      "description": "Production"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer"
      }
    },
    "schemas": {
      "WebhookCallOutcome": {
        "type": "object",
        "properties": {
          "callId": {
            "type": "string"
          },
          "campaignId": {
            "type": "string"
          },
          "phoneNumber": {
            "type": "string"
          },
          "outcome": {
            "type": "string",
            "enum": [
              "success",
              "failed"
            ]
          },
          "failureCategory": {
            "type": "string",
            "description": "SipCodeCategory value or 'api_error' if outcome is 'failed'"
          },
          "message": {
            "type": "string",
            "description": "Contextual message: ended_reason, timeout message, or LLM evaluation reason"
          },
          "willRetry": {
            "type": "boolean",
            "description": "Whether the call will be retried"
          },
          "retryScheduledAt": {
            "type": "string",
            "format": "date-time",
            "description": "ISO8601 timestamp when retry is scheduled"
          },
          "retriesRemaining": {
            "type": "number",
            "description": "Number of retries remaining"
          },
          "attemptNumber": {
            "type": "number",
            "description": "Which attempt this outcome is for (1-indexed)"
          }
        },
        "required": [
          "campaignId",
          "phoneNumber",
          "outcome"
        ]
      },
      "WebhookApiError": {
        "type": "object",
        "properties": {
          "campaignId": {
            "type": "string"
          },
          "phoneNumber": {
            "type": "string"
          },
          "outcome": {
            "type": "string",
            "enum": [
              "failed"
            ]
          },
          "failureCategory": {
            "type": "string",
            "enum": [
              "api_error"
            ]
          },
          "message": {
            "type": "string",
            "description": "Error message from API call failure"
          },
          "attemptNumber": {
            "type": "number"
          },
          "willRetry": {
            "type": "boolean"
          },
          "retryScheduledAt": {
            "type": "string",
            "format": "date-time"
          },
          "retriesRemaining": {
            "type": "number"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "campaignId",
          "phoneNumber",
          "outcome",
          "failureCategory",
          "message",
          "attemptNumber",
          "willRetry",
          "timestamp"
        ]
      },
      "RetryConditions": {
        "type": "array",
        "items": {
          "type": "string",
          "enum": [
            "Rejected",
            "Unreachable",
            "Busy",
            "No Answer",
            "Network Error",
            "Invalid",
            "Timeout",
            "Cancelled",
            "Resource Unavailable",
            "Service Unavailable",
            "Protocol Error",
            "Unspecified",
            "voicemail",
            "exceeded-max-duration"
          ]
        },
        "default": [
          "No Answer",
          "Busy",
          "Timeout",
          "Unreachable",
          "Network Error",
          "Resource Unavailable",
          "Service Unavailable",
          "voicemail"
        ],
        "description": "Array of call outcome values to retry on (SipCodeCategory + special endedReason values)"
      },
      "EndOfCallReport": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "end-of-call-report"
            ]
          },
          "callId": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the call"
          },
          "workspaceId": {
            "type": "string",
            "format": "uuid",
            "description": "Workspace ID"
          },
          "summary": {
            "type": "string",
            "description": "AI-generated summary of the call"
          },
          "endedReason": {
            "type": "string",
            "description": "Reason why the call ended (e.g., 'customer-ended-call', 'assistant-ended-call')"
          },
          "durationMs": {
            "type": "number",
            "description": "Call duration in milliseconds"
          },
          "transcript": {
            "type": "string",
            "description": "Full conversation transcript with timestamps"
          },
          "status": {
            "type": "string",
            "description": "Call status code"
          },
          "callEndReasonCategory": {
            "type": "string",
            "description": "Call end reason category"
          },
          "customer": {
            "type": "string",
            "description": "Customer phone number"
          },
          "startedAt": {
            "type": "string",
            "format": "date-time",
            "description": "ISO8601 timestamp when call started"
          },
          "endedAt": {
            "type": "string",
            "format": "date-time",
            "description": "ISO8601 timestamp when call ended"
          },
          "recordingUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL to access the call recording"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "ISO8601 timestamp when webhook was sent"
          }
        },
        "required": [
          "type",
          "callId",
          "workspaceId",
          "durationMs",
          "status",
          "callEndReasonCategory",
          "customer",
          "startedAt",
          "endedAt",
          "recordingUrl",
          "timestamp"
        ]
      },
      "CampaignListResponse": {
        "type": "object",
        "properties": {
          "campaigns": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CampaignListItem"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          },
          "statusCounts": {
            "$ref": "#/components/schemas/CampaignStatusCounts"
          }
        },
        "required": [
          "campaigns",
          "pagination"
        ]
      },
      "CampaignListItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "assistantId": {
            "type": "string",
            "nullable": true
          },
          "phoneNumberId": {
            "type": "string",
            "nullable": true
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "draft",
              "scheduled",
              "active",
              "completed",
              "partially_completed"
            ],
            "default": "draft"
          },
          "startDate": {
            "type": "string",
            "nullable": true,
            "format": "date",
            "description": "When campaign starts (YYYY-MM-DD)"
          },
          "startTime": {
            "type": "string",
            "nullable": true,
            "pattern": "^\\d{2}:\\d{2}(:\\d{2})?$",
            "description": "Time on start date + retry window start (HH:MM)"
          },
          "timezone": {
            "type": "string",
            "default": "UTC",
            "description": "IANA timezone for all times"
          },
          "endTime": {
            "type": "string",
            "nullable": true,
            "pattern": "^\\d{2}:\\d{2}(:\\d{2})?$",
            "description": "Daily retry window end (HH:MM)"
          },
          "activeDays": {
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 0,
              "maximum": 6
            },
            "default": [
              0,
              1,
              2,
              3,
              4,
              5,
              6
            ],
            "description": "Days retries can happen (0=Monday, 6=Sunday)"
          },
          "phoneNumber": {
            "type": "string",
            "nullable": true
          },
          "callRetries": {
            "type": "integer",
            "minimum": 0,
            "maximum": 10,
            "default": 0
          },
          "retryDelaySeconds": {
            "type": "integer",
            "minimum": 0,
            "maximum": 86400,
            "default": 300,
            "description": "Delay between retries in seconds"
          },
          "retryDelayMode": {
            "type": "string",
            "enum": [
              "fixed",
              "next_day"
            ],
            "default": "fixed"
          },
          "retryConditions": {
            "$ref": "#/components/schemas/RetryConditions"
          },
          "endDate": {
            "type": "string",
            "nullable": true,
            "format": "date",
            "description": "@deprecated - No longer used"
          },
          "schedulingMode": {
            "type": "string",
            "enum": [
              "even",
              "fixed"
            ],
            "default": "even",
            "description": "@deprecated - No longer used"
          },
          "callIntervalSeconds": {
            "type": "integer",
            "minimum": 1,
            "maximum": 86400,
            "default": 30,
            "description": "@deprecated - No longer used"
          },
          "maxConcurrency": {
            "type": "integer",
            "minimum": 1,
            "maximum": 50,
            "default": 5,
            "description": "Internal parameter (hardcoded to 5)"
          },
          "webhookUrl": {
            "type": "string",
            "nullable": true
          },
          "customers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CampaignCustomer"
            },
            "default": []
          },
          "callIds": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": []
          },
          "roomNames": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": []
          },
          "events": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CampaignEvent"
            },
            "default": []
          },
          "version": {
            "type": "string",
            "enum": [
              "v1",
              "v2"
            ],
            "default": "v1"
          },
          "workspaceId": {
            "type": "string"
          },
          "createdAt": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          },
          "customerCount": {
            "type": "number"
          },
          "callCount": {
            "type": "number"
          }
        },
        "required": [
          "id",
          "name",
          "workspaceId",
          "createdAt",
          "updatedAt"
        ]
      },
      "CampaignCustomer": {
        "type": "object",
        "properties": {
          "phoneNumber": {
            "type": "string",
            "minLength": 1
          },
          "properties": {
            "type": "object",
            "nullable": true,
            "additionalProperties": {
              "nullable": true
            },
            "description": "Custom properties to pass to the agent"
          }
        },
        "required": [
          "phoneNumber"
        ]
      },
      "CampaignEvent": {
        "type": "object",
        "properties": {
          "event": {
            "type": "string"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": {
              "nullable": true
            }
          },
          "message": {
            "type": "string"
          },
          "data": {
            "nullable": true
          }
        },
        "required": [
          "event",
          "timestamp",
          "metadata",
          "message"
        ]
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "total": {
            "type": "number"
          },
          "limit": {
            "type": "number"
          },
          "offset": {
            "type": "number"
          }
        },
        "required": [
          "total",
          "limit",
          "offset"
        ]
      },
      "CampaignStatusCounts": {
        "type": "object",
        "properties": {
          "all": {
            "type": "number"
          },
          "active": {
            "type": "number"
          },
          "scheduled": {
            "type": "number"
          },
          "completed": {
            "type": "number"
          },
          "partiallyCompleted": {
            "type": "number"
          },
          "draft": {
            "type": "number"
          }
        },
        "required": [
          "all",
          "active",
          "scheduled",
          "completed",
          "partiallyCompleted",
          "draft"
        ]
      },
      "CampaignResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "isScheduled": {
            "type": "boolean"
          },
          "campaign": {
            "$ref": "#/components/schemas/Campaign"
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "status",
          "isScheduled",
          "campaign",
          "message"
        ]
      },
      "Campaign": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "assistantId": {
            "type": "string",
            "nullable": true
          },
          "phoneNumberId": {
            "type": "string",
            "nullable": true
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "draft",
              "scheduled",
              "active",
              "completed",
              "partially_completed"
            ],
            "default": "draft"
          },
          "startDate": {
            "type": "string",
            "nullable": true,
            "format": "date",
            "description": "When campaign starts (YYYY-MM-DD)"
          },
          "startTime": {
            "type": "string",
            "nullable": true,
            "pattern": "^\\d{2}:\\d{2}(:\\d{2})?$",
            "description": "Time on start date + retry window start (HH:MM)"
          },
          "timezone": {
            "type": "string",
            "default": "UTC",
            "description": "IANA timezone for all times"
          },
          "endTime": {
            "type": "string",
            "nullable": true,
            "pattern": "^\\d{2}:\\d{2}(:\\d{2})?$",
            "description": "Daily retry window end (HH:MM)"
          },
          "activeDays": {
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 0,
              "maximum": 6
            },
            "default": [
              0,
              1,
              2,
              3,
              4,
              5,
              6
            ],
            "description": "Days retries can happen (0=Monday, 6=Sunday)"
          },
          "phoneNumber": {
            "type": "string",
            "nullable": true
          },
          "callRetries": {
            "type": "integer",
            "minimum": 0,
            "maximum": 10,
            "default": 0
          },
          "retryDelaySeconds": {
            "type": "integer",
            "minimum": 0,
            "maximum": 86400,
            "default": 300,
            "description": "Delay between retries in seconds"
          },
          "retryDelayMode": {
            "type": "string",
            "enum": [
              "fixed",
              "next_day"
            ],
            "default": "fixed"
          },
          "retryConditions": {
            "$ref": "#/components/schemas/RetryConditions"
          },
          "endDate": {
            "type": "string",
            "nullable": true,
            "format": "date",
            "description": "@deprecated - No longer used"
          },
          "schedulingMode": {
            "type": "string",
            "enum": [
              "even",
              "fixed"
            ],
            "default": "even",
            "description": "@deprecated - No longer used"
          },
          "callIntervalSeconds": {
            "type": "integer",
            "minimum": 1,
            "maximum": 86400,
            "default": 30,
            "description": "@deprecated - No longer used"
          },
          "maxConcurrency": {
            "type": "integer",
            "minimum": 1,
            "maximum": 50,
            "default": 5,
            "description": "Internal parameter (hardcoded to 5)"
          },
          "webhookUrl": {
            "type": "string",
            "nullable": true
          },
          "customers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CampaignCustomer"
            },
            "default": []
          },
          "callIds": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": []
          },
          "roomNames": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": []
          },
          "events": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CampaignEvent"
            },
            "default": []
          },
          "version": {
            "type": "string",
            "enum": [
              "v1",
              "v2"
            ],
            "default": "v1"
          },
          "workspaceId": {
            "type": "string"
          },
          "createdAt": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "workspaceId",
          "createdAt",
          "updatedAt"
        ]
      },
      "PostCampaignRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1
          },
          "assistantId": {
            "type": "string",
            "description": "ID of the AI assistant"
          },
          "assistantName": {
            "type": "string",
            "description": "Name of the AI assistant (alternative to assistantId)"
          },
          "description": {
            "type": "string"
          },
          "startDate": {
            "type": "string",
            "format": "date",
            "description": "When campaign starts (YYYY-MM-DD). Omit for immediate start."
          },
          "startTime": {
            "type": "string",
            "pattern": "^\\d{2}:\\d{2}(:\\d{2})?$",
            "description": "Time on start date (HH:MM). Also defines retry window start."
          },
          "timezone": {
            "type": "string",
            "default": "UTC",
            "description": "IANA timezone for all times (e.g., Europe/Prague)"
          },
          "endTime": {
            "type": "string",
            "pattern": "^\\d{2}:\\d{2}(:\\d{2})?$",
            "description": "Daily retry window end (HH:MM). Retries only happen between startTime-endTime."
          },
          "activeDays": {
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 0,
              "maximum": 6
            },
            "default": [
              0,
              1,
              2,
              3,
              4,
              5,
              6
            ],
            "description": "Days retries can happen (0=Monday, 6=Sunday)"
          },
          "phoneNumber": {
            "type": "string",
            "description": "Caller ID phone number"
          },
          "callRetries": {
            "type": "integer",
            "minimum": 0,
            "maximum": 10,
            "default": 0,
            "description": "Number of retry attempts (0-10)"
          },
          "retryDelaySeconds": {
            "type": "integer",
            "minimum": 0,
            "maximum": 86400,
            "default": 300,
            "description": "Delay between retries in seconds (0-86400)"
          },
          "retryDelayMode": {
            "type": "string",
            "enum": [
              "fixed",
              "next_day"
            ],
            "default": "fixed"
          },
          "retryConditions": {
            "$ref": "#/components/schemas/RetryConditions"
          },
          "webhookUrl": {
            "type": "string"
          },
          "customers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CampaignCustomer"
            },
            "default": [],
            "description": "List of customers to call"
          },
          "phoneList": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Simple list of phone numbers (alternative to customers)"
          },
          "workspaceId": {
            "type": "string"
          }
        },
        "required": [
          "name"
        ]
      },
      "DeleteCampaignsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "deletedCount": {
            "type": "number"
          }
        },
        "required": [
          "success",
          "deletedCount"
        ]
      },
      "CampaignDetailsResponse": {
        "type": "object",
        "properties": {
          "campaign": {
            "$ref": "#/components/schemas/Campaign"
          }
        },
        "required": [
          "campaign"
        ]
      },
      "CampaignCustomersResponse": {
        "type": "object",
        "properties": {
          "customers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CampaignCustomerRow"
            }
          },
          "propertyKeys": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Available property keys for dynamic columns"
          },
          "pagination": {
            "$ref": "#/components/schemas/Pagination"
          },
          "statusCounts": {
            "type": "object",
            "additionalProperties": {
              "type": "number"
            }
          }
        },
        "required": [
          "customers",
          "propertyKeys",
          "pagination",
          "statusCounts"
        ]
      },
      "CampaignCustomerRow": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "phoneNumber": {
            "type": "string"
          },
          "properties": {
            "type": "object",
            "nullable": true,
            "additionalProperties": {
              "nullable": true
            }
          },
          "retryStatus": {
            "$ref": "#/components/schemas/RetryStatus"
          },
          "callCount": {
            "type": "number"
          },
          "createdAt": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "phoneNumber",
          "properties",
          "retryStatus",
          "callCount",
          "createdAt"
        ]
      },
      "RetryStatus": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "nullable": true,
            "enum": [
              "pending",
              "in_progress",
              "retrying",
              "success",
              "failed",
              "canceled",
              null
            ]
          },
          "attempts": {
            "type": "number"
          },
          "lastAttemptAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time"
          },
          "nextRetryAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time"
          },
          "callIds": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "status",
          "attempts",
          "lastAttemptAt",
          "nextRetryAt",
          "callIds"
        ]
      },
      "PostPocResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "campaignId": {
            "type": "string"
          },
          "callId": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "status",
          "campaignId",
          "callId",
          "message"
        ]
      },
      "PostPocRequest": {
        "type": "object",
        "properties": {
          "destination": {
            "type": "string",
            "minLength": 1,
            "description": "Destination phone number in E.164 format"
          },
          "agentId": {
            "type": "string",
            "pattern": "^\\d+$",
            "description": "Agent ID to use for the call"
          },
          "workspaceId": {
            "type": "string",
            "minLength": 1,
            "format": "uuid",
            "description": "Workspace ID"
          },
          "properties": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Custom properties to pass to the agent"
          }
        },
        "required": [
          "destination",
          "agentId",
          "workspaceId"
        ]
      },
      "CampaignJobsResponse": {
        "type": "object",
        "properties": {
          "jobs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/JobTimelineEntry"
            }
          },
          "retryConnections": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "fromJobId": {
                  "type": "string"
                },
                "toJobId": {
                  "type": "string"
                },
                "phoneNumber": {
                  "type": "string"
                }
              },
              "required": [
                "fromJobId",
                "toJobId",
                "phoneNumber"
              ]
            }
          },
          "queuedCount": {
            "type": "number",
            "description": "Number of jobs not yet started"
          },
          "timeRange": {
            "type": "object",
            "properties": {
              "startDate": {
                "type": "string",
                "nullable": true
              },
              "endDate": {
                "type": "string",
                "nullable": true
              },
              "startTime": {
                "type": "string",
                "nullable": true
              },
              "endTime": {
                "type": "string",
                "nullable": true
              },
              "timezone": {
                "type": "string"
              },
              "firstJob": {
                "type": "string",
                "nullable": true
              },
              "lastJob": {
                "type": "string",
                "nullable": true
              }
            },
            "required": [
              "startDate",
              "endDate",
              "startTime",
              "endTime",
              "timezone",
              "firstJob",
              "lastJob"
            ]
          },
          "stats": {
            "type": "object",
            "properties": {
              "total": {
                "type": "number"
              },
              "pending": {
                "type": "number"
              },
              "running": {
                "type": "number"
              },
              "completed": {
                "type": "number"
              },
              "failed": {
                "type": "number"
              },
              "cancelled": {
                "type": "number"
              }
            },
            "required": [
              "total",
              "pending",
              "running",
              "completed",
              "failed",
              "cancelled"
            ]
          }
        },
        "required": [
          "jobs",
          "retryConnections",
          "queuedCount",
          "timeRange",
          "stats"
        ]
      },
      "JobTimelineEntry": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "phoneNumber": {
            "type": "string"
          },
          "scheduledAt": {
            "type": "string",
            "format": "date-time"
          },
          "startedAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time"
          },
          "jobStatus": {
            "type": "string",
            "enum": [
              "pending",
              "claimed",
              "running",
              "completed",
              "failed",
              "cancelled"
            ]
          },
          "jobType": {
            "type": "string"
          },
          "attemptNumber": {
            "type": "number"
          },
          "lastError": {
            "type": "string"
          },
          "result": {
            "type": "object",
            "nullable": true,
            "properties": {
              "outcome": {
                "type": "string",
                "enum": [
                  "pending",
                  "in_progress",
                  "success",
                  "failed",
                  "canceled",
                  "rescheduled",
                  "human_callback_requested",
                  "skipped",
                  "verification_pending"
                ]
              },
              "call_id": {
                "type": "string"
              },
              "willRetry": {
                "type": "boolean"
              },
              "failureCategory": {
                "type": "string"
              },
              "retriesRemaining": {
                "type": "number"
              },
              "retryScheduledAt": {
                "type": "string"
              },
              "error": {
                "type": "string"
              },
              "reason": {
                "type": "string"
              },
              "message": {
                "type": "string"
              }
            },
            "additionalProperties": {
              "nullable": true
            }
          },
          "callEndedAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time"
          },
          "callDurationSeconds": {
            "type": "number",
            "nullable": true
          }
        },
        "required": [
          "id",
          "phoneNumber",
          "scheduledAt",
          "startedAt",
          "jobStatus",
          "jobType",
          "attemptNumber",
          "callEndedAt",
          "callDurationSeconds"
        ]
      },
      "CancelAllJobsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "cancelledJobsCount": {
            "type": "number",
            "description": "Number of jobs cancelled"
          },
          "affectedPhoneNumbers": {
            "type": "number",
            "description": "Number of unique customers affected"
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "cancelledJobsCount",
          "affectedPhoneNumbers",
          "message"
        ]
      },
      "RetryAllJobsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "retriesCreated": {
            "type": "number",
            "description": "Number of retry jobs created"
          },
          "skipped": {
            "type": "object",
            "properties": {
              "count": {
                "type": "number"
              },
              "reasons": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            },
            "required": [
              "count",
              "reasons"
            ]
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "retriesCreated",
          "skipped",
          "message"
        ]
      },
      "CancelJobResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "job": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "phoneNumber": {
                "type": "string"
              },
              "status": {
                "type": "string"
              }
            },
            "required": [
              "id",
              "phoneNumber",
              "status"
            ]
          },
          "contactOutcomeUpdated": {
            "type": "boolean",
            "description": "Whether this was the last pending job for the customer"
          }
        },
        "required": [
          "success",
          "job",
          "contactOutcomeUpdated"
        ]
      },
      "RetryJobResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "newJob": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "New retry job ID"
              },
              "phoneNumber": {
                "type": "string"
              },
              "scheduledAt": {
                "type": "string",
                "format": "date-time"
              },
              "attemptNumber": {
                "type": "number",
                "description": "Attempt number for this customer"
              }
            },
            "required": [
              "id",
              "phoneNumber",
              "scheduledAt",
              "attemptNumber"
            ]
          }
        },
        "required": [
          "success",
          "newJob"
        ]
      },
      "RescheduleJobResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "job": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "phoneNumber": {
                "type": "string"
              },
              "oldScheduledAt": {
                "type": "string",
                "format": "date-time"
              },
              "newScheduledAt": {
                "type": "string",
                "format": "date-time"
              }
            },
            "required": [
              "id",
              "phoneNumber",
              "oldScheduledAt",
              "newScheduledAt"
            ]
          }
        },
        "required": [
          "success",
          "job"
        ]
      },
      "PostExportResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "downloadUrl": {
            "type": "string",
            "format": "uri",
            "description": "Signed URL to download the export"
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "PostExportRequest": {
        "type": "object",
        "properties": {
          "endpoint": {
            "type": "string",
            "enum": [
              "/api/v2/call",
              "/api/v2/campaign",
              "/api/v2/phone-numbers",
              "/api/v2/solutions/runs",
              "/api/v2/problems"
            ],
            "description": "API endpoint to export data from"
          },
          "params": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Query parameters to pass to the endpoint (must include workspaceId)"
          },
          "format": {
            "type": "string",
            "enum": [
              "csv",
              "xlsx",
              "markdown",
              "json"
            ],
            "default": "csv",
            "description": "Export file format"
          },
          "deliveryMethod": {
            "type": "string",
            "enum": [
              "download",
              "email"
            ],
            "default": "download",
            "description": "How to deliver the export"
          },
          "email": {
            "type": "string",
            "nullable": true,
            "format": "email",
            "description": "Email address for email delivery"
          }
        },
        "required": [
          "endpoint",
          "params"
        ]
      }
    },
    "parameters": {}
  },
  "paths": {
    "/campaign": {
      "get": {
        "summary": "List campaigns",
        "description": "Returns campaigns for a workspace with filters, sorting, pagination, and export support.",
        "tags": [
          "Campaigns"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace identifier"
            },
            "required": true,
            "description": "Workspace identifier",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "25",
              "description": "Page size"
            },
            "required": false,
            "description": "Page size",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "0",
              "description": "Offset for pagination"
            },
            "required": false,
            "description": "Offset for pagination",
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Base64-encoded filter state"
            },
            "required": false,
            "description": "Base64-encoded filter state",
            "name": "filters",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Global search term"
            },
            "required": false,
            "description": "Global search term",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Sort field name"
            },
            "required": false,
            "description": "Sort field name",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "description": "Sort direction"
            },
            "required": false,
            "description": "Sort direction",
            "name": "sortOrder",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Set to 'true' to return a file export"
            },
            "required": false,
            "description": "Set to 'true' to return a file export",
            "name": "export",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "csv",
                "xlsx",
                "markdown"
              ],
              "description": "Export file format"
            },
            "required": false,
            "description": "Export file format",
            "name": "exportFormat",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "JSON array of column definitions {id,label}"
            },
            "required": false,
            "description": "JSON array of column definitions {id,label}",
            "name": "exportColumns",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Campaigns with pagination and status counts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/CampaignListResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create campaign",
        "description": "Creates an outbound voice campaign and schedules calls to the provided customers.",
        "tags": [
          "Campaigns"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PostCampaignRequest"
              },
              "example": {
                "name": "Q1 Customer Outreach",
                "assistantId": "agent_abc123",
                "description": "Follow-up calls for Q1 leads",
                "startDate": "2024-03-15",
                "startTime": "09:00",
                "endTime": "17:00",
                "timezone": "America/New_York",
                "activeDays": [
                  0,
                  1,
                  2,
                  3,
                  4
                ],
                "phoneNumber": "+14155551234",
                "callRetries": 3,
                "retryDelaySeconds": 3600,
                "retryDelayMode": "fixed",
                "webhookUrl": "https://api.example.com/webhook/campaign",
                "customers": [
                  {
                    "phoneNumber": "+14155559001",
                    "properties": {
                      "name": "John Doe",
                      "company": "Acme Inc"
                    }
                  },
                  {
                    "phoneNumber": "+14155559002",
                    "properties": {
                      "name": "Jane Smith",
                      "company": "Tech Corp"
                    }
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Campaign created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/CampaignResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Phone number or assistant not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Bulk delete campaigns",
        "tags": [
          "Campaigns"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Comma-separated campaign IDs to delete"
            },
            "required": true,
            "description": "Comma-separated campaign IDs to delete",
            "name": "campaignIds",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Deletion result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/DeleteCampaignsResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/campaign/{campaignId}": {
      "get": {
        "summary": "Get campaign",
        "description": "Returns campaign configuration, customers, events, and call IDs.",
        "tags": [
          "Campaigns"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Campaign ID"
            },
            "required": true,
            "description": "Campaign ID",
            "name": "campaignId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Campaign details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/CampaignDetailsResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Campaign not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete campaign",
        "tags": [
          "Campaigns"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Campaign ID"
            },
            "required": true,
            "description": "Campaign ID",
            "name": "campaignId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Deletion result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/DeleteCampaignsResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Campaign not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/campaign/{campaignId}/customers": {
      "get": {
        "summary": "List campaign customers",
        "description": "Returns customers for a campaign with retry status, property keys, pagination, and exports.",
        "tags": [
          "Campaign Customers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Campaign ID"
            },
            "required": true,
            "description": "Campaign ID",
            "name": "campaignId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "25",
              "description": "Page size"
            },
            "required": false,
            "description": "Page size",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "0",
              "description": "Offset for pagination"
            },
            "required": false,
            "description": "Offset for pagination",
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Base64-encoded filter state"
            },
            "required": false,
            "description": "Base64-encoded filter state",
            "name": "filters",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Global search term"
            },
            "required": false,
            "description": "Global search term",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Sort field name"
            },
            "required": false,
            "description": "Sort field name",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "description": "Sort direction"
            },
            "required": false,
            "description": "Sort direction",
            "name": "sortOrder",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Set to 'true' to return a file export"
            },
            "required": false,
            "description": "Set to 'true' to return a file export",
            "name": "export",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "csv",
                "xlsx",
                "markdown"
              ],
              "description": "Export file format"
            },
            "required": false,
            "description": "Export file format",
            "name": "exportFormat",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "JSON array of column definitions {id,label}"
            },
            "required": false,
            "description": "JSON array of column definitions {id,label}",
            "name": "exportColumns",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Customers with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/CampaignCustomersResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Campaign not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/campaign/poc": {
      "post": {
        "summary": "Create POC call",
        "description": "Creates a single proof-of-concept call for testing.",
        "tags": [
          "POC"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PostPocRequest"
              },
              "example": {
                "destination": "+14155559999",
                "agentId": "agent_abc123",
                "workspaceId": "550e8400-e29b-41d4-a716-446655440000",
                "properties": {
                  "customerName": "Test User",
                  "accountId": "12345"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "POC call created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/PostPocResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Agent not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/campaign/{campaignId}/jobs": {
      "get": {
        "summary": "List campaign jobs",
        "description": "Returns all jobs for a campaign including timeline visualization data, retry connections, and statistics.",
        "tags": [
          "Campaign Jobs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Campaign ID"
            },
            "required": true,
            "description": "Campaign ID",
            "name": "campaignId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Campaign jobs with timeline data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/CampaignJobsResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Campaign not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/campaign/{campaignId}/jobs/cancel-all": {
      "post": {
        "summary": "Cancel all pending jobs",
        "description": "Cancels all pending and claimed jobs in the campaign. Updates contact outcomes to 'canceled'.",
        "tags": [
          "Campaign Jobs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Campaign ID"
            },
            "required": true,
            "description": "Campaign ID",
            "name": "campaignId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Jobs cancelled",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/CancelAllJobsResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Campaign not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/campaign/{campaignId}/jobs/retry-all": {
      "post": {
        "summary": "Retry all failed jobs",
        "description": "Creates retry jobs for all customers with failed or canceled outcomes. Skips customers with pending jobs.",
        "tags": [
          "Campaign Jobs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Campaign ID"
            },
            "required": true,
            "description": "Campaign ID",
            "name": "campaignId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Retry jobs created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/RetryAllJobsResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Campaign not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/campaign/{campaignId}/jobs/{jobId}/cancel": {
      "post": {
        "summary": "Cancel job",
        "description": "Cancels a specific pending or claimed job. Only initiate_call jobs can be cancelled.",
        "tags": [
          "Campaign Jobs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Campaign ID"
            },
            "required": true,
            "description": "Campaign ID",
            "name": "campaignId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Job ID"
            },
            "required": true,
            "description": "Job ID",
            "name": "jobId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Job cancelled",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/CancelJobResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Campaign or job not found"
          },
          "409": {
            "description": "Job cannot be cancelled (already completed/running)"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/campaign/{campaignId}/jobs/{jobId}/retry": {
      "post": {
        "summary": "Retry job",
        "description": "Creates a new retry job for a failed or canceled job. The original job must have failed or been canceled.",
        "tags": [
          "Campaign Jobs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Campaign ID"
            },
            "required": true,
            "description": "Campaign ID",
            "name": "campaignId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Job ID to retry"
            },
            "required": true,
            "description": "Job ID to retry",
            "name": "jobId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Retry job created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/RetryJobResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Job has not failed - cannot retry"
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Campaign or job not found"
          },
          "409": {
            "description": "Customer already has a pending retry job"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/campaign/{campaignId}/jobs/{jobId}/reschedule": {
      "post": {
        "summary": "Reschedule job",
        "description": "Reschedules a pending job to start immediately. Only pending or claimed jobs can be rescheduled.",
        "tags": [
          "Campaign Jobs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Campaign ID"
            },
            "required": true,
            "description": "Campaign ID",
            "name": "campaignId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Job ID to reschedule"
            },
            "required": true,
            "description": "Job ID to reschedule",
            "name": "jobId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Job rescheduled",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/RescheduleJobResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Campaign or job not found"
          },
          "409": {
            "description": "Job cannot be rescheduled (already started/completed)"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "Campaign Call Outcome": {
      "post": {
        "summary": "Call outcome webhook",
        "description": "Sent to the campaign's webhookUrl when a call completes or fails.\n\n**Payload Types:**\n- **WebhookCallOutcome**: Sent when a call completes (success or failure with ended_reason)\n- **WebhookApiError**: Sent when call initiation fails before a call is created\n\n**Failure Categories:**\n- `no_answer`: Customer didn't answer\n- `busy`: Line was busy\n- `voicemail`: Reached voicemail\n- `timeout`: Call timed out (infrastructure)\n- `api_error`: API call failed before call started\n- `llm_fail`: LLM evaluation failed (if successPrompt configured)\n- `other`: Unknown failure\n\n**Retry Behavior:**\n- If `willRetry: true`, check `retryScheduledAt` for next attempt time\n- Retries respect the campaign's schedule (activeDays, startTime, endTime)\n- `retriesRemaining` shows how many retries are left",
        "tags": [
          "Webhooks"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WebhookCallOutcome"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Webhook received successfully"
          }
        }
      }
    },
    "/call": {
      "get": {
        "summary": "List calls",
        "description": "Returns calls for a workspace with filters, sorting, pagination, and export support.",
        "tags": [
          "Calls"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace identifier"
            },
            "required": true,
            "description": "Workspace identifier",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "20",
              "description": "Page size (defaults to 20)"
            },
            "required": false,
            "description": "Page size (defaults to 20)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "0",
              "description": "Offset for pagination"
            },
            "required": false,
            "description": "Offset for pagination",
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "startedAt",
                "duration",
                "sentiment",
                "relativeTime"
              ],
              "default": "startedAt",
              "description": "Sort field"
            },
            "required": false,
            "description": "Sort field",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc",
              "description": "Sort direction"
            },
            "required": false,
            "description": "Sort direction",
            "name": "sortOrder",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Comma-separated list of call IDs"
            },
            "required": false,
            "description": "Comma-separated list of call IDs",
            "name": "callIds",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filter calls starting at or after this ISO timestamp"
            },
            "required": false,
            "description": "Filter calls starting at or after this ISO timestamp",
            "name": "startDate",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filter calls starting before this ISO timestamp"
            },
            "required": false,
            "description": "Filter calls starting before this ISO timestamp",
            "name": "endDate",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by phone number ID"
            },
            "required": false,
            "description": "Filter by phone number ID",
            "name": "phoneNumberId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filter by customer phone number"
            },
            "required": false,
            "description": "Filter by customer phone number",
            "name": "customerNumber",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by campaign ID"
            },
            "required": false,
            "description": "Filter by campaign ID",
            "name": "campaignId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Free text search"
            },
            "required": false,
            "description": "Free text search",
            "name": "searchTerm",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filter by call status"
            },
            "required": false,
            "description": "Filter by call status",
            "name": "status",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filter by call type"
            },
            "required": false,
            "description": "Filter by call type",
            "name": "type",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Filter by ended reason"
            },
            "required": false,
            "description": "Filter by ended reason",
            "name": "endedReason",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Base64-encoded filter state"
            },
            "required": false,
            "description": "Base64-encoded filter state",
            "name": "filters",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Set to 'false' to skip status aggregation"
            },
            "required": false,
            "description": "Set to 'false' to skip status aggregation",
            "name": "includeStatusCounts",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "LLM semantic search query - applied before filters"
            },
            "required": false,
            "description": "LLM semantic search query - applied before filters",
            "name": "llmQuery",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "all",
                "archived"
              ],
              "default": "active",
              "description": "Filter by archive status"
            },
            "required": false,
            "description": "Filter by archive status",
            "name": "archivedFilter",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Set to 'true' to return a file export"
            },
            "required": false,
            "description": "Set to 'true' to return a file export",
            "name": "export",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "csv",
                "xlsx",
                "markdown"
              ],
              "description": "Export file format"
            },
            "required": false,
            "description": "Export file format",
            "name": "exportFormat",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "JSON array of column definitions {id,label}"
            },
            "required": false,
            "description": "JSON array of column definitions {id,label}",
            "name": "exportColumns",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Comma-separated extras: transcript,cxInsights"
            },
            "required": false,
            "description": "Comma-separated extras: transcript,cxInsights",
            "name": "additionalData",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Calls with pagination and status counts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "calls": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "assistantId": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "assistantName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "workflowId": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "workflowName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "workspaceId": {
                                    "type": "string"
                                  },
                                  "phoneNumberId": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "phoneNumber": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "simulationId": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "campaign": {
                                    "type": "object",
                                    "nullable": true,
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "name": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "name"
                                    ]
                                  },
                                  "customerNumber": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "startedAt": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "endedAt": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "duration": {
                                    "type": "number",
                                    "nullable": true
                                  },
                                  "status": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "type": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "endedReason": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "transcript": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "messages": {
                                    "type": "array",
                                    "nullable": true,
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "role": {
                                          "type": "string"
                                        },
                                        "message": {
                                          "type": "string"
                                        },
                                        "duration": {
                                          "type": "number"
                                        },
                                        "secondsFromStart": {
                                          "type": "number"
                                        },
                                        "timestamp": {
                                          "type": "string"
                                        },
                                        "endTime": {
                                          "type": "number"
                                        }
                                      },
                                      "required": [
                                        "role"
                                      ]
                                    }
                                  },
                                  "summary": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "cost": {
                                    "type": "number",
                                    "nullable": true
                                  },
                                  "recordingUrl": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "tags": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "tag": {
                                          "type": "string"
                                        },
                                        "source": {
                                          "type": "string"
                                        },
                                        "value": {
                                          "type": "number"
                                        },
                                        "confidence": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "metadata": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          }
                                        }
                                      },
                                      "required": [
                                        "tag",
                                        "source"
                                      ],
                                      "additionalProperties": false
                                    }
                                  },
                                  "customer": {
                                    "type": "object",
                                    "properties": {
                                      "number": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "identity": {
                                        "type": "object",
                                        "properties": {
                                          "firstName": {
                                            "type": "string"
                                          },
                                          "lastName": {
                                            "type": "string"
                                          },
                                          "email": {
                                            "type": "string"
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "unresolvedProblemsCount": {
                                    "type": "number"
                                  },
                                  "resolvedProblemsCount": {
                                    "type": "number"
                                  },
                                  "unresolvedAiProblemsCount": {
                                    "type": "number"
                                  },
                                  "unresolvedUserProblemsCount": {
                                    "type": "number"
                                  },
                                  "reviewStatus": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "reviewAssignees": {
                                    "type": "array",
                                    "nullable": true,
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "userId": {
                                          "type": "string"
                                        },
                                        "userName": {
                                          "type": "string",
                                          "nullable": true
                                        }
                                      },
                                      "required": [
                                        "userId"
                                      ]
                                    }
                                  },
                                  "isArchived": {
                                    "type": "boolean",
                                    "default": false
                                  }
                                },
                                "required": [
                                  "id",
                                  "workspaceId"
                                ]
                              }
                            },
                            "pagination": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "number"
                                },
                                "limit": {
                                  "type": "number"
                                },
                                "offset": {
                                  "type": "number"
                                },
                                "hasNext": {
                                  "type": "boolean"
                                },
                                "hasPrevious": {
                                  "type": "boolean"
                                }
                              },
                              "required": [
                                "total",
                                "limit",
                                "offset",
                                "hasNext",
                                "hasPrevious"
                              ]
                            },
                            "statusCounts": {
                              "type": "object",
                              "properties": {
                                "all": {
                                  "type": "number"
                                },
                                "transferred": {
                                  "type": "number"
                                },
                                "successful": {
                                  "type": "number"
                                },
                                "failed": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "all",
                                "transferred",
                                "successful",
                                "failed"
                              ]
                            }
                          },
                          "required": [
                            "calls",
                            "pagination"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Initiate call",
        "description": "Initiates an outbound call. Supports both regular calls (dest, from, gateway) and campaign calls (phoneNumber, campaignId, workspaceId).",
        "tags": [
          "Calls"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "dest": {
                    "type": "string",
                    "description": "Destination phone number"
                  },
                  "from": {
                    "type": "string",
                    "description": "Caller ID phone number"
                  },
                  "agentExt": {
                    "type": "string",
                    "description": "Optional agent extension for click-to-dial"
                  },
                  "gateway": {
                    "type": "string",
                    "description": "FusionPBX gateway (required when agentExt is not provided)"
                  },
                  "phoneNumber": {
                    "type": "string",
                    "description": "Customer phone number (for campaign calls)"
                  },
                  "campaignId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Campaign ID (for campaign calls)"
                  },
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "properties": {
                    "type": "object",
                    "additionalProperties": {
                      "nullable": true
                    },
                    "description": "Custom properties to pass to the agent"
                  },
                  "assistantId": {
                    "type": "string",
                    "description": "Override campaign assistant ID"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Call initiated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "callId": {
                              "type": "string"
                            },
                            "jobUuid": {
                              "type": "string"
                            },
                            "job_uuid": {
                              "type": "string"
                            },
                            "message": {
                              "type": "string"
                            },
                            "error": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Bulk update calls",
        "description": "Updates multiple calls. Currently supports archiving/unarchiving calls.",
        "tags": [
          "Calls"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid",
                    "description": "Workspace identifier"
                  },
                  "callIds": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Comma-separated call IDs"
                  },
                  "archive": {
                    "type": "boolean",
                    "description": "true = archive, false = unarchive"
                  }
                },
                "required": [
                  "workspaceId",
                  "callIds"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Calls updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "updatedCount": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "success",
                            "updatedCount"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Bulk delete calls",
        "tags": [
          "Calls"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace identifier"
            },
            "required": true,
            "description": "Workspace identifier",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Comma-separated call IDs"
            },
            "required": true,
            "description": "Comma-separated call IDs",
            "name": "callIds",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Deletion result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "deletedCount": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "success",
                            "deletedCount"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/call/{callId}": {
      "get": {
        "summary": "Get call details",
        "description": "Returns detailed call information including transcript, messages, tags, and problems.",
        "tags": [
          "Calls"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Call ID"
            },
            "required": true,
            "description": "Call ID",
            "name": "callId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Call details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "call": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "assistantId": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "assistantName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "workflowId": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "workflowName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "workspaceId": {
                                  "type": "string"
                                },
                                "phoneNumberId": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "phoneNumber": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "simulationId": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "campaign": {
                                  "type": "object",
                                  "nullable": true,
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "assistantId": {
                                      "type": "string",
                                      "nullable": true
                                    },
                                    "phoneNumberId": {
                                      "type": "string",
                                      "nullable": true
                                    },
                                    "name": {
                                      "type": "string"
                                    },
                                    "description": {
                                      "type": "string",
                                      "nullable": true
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "name"
                                  ]
                                },
                                "customerNumber": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "startedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "endedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "duration": {
                                  "type": "number",
                                  "nullable": true
                                },
                                "status": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "type": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "endedReason": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "transcript": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "messages": {
                                  "type": "array",
                                  "nullable": true,
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "role": {
                                        "type": "string"
                                      },
                                      "message": {
                                        "type": "string"
                                      },
                                      "duration": {
                                        "type": "number"
                                      },
                                      "secondsFromStart": {
                                        "type": "number"
                                      },
                                      "timestamp": {
                                        "type": "string"
                                      },
                                      "endTime": {
                                        "type": "number"
                                      }
                                    },
                                    "required": [
                                      "role"
                                    ]
                                  }
                                },
                                "summary": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "cost": {
                                  "type": "number",
                                  "nullable": true
                                },
                                "recordingUrl": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "tags": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "tag": {
                                        "type": "string"
                                      },
                                      "source": {
                                        "type": "string"
                                      },
                                      "value": {
                                        "type": "number"
                                      },
                                      "confidence": {
                                        "type": "number",
                                        "nullable": true,
                                        "minimum": 0,
                                        "maximum": 1
                                      },
                                      "metadata": {
                                        "type": "object",
                                        "nullable": true,
                                        "additionalProperties": {
                                          "nullable": true
                                        }
                                      }
                                    },
                                    "required": [
                                      "tag",
                                      "source"
                                    ],
                                    "additionalProperties": false
                                  }
                                },
                                "customer": {
                                  "type": "object",
                                  "properties": {
                                    "number": {
                                      "type": "string",
                                      "nullable": true
                                    },
                                    "identity": {
                                      "type": "object",
                                      "properties": {
                                        "firstName": {
                                          "type": "string"
                                        },
                                        "lastName": {
                                          "type": "string"
                                        },
                                        "email": {
                                          "type": "string"
                                        }
                                      }
                                    }
                                  }
                                },
                                "unresolvedProblemsCount": {
                                  "type": "number"
                                },
                                "resolvedProblemsCount": {
                                  "type": "number"
                                },
                                "unresolvedAiProblemsCount": {
                                  "type": "number"
                                },
                                "unresolvedUserProblemsCount": {
                                  "type": "number"
                                },
                                "reviewStatus": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "reviewAssignees": {
                                  "type": "array",
                                  "nullable": true,
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "userId": {
                                        "type": "string"
                                      },
                                      "userName": {
                                        "type": "string",
                                        "nullable": true
                                      }
                                    },
                                    "required": [
                                      "userId"
                                    ]
                                  }
                                },
                                "isArchived": {
                                  "type": "boolean",
                                  "default": false
                                },
                                "analysis": {
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "artifact": {
                                  "nullable": true
                                },
                                "logs": {
                                  "type": "array",
                                  "items": {
                                    "nullable": true
                                  }
                                },
                                "problems": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "workspaceId": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "callId": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "agentId": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "problem": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "description": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "type": {
                                        "type": "string",
                                        "nullable": true,
                                        "enum": [
                                          "system",
                                          "audio",
                                          "transcription",
                                          "decision",
                                          "general",
                                          null
                                        ]
                                      },
                                      "severity": {
                                        "type": "number",
                                        "minimum": 0,
                                        "maximum": 1,
                                        "default": 0.5
                                      },
                                      "status": {
                                        "type": "string",
                                        "default": "open"
                                      },
                                      "assignedTo": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdBy": {
                                        "type": "string",
                                        "default": "ai"
                                      },
                                      "messageId": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "resolved": {
                                        "type": "boolean",
                                        "default": false
                                      },
                                      "resolvedAt": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "resolvedBy": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "solutionId": {
                                        "type": "string",
                                        "nullable": true,
                                        "format": "uuid"
                                      },
                                      "createdAt": {
                                        "type": "string"
                                      },
                                      "updatedAt": {
                                        "type": "string"
                                      },
                                      "callStartedAt": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "customerNumber": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "agentName": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "resolvedByName": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "assignees": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "userId": {
                                              "type": "string"
                                            },
                                            "userName": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "assignedAt": {
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "userId",
                                            "assignedAt"
                                          ]
                                        }
                                      },
                                      "commentsCount": {
                                        "type": "number"
                                      },
                                      "isArchived": {
                                        "type": "boolean",
                                        "default": false
                                      }
                                    },
                                    "required": [
                                      "problem"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "workspaceId"
                              ]
                            }
                          },
                          "required": [
                            "call"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Call not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/call/{callId}/tags": {
      "post": {
        "summary": "Add call tag",
        "description": "Adds a tag to a call.",
        "tags": [
          "Call Tags"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Call ID"
            },
            "required": true,
            "description": "Call ID",
            "name": "callId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "tag": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Tag name"
                  },
                  "source": {
                    "type": "string",
                    "minLength": 1,
                    "default": "user",
                    "description": "Tag source (e.g., 'user', 'ai')"
                  },
                  "value": {
                    "type": "number",
                    "description": "Numeric value for the tag"
                  },
                  "confidence": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1,
                    "description": "Confidence score (0-1)"
                  },
                  "metadata": {
                    "type": "object",
                    "nullable": true,
                    "additionalProperties": {
                      "nullable": true
                    },
                    "description": "Additional metadata"
                  }
                },
                "required": [
                  "workspaceId",
                  "tag"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tag added",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "tag": {
                              "type": "object",
                              "properties": {
                                "tag": {
                                  "type": "string"
                                },
                                "source": {
                                  "type": "string"
                                },
                                "value": {
                                  "type": "number"
                                },
                                "confidence": {
                                  "type": "number",
                                  "nullable": true,
                                  "minimum": 0,
                                  "maximum": 1
                                },
                                "metadata": {
                                  "type": "object",
                                  "nullable": true,
                                  "additionalProperties": {
                                    "nullable": true
                                  }
                                }
                              },
                              "required": [
                                "tag",
                                "source"
                              ],
                              "additionalProperties": false
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Call not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Remove call tag",
        "description": "Removes a tag from a call.",
        "tags": [
          "Call Tags"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Call ID"
            },
            "required": true,
            "description": "Call ID",
            "name": "callId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Tag name to remove"
            },
            "required": true,
            "description": "Tag name to remove",
            "name": "tag",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Tag removed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Call not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update call tag",
        "description": "Updates an existing tag or adds a new one. Can also delete a tag if delete=true.",
        "tags": [
          "Call Tags"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Call ID"
            },
            "required": true,
            "description": "Call ID",
            "name": "callId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "tag": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Tag name"
                  },
                  "source": {
                    "type": "string",
                    "minLength": 1,
                    "default": "user",
                    "description": "Tag source (e.g., 'user', 'ai')"
                  },
                  "value": {
                    "type": "number",
                    "nullable": true,
                    "description": "Numeric value for the tag"
                  },
                  "confidence": {
                    "type": "number",
                    "nullable": true,
                    "minimum": 0,
                    "maximum": 1,
                    "description": "Confidence score (0-1)"
                  },
                  "metadata": {
                    "type": "object",
                    "nullable": true,
                    "additionalProperties": {
                      "nullable": true
                    },
                    "description": "Additional metadata"
                  },
                  "delete": {
                    "type": "boolean",
                    "description": "If true, delete the tag instead of updating"
                  }
                },
                "required": [
                  "workspaceId",
                  "tag"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tag updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "tag": {
                              "type": "object",
                              "properties": {
                                "tag": {
                                  "type": "string"
                                },
                                "source": {
                                  "type": "string"
                                },
                                "value": {
                                  "type": "number"
                                },
                                "confidence": {
                                  "type": "number",
                                  "nullable": true,
                                  "minimum": 0,
                                  "maximum": 1
                                },
                                "metadata": {
                                  "type": "object",
                                  "nullable": true,
                                  "additionalProperties": {
                                    "nullable": true
                                  }
                                }
                              },
                              "required": [
                                "tag",
                                "source"
                              ],
                              "additionalProperties": false
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Call not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/call/{callId}/recording": {
      "get": {
        "summary": "Download call recording",
        "description": "Returns the MP3 audio recording for a call.",
        "tags": [
          "Call Recordings"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "callId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "MP3 audio stream",
            "content": {
              "audio/mpeg": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Access denied"
          },
          "404": {
            "description": "Recording not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Upload call recording",
        "description": "Uploads an MP3 recording file for a call.",
        "tags": [
          "Call Recordings"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "callId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "recording": {
                    "type": "string",
                    "format": "binary",
                    "description": "MP3 audio file"
                  }
                },
                "required": [
                  "recording"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Recording uploaded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "callId": {
                              "type": "string"
                            },
                            "key": {
                              "type": "string"
                            },
                            "size": {
                              "type": "number"
                            },
                            "contentType": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "callId",
                            "key",
                            "size",
                            "contentType"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Access denied"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/agents": {
      "get": {
        "summary": "List agents",
        "description": "Returns agents for a workspace with pagination.",
        "tags": [
          "Agents"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "firebase",
                "vapi",
                "all"
              ],
              "default": "all",
              "description": "Filter by agent source"
            },
            "required": false,
            "description": "Filter by agent source",
            "name": "source",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "maximum": 100,
              "default": 50,
              "description": "Maximum number of agents to return (1-100)"
            },
            "required": false,
            "description": "Maximum number of agents to return (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "description": "Number of agents to skip for pagination"
            },
            "required": false,
            "description": "Number of agents to skip for pagination",
            "name": "offset",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Agents list with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "agents": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "minLength": 1
                                  },
                                  "name": {
                                    "type": "string"
                                  },
                                  "source": {
                                    "type": "string",
                                    "enum": [
                                      "firebase",
                                      "vapi"
                                    ]
                                  },
                                  "createdAt": {
                                    "type": "string",
                                    "format": "date-time"
                                  },
                                  "updatedAt": {
                                    "type": "string",
                                    "format": "date-time"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name",
                                  "source",
                                  "createdAt",
                                  "updatedAt"
                                ]
                              }
                            },
                            "total": {
                              "type": "integer",
                              "minimum": 0
                            },
                            "limit": {
                              "type": "integer",
                              "minimum": 0,
                              "exclusiveMinimum": true
                            },
                            "offset": {
                              "type": "integer",
                              "minimum": 0
                            }
                          },
                          "required": [
                            "agents",
                            "total",
                            "limit",
                            "offset"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create agent",
        "description": "Creates a new AI agent with the specified configuration.",
        "tags": [
          "Agents"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100
                  },
                  "source": {
                    "type": "string",
                    "enum": [
                      "firebase",
                      "vapi"
                    ],
                    "default": "firebase"
                  },
                  "config": {
                    "type": "object",
                    "properties": {
                      "llmConfig": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "model": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 100
                          },
                          "systemPrompt": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 100000
                          },
                          "firstMessage": {
                            "type": "string",
                            "maxLength": 2000
                          },
                          "firstMessageMode": {
                            "type": "string",
                            "nullable": true,
                            "enum": [
                              "assistant-speaks-first-with-model-generated-message",
                              "assistant-speaks-first",
                              "assistant-waits-for-user",
                              null
                            ],
                            "default": "assistant-waits-for-user"
                          },
                          "disableInterruptionsDuringFirstMessage": {
                            "type": "boolean",
                            "default": false
                          },
                          "maxTokens": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 4000,
                            "default": 1000
                          },
                          "temperature": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 2,
                            "default": 0.7
                          },
                          "thinkingBudgetEnabled": {
                            "type": "boolean",
                            "nullable": true,
                            "default": false
                          },
                          "thinkingBudget": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 1000,
                            "maximum": 100000,
                            "default": 10000
                          },
                          "tools": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "enum": [
                                    "function"
                                  ]
                                },
                                "function": {
                                  "type": "object",
                                  "properties": {
                                    "name": {
                                      "type": "string"
                                    },
                                    "handler": {
                                      "type": "string"
                                    },
                                    "description": {
                                      "type": "string"
                                    },
                                    "parameters": {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string"
                                        },
                                        "properties": {
                                          "type": "object",
                                          "additionalProperties": {
                                            "nullable": true
                                          }
                                        },
                                        "required": {
                                          "type": "array",
                                          "items": {
                                            "type": "string"
                                          }
                                        },
                                        "items": {
                                          "nullable": true
                                        }
                                      },
                                      "required": [
                                        "type"
                                      ],
                                      "additionalProperties": {
                                        "nullable": true
                                      }
                                    },
                                    "transition_to": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "name",
                                    "handler",
                                    "description",
                                    "parameters"
                                  ]
                                },
                                "config": {
                                  "type": "object",
                                  "properties": {
                                    "maxPerNTurns": {
                                      "type": "integer",
                                      "minimum": 0,
                                      "exclusiveMinimum": true
                                    },
                                    "alwaysRunsAt": {
                                      "type": "array",
                                      "items": {
                                        "type": "string",
                                        "enum": [
                                          "each_turn",
                                          "start_of_call",
                                          "end_of_call"
                                        ]
                                      }
                                    },
                                    "timeoutMs": {
                                      "type": "integer",
                                      "minimum": 0,
                                      "exclusiveMinimum": true
                                    }
                                  }
                                }
                              },
                              "required": [
                                "type",
                                "function"
                              ]
                            },
                            "default": []
                          },
                          "additionalSettings": {
                            "type": "object",
                            "nullable": true,
                            "additionalProperties": {
                              "nullable": true
                            },
                            "default": {}
                          }
                        },
                        "required": [
                          "provider",
                          "model",
                          "systemPrompt",
                          "firstMessage"
                        ]
                      },
                      "ttsConfig": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "model": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 100
                          },
                          "voiceId": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 100
                          },
                          "language": {
                            "type": "string",
                            "nullable": true,
                            "minLength": 1,
                            "default": "multi"
                          },
                          "speed": {
                            "type": "number",
                            "nullable": true,
                            "minimum": 0.25,
                            "maximum": 4,
                            "default": 1
                          },
                          "stability": {
                            "type": "number",
                            "nullable": true,
                            "minimum": 0,
                            "maximum": 1
                          },
                          "similarityBoost": {
                            "type": "number",
                            "nullable": true,
                            "minimum": 0,
                            "maximum": 1
                          },
                          "additionalSettings": {
                            "type": "object",
                            "nullable": true,
                            "additionalProperties": {
                              "nullable": true
                            },
                            "default": {}
                          },
                          "startSpeakingPlan": {
                            "type": "object",
                            "nullable": true,
                            "properties": {
                              "waitSeconds": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 5,
                                "default": 0.4
                              }
                            }
                          },
                          "stopSpeakingPlan": {
                            "type": "object",
                            "nullable": true,
                            "properties": {
                              "numberOfWords": {
                                "type": "integer",
                                "minimum": 0,
                                "maximum": 10,
                                "default": 1
                              },
                              "voiceSeconds": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 0.5,
                                "default": 0.4
                              },
                              "backOffSeconds": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 3,
                                "default": 0.4
                              }
                            }
                          }
                        },
                        "required": [
                          "provider",
                          "model",
                          "voiceId",
                          "stability",
                          "similarityBoost"
                        ]
                      },
                      "sstConfig": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "model": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 100
                          },
                          "language": {
                            "type": "string",
                            "nullable": true,
                            "minLength": 1,
                            "default": "multi"
                          },
                          "temperature": {
                            "type": "number",
                            "nullable": true,
                            "minimum": 0,
                            "maximum": 1
                          },
                          "punctuate": {
                            "type": "boolean",
                            "nullable": true,
                            "default": true
                          },
                          "diarize": {
                            "type": "boolean",
                            "nullable": true,
                            "default": false
                          },
                          "additionalSettings": {
                            "type": "object",
                            "nullable": true,
                            "additionalProperties": {
                              "nullable": true
                            },
                            "default": {}
                          }
                        },
                        "required": [
                          "provider",
                          "model",
                          "temperature"
                        ],
                        "additionalProperties": {
                          "nullable": true
                        }
                      },
                      "complianceConfig": {
                        "type": "object",
                        "properties": {
                          "pciDss": {
                            "type": "boolean",
                            "default": false
                          },
                          "mifidIi": {
                            "type": "boolean",
                            "default": false
                          },
                          "euAiAct": {
                            "type": "boolean",
                            "default": false
                          },
                          "soc2": {
                            "type": "boolean",
                            "default": false
                          }
                        }
                      },
                      "callTimeoutSettings": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "silenceTimeout": {
                            "type": "integer",
                            "minimum": 0,
                            "default": 0
                          },
                          "maximumDuration": {
                            "type": "integer",
                            "minimum": 0,
                            "default": 600
                          }
                        }
                      },
                      "voicemailDetection": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "enabled": {
                            "type": "boolean",
                            "default": false
                          },
                          "messageMode": {
                            "type": "string",
                            "enum": [
                              "llm",
                              "custom",
                              "none"
                            ],
                            "default": "none"
                          },
                          "staticMessage": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 2000,
                            "default": null
                          },
                          "voicemailResponseDelay": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 30,
                            "default": 2
                          }
                        }
                      },
                      "postConversationAnalysis": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "generateSummary": {
                            "type": "boolean",
                            "default": false
                          },
                          "summaryPrompt": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 10000,
                            "default": null
                          },
                          "generateStructuredData": {
                            "type": "boolean",
                            "default": false
                          },
                          "structuredDataPrompt": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 10000,
                            "default": null
                          },
                          "autoDetectProblems": {
                            "type": "boolean",
                            "default": false
                          },
                          "structuredDataSchema": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string",
                                  "minLength": 1,
                                  "pattern": "^[^\\s]+$"
                                },
                                "type": {
                                  "type": "string",
                                  "enum": [
                                    "string",
                                    "number",
                                    "rating",
                                    "checkbox",
                                    "range",
                                    "enum",
                                    "array"
                                  ],
                                  "default": "string"
                                },
                                "description": {
                                  "type": "string",
                                  "nullable": true,
                                  "maxLength": 10000,
                                  "default": null
                                },
                                "enums": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  },
                                  "default": []
                                },
                                "defaultValue": {
                                  "type": "string",
                                  "nullable": true,
                                  "maxLength": 10000,
                                  "default": null
                                },
                                "rangeMin": {
                                  "type": "number",
                                  "nullable": true,
                                  "default": null
                                },
                                "rangeMax": {
                                  "type": "number",
                                  "nullable": true,
                                  "default": null
                                }
                              },
                              "required": [
                                "name"
                              ]
                            },
                            "default": []
                          }
                        }
                      },
                      "privacyConfig": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "enableRecording": {
                            "type": "boolean",
                            "default": false
                          },
                          "getRecordingConsent": {
                            "type": "boolean",
                            "default": false
                          },
                          "recordingConsentText": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 500,
                            "default": null
                          },
                          "stopSecs": {
                            "type": "number",
                            "minimum": 0
                          },
                          "preSpeechMs": {
                            "type": "number",
                            "minimum": 0
                          },
                          "maxDurationSecs": {
                            "type": "number",
                            "minimum": 0
                          }
                        }
                      },
                      "turnAnalyzerConfig": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string",
                            "enum": [
                              "local",
                              "fal"
                            ]
                          },
                          "url": {
                            "type": "string",
                            "nullable": true,
                            "format": "uri"
                          },
                          "modelPath": {
                            "type": "string",
                            "nullable": true
                          }
                        }
                      }
                    },
                    "required": [
                      "llmConfig",
                      "ttsConfig",
                      "sstConfig",
                      "complianceConfig"
                    ]
                  },
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "fileName": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 255
                        },
                        "filePath": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 1000
                        },
                        "fileSize": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true
                        },
                        "mimeType": {
                          "type": "string",
                          "maxLength": 100
                        }
                      },
                      "required": [
                        "fileName",
                        "filePath"
                      ]
                    },
                    "default": []
                  }
                },
                "required": [
                  "workspaceId",
                  "name",
                  "config"
                ]
              },
              "example": {
                "workspaceId": "550e8400-e29b-41d4-a716-446655440000",
                "name": "Customer Support Agent",
                "source": "firebase",
                "config": {
                  "llmConfig": {
                    "provider": "openai",
                    "model": "gpt-4o",
                    "systemPrompt": "You are a helpful customer support agent...",
                    "firstMessage": "Hello! How can I help you today?",
                    "firstMessageMode": "assistant-speaks-first",
                    "maxTokens": 1000,
                    "temperature": 0.7
                  },
                  "ttsConfig": {
                    "provider": "elevenlabs",
                    "voiceId": "21m00Tcm4TlvDq8ikWAM",
                    "language": "en",
                    "speed": 1
                  },
                  "sstConfig": {
                    "provider": "deepgram",
                    "language": "en"
                  },
                  "complianceConfig": {
                    "pciDss": false,
                    "mifidIi": false,
                    "euAiAct": false,
                    "soc2": false
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Agent created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "agent": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "userId": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "source": {
                                  "type": "string",
                                  "enum": [
                                    "firebase",
                                    "vapi"
                                  ]
                                },
                                "config": {
                                  "type": "object",
                                  "properties": {
                                    "llmConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "systemPrompt": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100000
                                        },
                                        "firstMessage": {
                                          "type": "string",
                                          "maxLength": 2000
                                        },
                                        "firstMessageMode": {
                                          "type": "string",
                                          "nullable": true,
                                          "enum": [
                                            "assistant-speaks-first-with-model-generated-message",
                                            "assistant-speaks-first",
                                            "assistant-waits-for-user",
                                            null
                                          ],
                                          "default": "assistant-waits-for-user"
                                        },
                                        "disableInterruptionsDuringFirstMessage": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "maxTokens": {
                                          "type": "integer",
                                          "minimum": 1,
                                          "maximum": 4000,
                                          "default": 1000
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 2,
                                          "default": 0.7
                                        },
                                        "thinkingBudgetEnabled": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "thinkingBudget": {
                                          "type": "integer",
                                          "nullable": true,
                                          "minimum": 1000,
                                          "maximum": 100000,
                                          "default": 10000
                                        },
                                        "tools": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "function"
                                                ]
                                              },
                                              "function": {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "handler": {
                                                    "type": "string"
                                                  },
                                                  "description": {
                                                    "type": "string"
                                                  },
                                                  "parameters": {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string"
                                                      },
                                                      "properties": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "nullable": true
                                                        }
                                                      },
                                                      "required": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "items": {
                                                        "nullable": true
                                                      }
                                                    },
                                                    "required": [
                                                      "type"
                                                    ],
                                                    "additionalProperties": {
                                                      "nullable": true
                                                    }
                                                  },
                                                  "transition_to": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "handler",
                                                  "description",
                                                  "parameters"
                                                ]
                                              },
                                              "config": {
                                                "type": "object",
                                                "properties": {
                                                  "maxPerNTurns": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  },
                                                  "alwaysRunsAt": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string",
                                                      "enum": [
                                                        "each_turn",
                                                        "start_of_call",
                                                        "end_of_call"
                                                      ]
                                                    }
                                                  },
                                                  "timeoutMs": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  }
                                                }
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "function"
                                            ]
                                          },
                                          "default": []
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "systemPrompt",
                                        "firstMessage"
                                      ]
                                    },
                                    "ttsConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "voiceId": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "speed": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0.25,
                                          "maximum": 4,
                                          "default": 1
                                        },
                                        "stability": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "similarityBoost": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        },
                                        "startSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "waitSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 5,
                                              "default": 0.4
                                            }
                                          }
                                        },
                                        "stopSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "numberOfWords": {
                                              "type": "integer",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "default": 1
                                            },
                                            "voiceSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 0.5,
                                              "default": 0.4
                                            },
                                            "backOffSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 3,
                                              "default": 0.4
                                            }
                                          }
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "voiceId",
                                        "stability",
                                        "similarityBoost"
                                      ]
                                    },
                                    "sstConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "punctuate": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": true
                                        },
                                        "diarize": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "temperature"
                                      ],
                                      "additionalProperties": {
                                        "nullable": true
                                      }
                                    },
                                    "complianceConfig": {
                                      "type": "object",
                                      "properties": {
                                        "pciDss": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "mifidIi": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "euAiAct": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "soc2": {
                                          "type": "boolean",
                                          "default": false
                                        }
                                      }
                                    },
                                    "callTimeoutSettings": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "silenceTimeout": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 0
                                        },
                                        "maximumDuration": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 600
                                        }
                                      }
                                    },
                                    "voicemailDetection": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enabled": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "messageMode": {
                                          "type": "string",
                                          "enum": [
                                            "llm",
                                            "custom",
                                            "none"
                                          ],
                                          "default": "none"
                                        },
                                        "staticMessage": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 2000,
                                          "default": null
                                        },
                                        "voicemailResponseDelay": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 30,
                                          "default": 2
                                        }
                                      }
                                    },
                                    "postConversationAnalysis": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "generateSummary": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "summaryPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "generateStructuredData": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "autoDetectProblems": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataSchema": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "name": {
                                                "type": "string",
                                                "minLength": 1,
                                                "pattern": "^[^\\s]+$"
                                              },
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "string",
                                                  "number",
                                                  "rating",
                                                  "checkbox",
                                                  "range",
                                                  "enum",
                                                  "array"
                                                ],
                                                "default": "string"
                                              },
                                              "description": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "enums": {
                                                "type": "array",
                                                "items": {
                                                  "type": "string"
                                                },
                                                "default": []
                                              },
                                              "defaultValue": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "rangeMin": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              },
                                              "rangeMax": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              }
                                            },
                                            "required": [
                                              "name"
                                            ]
                                          },
                                          "default": []
                                        }
                                      }
                                    },
                                    "privacyConfig": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enableRecording": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "getRecordingConsent": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "recordingConsentText": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 500,
                                          "default": null
                                        },
                                        "stopSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "preSpeechMs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "maxDurationSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        }
                                      }
                                    },
                                    "turnAnalyzerConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "enum": [
                                            "local",
                                            "fal"
                                          ]
                                        },
                                        "url": {
                                          "type": "string",
                                          "nullable": true,
                                          "format": "uri"
                                        },
                                        "modelPath": {
                                          "type": "string",
                                          "nullable": true
                                        }
                                      }
                                    }
                                  },
                                  "required": [
                                    "llmConfig",
                                    "ttsConfig",
                                    "sstConfig",
                                    "complianceConfig"
                                  ]
                                },
                                "files": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "agentId": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "fileName": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 255
                                      },
                                      "filePath": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 1000
                                      },
                                      "fileSize": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "exclusiveMinimum": true
                                      },
                                      "mimeType": {
                                        "type": "string",
                                        "maxLength": 100
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date-time"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date-time"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "agentId",
                                      "fileName",
                                      "filePath",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  },
                                  "default": []
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date-time"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date-time"
                                }
                              },
                              "required": [
                                "id",
                                "workspaceId",
                                "userId",
                                "name",
                                "source",
                                "config",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "agent"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete agent",
        "description": "Deletes an agent and all associated versions.",
        "tags": [
          "Agents"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^\\d+$",
              "description": "Agent ID to delete"
            },
            "required": true,
            "description": "Agent ID to delete",
            "name": "agentId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Agent deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success",
                            "message"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Agent not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/agents/{agentId}": {
      "get": {
        "summary": "Get agent",
        "description": "Returns detailed agent information including configuration.",
        "tags": [
          "Agents"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^\\d+$",
              "description": "Agent ID"
            },
            "required": true,
            "description": "Agent ID",
            "name": "agentId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Agent details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "agent": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "userId": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "source": {
                                  "type": "string",
                                  "enum": [
                                    "firebase",
                                    "vapi"
                                  ]
                                },
                                "config": {
                                  "type": "object",
                                  "properties": {
                                    "llmConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "systemPrompt": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100000
                                        },
                                        "firstMessage": {
                                          "type": "string",
                                          "maxLength": 2000
                                        },
                                        "firstMessageMode": {
                                          "type": "string",
                                          "nullable": true,
                                          "enum": [
                                            "assistant-speaks-first-with-model-generated-message",
                                            "assistant-speaks-first",
                                            "assistant-waits-for-user",
                                            null
                                          ],
                                          "default": "assistant-waits-for-user"
                                        },
                                        "disableInterruptionsDuringFirstMessage": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "maxTokens": {
                                          "type": "integer",
                                          "minimum": 1,
                                          "maximum": 4000,
                                          "default": 1000
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 2,
                                          "default": 0.7
                                        },
                                        "thinkingBudgetEnabled": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "thinkingBudget": {
                                          "type": "integer",
                                          "nullable": true,
                                          "minimum": 1000,
                                          "maximum": 100000,
                                          "default": 10000
                                        },
                                        "tools": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "function"
                                                ]
                                              },
                                              "function": {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "handler": {
                                                    "type": "string"
                                                  },
                                                  "description": {
                                                    "type": "string"
                                                  },
                                                  "parameters": {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string"
                                                      },
                                                      "properties": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "nullable": true
                                                        }
                                                      },
                                                      "required": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "items": {
                                                        "nullable": true
                                                      }
                                                    },
                                                    "required": [
                                                      "type"
                                                    ],
                                                    "additionalProperties": {
                                                      "nullable": true
                                                    }
                                                  },
                                                  "transition_to": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "handler",
                                                  "description",
                                                  "parameters"
                                                ]
                                              },
                                              "config": {
                                                "type": "object",
                                                "properties": {
                                                  "maxPerNTurns": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  },
                                                  "alwaysRunsAt": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string",
                                                      "enum": [
                                                        "each_turn",
                                                        "start_of_call",
                                                        "end_of_call"
                                                      ]
                                                    }
                                                  },
                                                  "timeoutMs": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  }
                                                }
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "function"
                                            ]
                                          },
                                          "default": []
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "systemPrompt",
                                        "firstMessage"
                                      ]
                                    },
                                    "ttsConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "voiceId": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "speed": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0.25,
                                          "maximum": 4,
                                          "default": 1
                                        },
                                        "stability": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "similarityBoost": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        },
                                        "startSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "waitSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 5,
                                              "default": 0.4
                                            }
                                          }
                                        },
                                        "stopSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "numberOfWords": {
                                              "type": "integer",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "default": 1
                                            },
                                            "voiceSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 0.5,
                                              "default": 0.4
                                            },
                                            "backOffSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 3,
                                              "default": 0.4
                                            }
                                          }
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "voiceId",
                                        "stability",
                                        "similarityBoost"
                                      ]
                                    },
                                    "sstConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "punctuate": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": true
                                        },
                                        "diarize": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "temperature"
                                      ],
                                      "additionalProperties": {
                                        "nullable": true
                                      }
                                    },
                                    "complianceConfig": {
                                      "type": "object",
                                      "properties": {
                                        "pciDss": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "mifidIi": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "euAiAct": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "soc2": {
                                          "type": "boolean",
                                          "default": false
                                        }
                                      }
                                    },
                                    "callTimeoutSettings": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "silenceTimeout": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 0
                                        },
                                        "maximumDuration": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 600
                                        }
                                      }
                                    },
                                    "voicemailDetection": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enabled": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "messageMode": {
                                          "type": "string",
                                          "enum": [
                                            "llm",
                                            "custom",
                                            "none"
                                          ],
                                          "default": "none"
                                        },
                                        "staticMessage": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 2000,
                                          "default": null
                                        },
                                        "voicemailResponseDelay": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 30,
                                          "default": 2
                                        }
                                      }
                                    },
                                    "postConversationAnalysis": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "generateSummary": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "summaryPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "generateStructuredData": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "autoDetectProblems": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataSchema": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "name": {
                                                "type": "string",
                                                "minLength": 1,
                                                "pattern": "^[^\\s]+$"
                                              },
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "string",
                                                  "number",
                                                  "rating",
                                                  "checkbox",
                                                  "range",
                                                  "enum",
                                                  "array"
                                                ],
                                                "default": "string"
                                              },
                                              "description": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "enums": {
                                                "type": "array",
                                                "items": {
                                                  "type": "string"
                                                },
                                                "default": []
                                              },
                                              "defaultValue": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "rangeMin": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              },
                                              "rangeMax": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              }
                                            },
                                            "required": [
                                              "name"
                                            ]
                                          },
                                          "default": []
                                        }
                                      }
                                    },
                                    "privacyConfig": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enableRecording": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "getRecordingConsent": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "recordingConsentText": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 500,
                                          "default": null
                                        },
                                        "stopSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "preSpeechMs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "maxDurationSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        }
                                      }
                                    },
                                    "turnAnalyzerConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "enum": [
                                            "local",
                                            "fal"
                                          ]
                                        },
                                        "url": {
                                          "type": "string",
                                          "nullable": true,
                                          "format": "uri"
                                        },
                                        "modelPath": {
                                          "type": "string",
                                          "nullable": true
                                        }
                                      }
                                    }
                                  },
                                  "required": [
                                    "llmConfig",
                                    "ttsConfig",
                                    "sstConfig",
                                    "complianceConfig"
                                  ]
                                },
                                "files": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "agentId": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "fileName": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 255
                                      },
                                      "filePath": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 1000
                                      },
                                      "fileSize": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "exclusiveMinimum": true
                                      },
                                      "mimeType": {
                                        "type": "string",
                                        "maxLength": 100
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date-time"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date-time"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "agentId",
                                      "fileName",
                                      "filePath",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  },
                                  "default": []
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date-time"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date-time"
                                }
                              },
                              "required": [
                                "id",
                                "workspaceId",
                                "userId",
                                "name",
                                "source",
                                "config",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "agent"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Agent not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update agent",
        "description": "Updates an existing agent's name, configuration, or files.",
        "tags": [
          "Agents"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^\\d+$",
              "description": "Agent ID"
            },
            "required": true,
            "description": "Agent ID",
            "name": "agentId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100
                  },
                  "config": {
                    "type": "object",
                    "properties": {
                      "llmConfig": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "model": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 100
                          },
                          "systemPrompt": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 100000
                          },
                          "firstMessage": {
                            "type": "string",
                            "maxLength": 2000
                          },
                          "firstMessageMode": {
                            "type": "string",
                            "nullable": true,
                            "enum": [
                              "assistant-speaks-first-with-model-generated-message",
                              "assistant-speaks-first",
                              "assistant-waits-for-user",
                              null
                            ],
                            "default": "assistant-waits-for-user"
                          },
                          "disableInterruptionsDuringFirstMessage": {
                            "type": "boolean",
                            "default": false
                          },
                          "maxTokens": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 4000,
                            "default": 1000
                          },
                          "temperature": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 2,
                            "default": 0.7
                          },
                          "thinkingBudgetEnabled": {
                            "type": "boolean",
                            "nullable": true,
                            "default": false
                          },
                          "thinkingBudget": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 1000,
                            "maximum": 100000,
                            "default": 10000
                          },
                          "tools": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "enum": [
                                    "function"
                                  ]
                                },
                                "function": {
                                  "type": "object",
                                  "properties": {
                                    "name": {
                                      "type": "string"
                                    },
                                    "handler": {
                                      "type": "string"
                                    },
                                    "description": {
                                      "type": "string"
                                    },
                                    "parameters": {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string"
                                        },
                                        "properties": {
                                          "type": "object",
                                          "additionalProperties": {
                                            "nullable": true
                                          }
                                        },
                                        "required": {
                                          "type": "array",
                                          "items": {
                                            "type": "string"
                                          }
                                        },
                                        "items": {
                                          "nullable": true
                                        }
                                      },
                                      "required": [
                                        "type"
                                      ],
                                      "additionalProperties": {
                                        "nullable": true
                                      }
                                    },
                                    "transition_to": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "name",
                                    "handler",
                                    "description",
                                    "parameters"
                                  ]
                                },
                                "config": {
                                  "type": "object",
                                  "properties": {
                                    "maxPerNTurns": {
                                      "type": "integer",
                                      "minimum": 0,
                                      "exclusiveMinimum": true
                                    },
                                    "alwaysRunsAt": {
                                      "type": "array",
                                      "items": {
                                        "type": "string",
                                        "enum": [
                                          "each_turn",
                                          "start_of_call",
                                          "end_of_call"
                                        ]
                                      }
                                    },
                                    "timeoutMs": {
                                      "type": "integer",
                                      "minimum": 0,
                                      "exclusiveMinimum": true
                                    }
                                  }
                                }
                              },
                              "required": [
                                "type",
                                "function"
                              ]
                            },
                            "default": []
                          },
                          "additionalSettings": {
                            "type": "object",
                            "nullable": true,
                            "additionalProperties": {
                              "nullable": true
                            },
                            "default": {}
                          }
                        },
                        "required": [
                          "provider",
                          "model",
                          "systemPrompt",
                          "firstMessage"
                        ]
                      },
                      "ttsConfig": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "model": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 100
                          },
                          "voiceId": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 100
                          },
                          "language": {
                            "type": "string",
                            "nullable": true,
                            "minLength": 1,
                            "default": "multi"
                          },
                          "speed": {
                            "type": "number",
                            "nullable": true,
                            "minimum": 0.25,
                            "maximum": 4,
                            "default": 1
                          },
                          "stability": {
                            "type": "number",
                            "nullable": true,
                            "minimum": 0,
                            "maximum": 1
                          },
                          "similarityBoost": {
                            "type": "number",
                            "nullable": true,
                            "minimum": 0,
                            "maximum": 1
                          },
                          "additionalSettings": {
                            "type": "object",
                            "nullable": true,
                            "additionalProperties": {
                              "nullable": true
                            },
                            "default": {}
                          },
                          "startSpeakingPlan": {
                            "type": "object",
                            "nullable": true,
                            "properties": {
                              "waitSeconds": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 5,
                                "default": 0.4
                              }
                            }
                          },
                          "stopSpeakingPlan": {
                            "type": "object",
                            "nullable": true,
                            "properties": {
                              "numberOfWords": {
                                "type": "integer",
                                "minimum": 0,
                                "maximum": 10,
                                "default": 1
                              },
                              "voiceSeconds": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 0.5,
                                "default": 0.4
                              },
                              "backOffSeconds": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 3,
                                "default": 0.4
                              }
                            }
                          }
                        },
                        "required": [
                          "provider",
                          "model",
                          "voiceId",
                          "stability",
                          "similarityBoost"
                        ]
                      },
                      "sstConfig": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "model": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 100
                          },
                          "language": {
                            "type": "string",
                            "nullable": true,
                            "minLength": 1,
                            "default": "multi"
                          },
                          "temperature": {
                            "type": "number",
                            "nullable": true,
                            "minimum": 0,
                            "maximum": 1
                          },
                          "punctuate": {
                            "type": "boolean",
                            "nullable": true,
                            "default": true
                          },
                          "diarize": {
                            "type": "boolean",
                            "nullable": true,
                            "default": false
                          },
                          "additionalSettings": {
                            "type": "object",
                            "nullable": true,
                            "additionalProperties": {
                              "nullable": true
                            },
                            "default": {}
                          }
                        },
                        "required": [
                          "provider",
                          "model",
                          "temperature"
                        ],
                        "additionalProperties": {
                          "nullable": true
                        }
                      },
                      "complianceConfig": {
                        "type": "object",
                        "properties": {
                          "pciDss": {
                            "type": "boolean",
                            "default": false
                          },
                          "mifidIi": {
                            "type": "boolean",
                            "default": false
                          },
                          "euAiAct": {
                            "type": "boolean",
                            "default": false
                          },
                          "soc2": {
                            "type": "boolean",
                            "default": false
                          }
                        }
                      },
                      "callTimeoutSettings": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "silenceTimeout": {
                            "type": "integer",
                            "minimum": 0,
                            "default": 0
                          },
                          "maximumDuration": {
                            "type": "integer",
                            "minimum": 0,
                            "default": 600
                          }
                        }
                      },
                      "voicemailDetection": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "enabled": {
                            "type": "boolean",
                            "default": false
                          },
                          "messageMode": {
                            "type": "string",
                            "enum": [
                              "llm",
                              "custom",
                              "none"
                            ],
                            "default": "none"
                          },
                          "staticMessage": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 2000,
                            "default": null
                          },
                          "voicemailResponseDelay": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 30,
                            "default": 2
                          }
                        }
                      },
                      "postConversationAnalysis": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "generateSummary": {
                            "type": "boolean",
                            "default": false
                          },
                          "summaryPrompt": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 10000,
                            "default": null
                          },
                          "generateStructuredData": {
                            "type": "boolean",
                            "default": false
                          },
                          "structuredDataPrompt": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 10000,
                            "default": null
                          },
                          "autoDetectProblems": {
                            "type": "boolean",
                            "default": false
                          },
                          "structuredDataSchema": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string",
                                  "minLength": 1,
                                  "pattern": "^[^\\s]+$"
                                },
                                "type": {
                                  "type": "string",
                                  "enum": [
                                    "string",
                                    "number",
                                    "rating",
                                    "checkbox",
                                    "range",
                                    "enum",
                                    "array"
                                  ],
                                  "default": "string"
                                },
                                "description": {
                                  "type": "string",
                                  "nullable": true,
                                  "maxLength": 10000,
                                  "default": null
                                },
                                "enums": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  },
                                  "default": []
                                },
                                "defaultValue": {
                                  "type": "string",
                                  "nullable": true,
                                  "maxLength": 10000,
                                  "default": null
                                },
                                "rangeMin": {
                                  "type": "number",
                                  "nullable": true,
                                  "default": null
                                },
                                "rangeMax": {
                                  "type": "number",
                                  "nullable": true,
                                  "default": null
                                }
                              },
                              "required": [
                                "name"
                              ]
                            },
                            "default": []
                          }
                        }
                      },
                      "privacyConfig": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "enableRecording": {
                            "type": "boolean",
                            "default": false
                          },
                          "getRecordingConsent": {
                            "type": "boolean",
                            "default": false
                          },
                          "recordingConsentText": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 500,
                            "default": null
                          },
                          "stopSecs": {
                            "type": "number",
                            "minimum": 0
                          },
                          "preSpeechMs": {
                            "type": "number",
                            "minimum": 0
                          },
                          "maxDurationSecs": {
                            "type": "number",
                            "minimum": 0
                          }
                        }
                      },
                      "turnAnalyzerConfig": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string",
                            "enum": [
                              "local",
                              "fal"
                            ]
                          },
                          "url": {
                            "type": "string",
                            "nullable": true,
                            "format": "uri"
                          },
                          "modelPath": {
                            "type": "string",
                            "nullable": true
                          }
                        }
                      }
                    }
                  },
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "fileName": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 255
                        },
                        "filePath": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 1000
                        },
                        "fileSize": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true
                        },
                        "mimeType": {
                          "type": "string",
                          "maxLength": 100
                        }
                      },
                      "required": [
                        "fileName",
                        "filePath"
                      ]
                    }
                  }
                },
                "required": [
                  "workspaceId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Agent updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "agent": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "userId": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "source": {
                                  "type": "string",
                                  "enum": [
                                    "firebase",
                                    "vapi"
                                  ]
                                },
                                "config": {
                                  "type": "object",
                                  "properties": {
                                    "llmConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "systemPrompt": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100000
                                        },
                                        "firstMessage": {
                                          "type": "string",
                                          "maxLength": 2000
                                        },
                                        "firstMessageMode": {
                                          "type": "string",
                                          "nullable": true,
                                          "enum": [
                                            "assistant-speaks-first-with-model-generated-message",
                                            "assistant-speaks-first",
                                            "assistant-waits-for-user",
                                            null
                                          ],
                                          "default": "assistant-waits-for-user"
                                        },
                                        "disableInterruptionsDuringFirstMessage": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "maxTokens": {
                                          "type": "integer",
                                          "minimum": 1,
                                          "maximum": 4000,
                                          "default": 1000
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 2,
                                          "default": 0.7
                                        },
                                        "thinkingBudgetEnabled": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "thinkingBudget": {
                                          "type": "integer",
                                          "nullable": true,
                                          "minimum": 1000,
                                          "maximum": 100000,
                                          "default": 10000
                                        },
                                        "tools": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "function"
                                                ]
                                              },
                                              "function": {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "handler": {
                                                    "type": "string"
                                                  },
                                                  "description": {
                                                    "type": "string"
                                                  },
                                                  "parameters": {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string"
                                                      },
                                                      "properties": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "nullable": true
                                                        }
                                                      },
                                                      "required": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "items": {
                                                        "nullable": true
                                                      }
                                                    },
                                                    "required": [
                                                      "type"
                                                    ],
                                                    "additionalProperties": {
                                                      "nullable": true
                                                    }
                                                  },
                                                  "transition_to": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "handler",
                                                  "description",
                                                  "parameters"
                                                ]
                                              },
                                              "config": {
                                                "type": "object",
                                                "properties": {
                                                  "maxPerNTurns": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  },
                                                  "alwaysRunsAt": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string",
                                                      "enum": [
                                                        "each_turn",
                                                        "start_of_call",
                                                        "end_of_call"
                                                      ]
                                                    }
                                                  },
                                                  "timeoutMs": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  }
                                                }
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "function"
                                            ]
                                          },
                                          "default": []
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "systemPrompt",
                                        "firstMessage"
                                      ]
                                    },
                                    "ttsConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "voiceId": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "speed": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0.25,
                                          "maximum": 4,
                                          "default": 1
                                        },
                                        "stability": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "similarityBoost": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        },
                                        "startSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "waitSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 5,
                                              "default": 0.4
                                            }
                                          }
                                        },
                                        "stopSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "numberOfWords": {
                                              "type": "integer",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "default": 1
                                            },
                                            "voiceSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 0.5,
                                              "default": 0.4
                                            },
                                            "backOffSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 3,
                                              "default": 0.4
                                            }
                                          }
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "voiceId",
                                        "stability",
                                        "similarityBoost"
                                      ]
                                    },
                                    "sstConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "punctuate": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": true
                                        },
                                        "diarize": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "temperature"
                                      ],
                                      "additionalProperties": {
                                        "nullable": true
                                      }
                                    },
                                    "complianceConfig": {
                                      "type": "object",
                                      "properties": {
                                        "pciDss": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "mifidIi": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "euAiAct": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "soc2": {
                                          "type": "boolean",
                                          "default": false
                                        }
                                      }
                                    },
                                    "callTimeoutSettings": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "silenceTimeout": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 0
                                        },
                                        "maximumDuration": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 600
                                        }
                                      }
                                    },
                                    "voicemailDetection": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enabled": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "messageMode": {
                                          "type": "string",
                                          "enum": [
                                            "llm",
                                            "custom",
                                            "none"
                                          ],
                                          "default": "none"
                                        },
                                        "staticMessage": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 2000,
                                          "default": null
                                        },
                                        "voicemailResponseDelay": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 30,
                                          "default": 2
                                        }
                                      }
                                    },
                                    "postConversationAnalysis": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "generateSummary": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "summaryPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "generateStructuredData": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "autoDetectProblems": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataSchema": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "name": {
                                                "type": "string",
                                                "minLength": 1,
                                                "pattern": "^[^\\s]+$"
                                              },
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "string",
                                                  "number",
                                                  "rating",
                                                  "checkbox",
                                                  "range",
                                                  "enum",
                                                  "array"
                                                ],
                                                "default": "string"
                                              },
                                              "description": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "enums": {
                                                "type": "array",
                                                "items": {
                                                  "type": "string"
                                                },
                                                "default": []
                                              },
                                              "defaultValue": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "rangeMin": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              },
                                              "rangeMax": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              }
                                            },
                                            "required": [
                                              "name"
                                            ]
                                          },
                                          "default": []
                                        }
                                      }
                                    },
                                    "privacyConfig": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enableRecording": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "getRecordingConsent": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "recordingConsentText": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 500,
                                          "default": null
                                        },
                                        "stopSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "preSpeechMs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "maxDurationSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        }
                                      }
                                    },
                                    "turnAnalyzerConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "enum": [
                                            "local",
                                            "fal"
                                          ]
                                        },
                                        "url": {
                                          "type": "string",
                                          "nullable": true,
                                          "format": "uri"
                                        },
                                        "modelPath": {
                                          "type": "string",
                                          "nullable": true
                                        }
                                      }
                                    }
                                  },
                                  "required": [
                                    "llmConfig",
                                    "ttsConfig",
                                    "sstConfig",
                                    "complianceConfig"
                                  ]
                                },
                                "files": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "agentId": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "fileName": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 255
                                      },
                                      "filePath": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 1000
                                      },
                                      "fileSize": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "exclusiveMinimum": true
                                      },
                                      "mimeType": {
                                        "type": "string",
                                        "maxLength": 100
                                      },
                                      "createdAt": {
                                        "type": "string",
                                        "format": "date-time"
                                      },
                                      "updatedAt": {
                                        "type": "string",
                                        "format": "date-time"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "agentId",
                                      "fileName",
                                      "filePath",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  },
                                  "default": []
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date-time"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date-time"
                                }
                              },
                              "required": [
                                "id",
                                "workspaceId",
                                "userId",
                                "name",
                                "source",
                                "config",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "agent"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Agent not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/agents/{agentId}/versions": {
      "get": {
        "summary": "List agent versions",
        "description": "Returns version history for an agent with pagination.",
        "tags": [
          "Agent Versions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^\\d+$",
              "description": "Agent ID"
            },
            "required": true,
            "description": "Agent ID",
            "name": "agentId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "maximum": 100,
              "default": 50,
              "description": "Maximum number of versions to return (1-100)"
            },
            "required": false,
            "description": "Maximum number of versions to return (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "description": "Number of versions to skip for pagination"
            },
            "required": false,
            "description": "Number of versions to skip for pagination",
            "name": "offset",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Agent versions with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "versions": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "agentId": {
                                    "type": "string",
                                    "minLength": 1
                                  },
                                  "workspaceId": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "versionNumber": {
                                    "type": "integer",
                                    "minimum": 0,
                                    "exclusiveMinimum": true
                                  },
                                  "versionType": {
                                    "type": "string",
                                    "enum": [
                                      "edit",
                                      "rollback"
                                    ],
                                    "default": "edit"
                                  },
                                  "parentVersionId": {
                                    "type": "string",
                                    "nullable": true,
                                    "format": "uuid"
                                  },
                                  "isActive": {
                                    "type": "boolean"
                                  },
                                  "createdBy": {
                                    "type": "string",
                                    "nullable": true,
                                    "format": "uuid"
                                  },
                                  "createdAt": {
                                    "type": "string",
                                    "format": "date-time"
                                  },
                                  "configDiffSummary": {
                                    "type": "array",
                                    "nullable": true,
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "section": {
                                          "type": "string"
                                        },
                                        "count": {
                                          "type": "integer",
                                          "minimum": 1
                                        }
                                      },
                                      "required": [
                                        "section",
                                        "count"
                                      ]
                                    }
                                  }
                                },
                                "required": [
                                  "id",
                                  "agentId",
                                  "workspaceId",
                                  "versionNumber",
                                  "parentVersionId",
                                  "isActive",
                                  "createdBy",
                                  "createdAt",
                                  "configDiffSummary"
                                ]
                              }
                            },
                            "total": {
                              "type": "integer",
                              "minimum": 0
                            },
                            "limit": {
                              "type": "integer",
                              "minimum": 0,
                              "exclusiveMinimum": true
                            },
                            "offset": {
                              "type": "integer",
                              "minimum": 0
                            }
                          },
                          "required": [
                            "versions",
                            "total",
                            "limit",
                            "offset"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Agent not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create agent version",
        "description": "Creates a new version of an agent with the provided configuration snapshot.",
        "tags": [
          "Agent Versions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^\\d+$"
            },
            "required": true,
            "name": "agentId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "config": {
                    "type": "object",
                    "properties": {
                      "llmConfig": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "model": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 100
                          },
                          "systemPrompt": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 100000
                          },
                          "firstMessage": {
                            "type": "string",
                            "maxLength": 2000
                          },
                          "firstMessageMode": {
                            "type": "string",
                            "nullable": true,
                            "enum": [
                              "assistant-speaks-first-with-model-generated-message",
                              "assistant-speaks-first",
                              "assistant-waits-for-user",
                              null
                            ],
                            "default": "assistant-waits-for-user"
                          },
                          "disableInterruptionsDuringFirstMessage": {
                            "type": "boolean",
                            "default": false
                          },
                          "maxTokens": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 4000,
                            "default": 1000
                          },
                          "temperature": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 2,
                            "default": 0.7
                          },
                          "thinkingBudgetEnabled": {
                            "type": "boolean",
                            "nullable": true,
                            "default": false
                          },
                          "thinkingBudget": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 1000,
                            "maximum": 100000,
                            "default": 10000
                          },
                          "tools": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "enum": [
                                    "function"
                                  ]
                                },
                                "function": {
                                  "type": "object",
                                  "properties": {
                                    "name": {
                                      "type": "string"
                                    },
                                    "handler": {
                                      "type": "string"
                                    },
                                    "description": {
                                      "type": "string"
                                    },
                                    "parameters": {
                                      "type": "object",
                                      "properties": {
                                        "type": {
                                          "type": "string"
                                        },
                                        "properties": {
                                          "type": "object",
                                          "additionalProperties": {
                                            "nullable": true
                                          }
                                        },
                                        "required": {
                                          "type": "array",
                                          "items": {
                                            "type": "string"
                                          }
                                        },
                                        "items": {
                                          "nullable": true
                                        }
                                      },
                                      "required": [
                                        "type"
                                      ],
                                      "additionalProperties": {
                                        "nullable": true
                                      }
                                    },
                                    "transition_to": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "name",
                                    "handler",
                                    "description",
                                    "parameters"
                                  ]
                                },
                                "config": {
                                  "type": "object",
                                  "properties": {
                                    "maxPerNTurns": {
                                      "type": "integer",
                                      "minimum": 0,
                                      "exclusiveMinimum": true
                                    },
                                    "alwaysRunsAt": {
                                      "type": "array",
                                      "items": {
                                        "type": "string",
                                        "enum": [
                                          "each_turn",
                                          "start_of_call",
                                          "end_of_call"
                                        ]
                                      }
                                    },
                                    "timeoutMs": {
                                      "type": "integer",
                                      "minimum": 0,
                                      "exclusiveMinimum": true
                                    }
                                  }
                                }
                              },
                              "required": [
                                "type",
                                "function"
                              ]
                            },
                            "default": []
                          },
                          "additionalSettings": {
                            "type": "object",
                            "nullable": true,
                            "additionalProperties": {
                              "nullable": true
                            },
                            "default": {}
                          }
                        },
                        "required": [
                          "provider",
                          "model",
                          "systemPrompt",
                          "firstMessage"
                        ]
                      },
                      "ttsConfig": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "model": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 100
                          },
                          "voiceId": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 100
                          },
                          "language": {
                            "type": "string",
                            "nullable": true,
                            "minLength": 1,
                            "default": "multi"
                          },
                          "speed": {
                            "type": "number",
                            "nullable": true,
                            "minimum": 0.25,
                            "maximum": 4,
                            "default": 1
                          },
                          "stability": {
                            "type": "number",
                            "nullable": true,
                            "minimum": 0,
                            "maximum": 1
                          },
                          "similarityBoost": {
                            "type": "number",
                            "nullable": true,
                            "minimum": 0,
                            "maximum": 1
                          },
                          "additionalSettings": {
                            "type": "object",
                            "nullable": true,
                            "additionalProperties": {
                              "nullable": true
                            },
                            "default": {}
                          },
                          "startSpeakingPlan": {
                            "type": "object",
                            "nullable": true,
                            "properties": {
                              "waitSeconds": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 5,
                                "default": 0.4
                              }
                            }
                          },
                          "stopSpeakingPlan": {
                            "type": "object",
                            "nullable": true,
                            "properties": {
                              "numberOfWords": {
                                "type": "integer",
                                "minimum": 0,
                                "maximum": 10,
                                "default": 1
                              },
                              "voiceSeconds": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 0.5,
                                "default": 0.4
                              },
                              "backOffSeconds": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 3,
                                "default": 0.4
                              }
                            }
                          }
                        },
                        "required": [
                          "provider",
                          "model",
                          "voiceId",
                          "stability",
                          "similarityBoost"
                        ]
                      },
                      "sstConfig": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50
                          },
                          "model": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 100
                          },
                          "language": {
                            "type": "string",
                            "nullable": true,
                            "minLength": 1,
                            "default": "multi"
                          },
                          "temperature": {
                            "type": "number",
                            "nullable": true,
                            "minimum": 0,
                            "maximum": 1
                          },
                          "punctuate": {
                            "type": "boolean",
                            "nullable": true,
                            "default": true
                          },
                          "diarize": {
                            "type": "boolean",
                            "nullable": true,
                            "default": false
                          },
                          "additionalSettings": {
                            "type": "object",
                            "nullable": true,
                            "additionalProperties": {
                              "nullable": true
                            },
                            "default": {}
                          }
                        },
                        "required": [
                          "provider",
                          "model",
                          "temperature"
                        ],
                        "additionalProperties": {
                          "nullable": true
                        }
                      },
                      "complianceConfig": {
                        "type": "object",
                        "properties": {
                          "pciDss": {
                            "type": "boolean",
                            "default": false
                          },
                          "mifidIi": {
                            "type": "boolean",
                            "default": false
                          },
                          "euAiAct": {
                            "type": "boolean",
                            "default": false
                          },
                          "soc2": {
                            "type": "boolean",
                            "default": false
                          }
                        }
                      },
                      "callTimeoutSettings": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "silenceTimeout": {
                            "type": "integer",
                            "minimum": 0,
                            "default": 0
                          },
                          "maximumDuration": {
                            "type": "integer",
                            "minimum": 0,
                            "default": 600
                          }
                        }
                      },
                      "voicemailDetection": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "enabled": {
                            "type": "boolean",
                            "default": false
                          },
                          "messageMode": {
                            "type": "string",
                            "enum": [
                              "llm",
                              "custom",
                              "none"
                            ],
                            "default": "none"
                          },
                          "staticMessage": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 2000,
                            "default": null
                          },
                          "voicemailResponseDelay": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 30,
                            "default": 2
                          }
                        }
                      },
                      "postConversationAnalysis": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "generateSummary": {
                            "type": "boolean",
                            "default": false
                          },
                          "summaryPrompt": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 10000,
                            "default": null
                          },
                          "generateStructuredData": {
                            "type": "boolean",
                            "default": false
                          },
                          "structuredDataPrompt": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 10000,
                            "default": null
                          },
                          "autoDetectProblems": {
                            "type": "boolean",
                            "default": false
                          },
                          "structuredDataSchema": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "name": {
                                  "type": "string",
                                  "minLength": 1,
                                  "pattern": "^[^\\s]+$"
                                },
                                "type": {
                                  "type": "string",
                                  "enum": [
                                    "string",
                                    "number",
                                    "rating",
                                    "checkbox",
                                    "range",
                                    "enum",
                                    "array"
                                  ],
                                  "default": "string"
                                },
                                "description": {
                                  "type": "string",
                                  "nullable": true,
                                  "maxLength": 10000,
                                  "default": null
                                },
                                "enums": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  },
                                  "default": []
                                },
                                "defaultValue": {
                                  "type": "string",
                                  "nullable": true,
                                  "maxLength": 10000,
                                  "default": null
                                },
                                "rangeMin": {
                                  "type": "number",
                                  "nullable": true,
                                  "default": null
                                },
                                "rangeMax": {
                                  "type": "number",
                                  "nullable": true,
                                  "default": null
                                }
                              },
                              "required": [
                                "name"
                              ]
                            },
                            "default": []
                          }
                        }
                      },
                      "privacyConfig": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "enableRecording": {
                            "type": "boolean",
                            "default": false
                          },
                          "getRecordingConsent": {
                            "type": "boolean",
                            "default": false
                          },
                          "recordingConsentText": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 500,
                            "default": null
                          },
                          "stopSecs": {
                            "type": "number",
                            "minimum": 0
                          },
                          "preSpeechMs": {
                            "type": "number",
                            "minimum": 0
                          },
                          "maxDurationSecs": {
                            "type": "number",
                            "minimum": 0
                          }
                        }
                      },
                      "turnAnalyzerConfig": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string",
                            "enum": [
                              "local",
                              "fal"
                            ]
                          },
                          "url": {
                            "type": "string",
                            "nullable": true,
                            "format": "uri"
                          },
                          "modelPath": {
                            "type": "string",
                            "nullable": true
                          }
                        }
                      }
                    },
                    "required": [
                      "llmConfig",
                      "ttsConfig",
                      "sstConfig",
                      "complianceConfig"
                    ]
                  },
                  "parentVersionId": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "workspaceId",
                  "config"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Version created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "version": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "agentId": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "versionNumber": {
                                  "type": "integer",
                                  "minimum": 0,
                                  "exclusiveMinimum": true
                                },
                                "versionType": {
                                  "type": "string",
                                  "enum": [
                                    "edit",
                                    "rollback"
                                  ],
                                  "default": "edit"
                                },
                                "parentVersionId": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "isActive": {
                                  "type": "boolean"
                                },
                                "configSnapshot": {
                                  "type": "object",
                                  "properties": {
                                    "llmConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "systemPrompt": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100000
                                        },
                                        "firstMessage": {
                                          "type": "string",
                                          "maxLength": 2000
                                        },
                                        "firstMessageMode": {
                                          "type": "string",
                                          "nullable": true,
                                          "enum": [
                                            "assistant-speaks-first-with-model-generated-message",
                                            "assistant-speaks-first",
                                            "assistant-waits-for-user",
                                            null
                                          ],
                                          "default": "assistant-waits-for-user"
                                        },
                                        "disableInterruptionsDuringFirstMessage": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "maxTokens": {
                                          "type": "integer",
                                          "minimum": 1,
                                          "maximum": 4000,
                                          "default": 1000
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 2,
                                          "default": 0.7
                                        },
                                        "thinkingBudgetEnabled": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "thinkingBudget": {
                                          "type": "integer",
                                          "nullable": true,
                                          "minimum": 1000,
                                          "maximum": 100000,
                                          "default": 10000
                                        },
                                        "tools": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "function"
                                                ]
                                              },
                                              "function": {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "handler": {
                                                    "type": "string"
                                                  },
                                                  "description": {
                                                    "type": "string"
                                                  },
                                                  "parameters": {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string"
                                                      },
                                                      "properties": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "nullable": true
                                                        }
                                                      },
                                                      "required": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "items": {
                                                        "nullable": true
                                                      }
                                                    },
                                                    "required": [
                                                      "type"
                                                    ],
                                                    "additionalProperties": {
                                                      "nullable": true
                                                    }
                                                  },
                                                  "transition_to": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "handler",
                                                  "description",
                                                  "parameters"
                                                ]
                                              },
                                              "config": {
                                                "type": "object",
                                                "properties": {
                                                  "maxPerNTurns": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  },
                                                  "alwaysRunsAt": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string",
                                                      "enum": [
                                                        "each_turn",
                                                        "start_of_call",
                                                        "end_of_call"
                                                      ]
                                                    }
                                                  },
                                                  "timeoutMs": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  }
                                                }
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "function"
                                            ]
                                          },
                                          "default": []
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "systemPrompt",
                                        "firstMessage"
                                      ]
                                    },
                                    "ttsConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "voiceId": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "speed": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0.25,
                                          "maximum": 4,
                                          "default": 1
                                        },
                                        "stability": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "similarityBoost": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        },
                                        "startSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "waitSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 5,
                                              "default": 0.4
                                            }
                                          }
                                        },
                                        "stopSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "numberOfWords": {
                                              "type": "integer",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "default": 1
                                            },
                                            "voiceSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 0.5,
                                              "default": 0.4
                                            },
                                            "backOffSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 3,
                                              "default": 0.4
                                            }
                                          }
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "voiceId",
                                        "stability",
                                        "similarityBoost"
                                      ]
                                    },
                                    "sstConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "punctuate": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": true
                                        },
                                        "diarize": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "temperature"
                                      ],
                                      "additionalProperties": {
                                        "nullable": true
                                      }
                                    },
                                    "complianceConfig": {
                                      "type": "object",
                                      "properties": {
                                        "pciDss": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "mifidIi": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "euAiAct": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "soc2": {
                                          "type": "boolean",
                                          "default": false
                                        }
                                      }
                                    },
                                    "callTimeoutSettings": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "silenceTimeout": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 0
                                        },
                                        "maximumDuration": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 600
                                        }
                                      }
                                    },
                                    "voicemailDetection": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enabled": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "messageMode": {
                                          "type": "string",
                                          "enum": [
                                            "llm",
                                            "custom",
                                            "none"
                                          ],
                                          "default": "none"
                                        },
                                        "staticMessage": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 2000,
                                          "default": null
                                        },
                                        "voicemailResponseDelay": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 30,
                                          "default": 2
                                        }
                                      }
                                    },
                                    "postConversationAnalysis": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "generateSummary": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "summaryPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "generateStructuredData": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "autoDetectProblems": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataSchema": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "name": {
                                                "type": "string",
                                                "minLength": 1,
                                                "pattern": "^[^\\s]+$"
                                              },
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "string",
                                                  "number",
                                                  "rating",
                                                  "checkbox",
                                                  "range",
                                                  "enum",
                                                  "array"
                                                ],
                                                "default": "string"
                                              },
                                              "description": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "enums": {
                                                "type": "array",
                                                "items": {
                                                  "type": "string"
                                                },
                                                "default": []
                                              },
                                              "defaultValue": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "rangeMin": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              },
                                              "rangeMax": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              }
                                            },
                                            "required": [
                                              "name"
                                            ]
                                          },
                                          "default": []
                                        }
                                      }
                                    },
                                    "privacyConfig": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enableRecording": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "getRecordingConsent": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "recordingConsentText": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 500,
                                          "default": null
                                        },
                                        "stopSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "preSpeechMs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "maxDurationSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        }
                                      }
                                    },
                                    "turnAnalyzerConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "enum": [
                                            "local",
                                            "fal"
                                          ]
                                        },
                                        "url": {
                                          "type": "string",
                                          "nullable": true,
                                          "format": "uri"
                                        },
                                        "modelPath": {
                                          "type": "string",
                                          "nullable": true
                                        }
                                      }
                                    }
                                  },
                                  "required": [
                                    "llmConfig",
                                    "ttsConfig",
                                    "sstConfig",
                                    "complianceConfig"
                                  ]
                                },
                                "configDiff": {
                                  "type": "object",
                                  "nullable": true,
                                  "additionalProperties": {
                                    "nullable": true
                                  }
                                },
                                "createdBy": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date-time"
                                }
                              },
                              "required": [
                                "id",
                                "agentId",
                                "workspaceId",
                                "versionNumber",
                                "parentVersionId",
                                "isActive",
                                "configSnapshot",
                                "configDiff",
                                "createdBy",
                                "createdAt"
                              ]
                            }
                          },
                          "required": [
                            "version"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Agent not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/agents/{agentId}/versions/{versionId}": {
      "get": {
        "summary": "Get agent version",
        "description": "Returns a specific agent version including full config snapshot.",
        "tags": [
          "Agent Versions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^\\d+$",
              "description": "Agent ID"
            },
            "required": true,
            "description": "Agent ID",
            "name": "agentId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Version ID"
            },
            "required": true,
            "description": "Version ID",
            "name": "versionId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Agent version details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "version": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "agentId": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "versionNumber": {
                                  "type": "integer",
                                  "minimum": 0,
                                  "exclusiveMinimum": true
                                },
                                "versionType": {
                                  "type": "string",
                                  "enum": [
                                    "edit",
                                    "rollback"
                                  ],
                                  "default": "edit"
                                },
                                "parentVersionId": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "isActive": {
                                  "type": "boolean"
                                },
                                "configSnapshot": {
                                  "type": "object",
                                  "properties": {
                                    "llmConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "systemPrompt": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100000
                                        },
                                        "firstMessage": {
                                          "type": "string",
                                          "maxLength": 2000
                                        },
                                        "firstMessageMode": {
                                          "type": "string",
                                          "nullable": true,
                                          "enum": [
                                            "assistant-speaks-first-with-model-generated-message",
                                            "assistant-speaks-first",
                                            "assistant-waits-for-user",
                                            null
                                          ],
                                          "default": "assistant-waits-for-user"
                                        },
                                        "disableInterruptionsDuringFirstMessage": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "maxTokens": {
                                          "type": "integer",
                                          "minimum": 1,
                                          "maximum": 4000,
                                          "default": 1000
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 2,
                                          "default": 0.7
                                        },
                                        "thinkingBudgetEnabled": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "thinkingBudget": {
                                          "type": "integer",
                                          "nullable": true,
                                          "minimum": 1000,
                                          "maximum": 100000,
                                          "default": 10000
                                        },
                                        "tools": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "function"
                                                ]
                                              },
                                              "function": {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "handler": {
                                                    "type": "string"
                                                  },
                                                  "description": {
                                                    "type": "string"
                                                  },
                                                  "parameters": {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string"
                                                      },
                                                      "properties": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "nullable": true
                                                        }
                                                      },
                                                      "required": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "items": {
                                                        "nullable": true
                                                      }
                                                    },
                                                    "required": [
                                                      "type"
                                                    ],
                                                    "additionalProperties": {
                                                      "nullable": true
                                                    }
                                                  },
                                                  "transition_to": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "handler",
                                                  "description",
                                                  "parameters"
                                                ]
                                              },
                                              "config": {
                                                "type": "object",
                                                "properties": {
                                                  "maxPerNTurns": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  },
                                                  "alwaysRunsAt": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string",
                                                      "enum": [
                                                        "each_turn",
                                                        "start_of_call",
                                                        "end_of_call"
                                                      ]
                                                    }
                                                  },
                                                  "timeoutMs": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  }
                                                }
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "function"
                                            ]
                                          },
                                          "default": []
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "systemPrompt",
                                        "firstMessage"
                                      ]
                                    },
                                    "ttsConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "voiceId": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "speed": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0.25,
                                          "maximum": 4,
                                          "default": 1
                                        },
                                        "stability": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "similarityBoost": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        },
                                        "startSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "waitSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 5,
                                              "default": 0.4
                                            }
                                          }
                                        },
                                        "stopSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "numberOfWords": {
                                              "type": "integer",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "default": 1
                                            },
                                            "voiceSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 0.5,
                                              "default": 0.4
                                            },
                                            "backOffSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 3,
                                              "default": 0.4
                                            }
                                          }
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "voiceId",
                                        "stability",
                                        "similarityBoost"
                                      ]
                                    },
                                    "sstConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "punctuate": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": true
                                        },
                                        "diarize": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "temperature"
                                      ],
                                      "additionalProperties": {
                                        "nullable": true
                                      }
                                    },
                                    "complianceConfig": {
                                      "type": "object",
                                      "properties": {
                                        "pciDss": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "mifidIi": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "euAiAct": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "soc2": {
                                          "type": "boolean",
                                          "default": false
                                        }
                                      }
                                    },
                                    "callTimeoutSettings": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "silenceTimeout": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 0
                                        },
                                        "maximumDuration": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 600
                                        }
                                      }
                                    },
                                    "voicemailDetection": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enabled": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "messageMode": {
                                          "type": "string",
                                          "enum": [
                                            "llm",
                                            "custom",
                                            "none"
                                          ],
                                          "default": "none"
                                        },
                                        "staticMessage": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 2000,
                                          "default": null
                                        },
                                        "voicemailResponseDelay": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 30,
                                          "default": 2
                                        }
                                      }
                                    },
                                    "postConversationAnalysis": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "generateSummary": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "summaryPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "generateStructuredData": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "autoDetectProblems": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataSchema": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "name": {
                                                "type": "string",
                                                "minLength": 1,
                                                "pattern": "^[^\\s]+$"
                                              },
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "string",
                                                  "number",
                                                  "rating",
                                                  "checkbox",
                                                  "range",
                                                  "enum",
                                                  "array"
                                                ],
                                                "default": "string"
                                              },
                                              "description": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "enums": {
                                                "type": "array",
                                                "items": {
                                                  "type": "string"
                                                },
                                                "default": []
                                              },
                                              "defaultValue": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "rangeMin": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              },
                                              "rangeMax": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              }
                                            },
                                            "required": [
                                              "name"
                                            ]
                                          },
                                          "default": []
                                        }
                                      }
                                    },
                                    "privacyConfig": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enableRecording": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "getRecordingConsent": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "recordingConsentText": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 500,
                                          "default": null
                                        },
                                        "stopSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "preSpeechMs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "maxDurationSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        }
                                      }
                                    },
                                    "turnAnalyzerConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "enum": [
                                            "local",
                                            "fal"
                                          ]
                                        },
                                        "url": {
                                          "type": "string",
                                          "nullable": true,
                                          "format": "uri"
                                        },
                                        "modelPath": {
                                          "type": "string",
                                          "nullable": true
                                        }
                                      }
                                    }
                                  },
                                  "required": [
                                    "llmConfig",
                                    "ttsConfig",
                                    "sstConfig",
                                    "complianceConfig"
                                  ]
                                },
                                "configDiff": {
                                  "type": "object",
                                  "nullable": true,
                                  "additionalProperties": {
                                    "nullable": true
                                  }
                                },
                                "createdBy": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date-time"
                                }
                              },
                              "required": [
                                "id",
                                "agentId",
                                "workspaceId",
                                "versionNumber",
                                "parentVersionId",
                                "isActive",
                                "configSnapshot",
                                "configDiff",
                                "createdBy",
                                "createdAt"
                              ]
                            }
                          },
                          "required": [
                            "version"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Agent or version not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Activate agent version",
        "description": "Sets the specified version as the active version for the agent.",
        "tags": [
          "Agent Versions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^\\d+$",
              "description": "Agent ID"
            },
            "required": true,
            "description": "Agent ID",
            "name": "agentId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Version ID to activate"
            },
            "required": true,
            "description": "Version ID to activate",
            "name": "versionId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Version activated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "version": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "agentId": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "versionNumber": {
                                  "type": "integer",
                                  "minimum": 0,
                                  "exclusiveMinimum": true
                                },
                                "versionType": {
                                  "type": "string",
                                  "enum": [
                                    "edit",
                                    "rollback"
                                  ],
                                  "default": "edit"
                                },
                                "parentVersionId": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "isActive": {
                                  "type": "boolean"
                                },
                                "configSnapshot": {
                                  "type": "object",
                                  "properties": {
                                    "llmConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "systemPrompt": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100000
                                        },
                                        "firstMessage": {
                                          "type": "string",
                                          "maxLength": 2000
                                        },
                                        "firstMessageMode": {
                                          "type": "string",
                                          "nullable": true,
                                          "enum": [
                                            "assistant-speaks-first-with-model-generated-message",
                                            "assistant-speaks-first",
                                            "assistant-waits-for-user",
                                            null
                                          ],
                                          "default": "assistant-waits-for-user"
                                        },
                                        "disableInterruptionsDuringFirstMessage": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "maxTokens": {
                                          "type": "integer",
                                          "minimum": 1,
                                          "maximum": 4000,
                                          "default": 1000
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 2,
                                          "default": 0.7
                                        },
                                        "thinkingBudgetEnabled": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "thinkingBudget": {
                                          "type": "integer",
                                          "nullable": true,
                                          "minimum": 1000,
                                          "maximum": 100000,
                                          "default": 10000
                                        },
                                        "tools": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "function"
                                                ]
                                              },
                                              "function": {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "handler": {
                                                    "type": "string"
                                                  },
                                                  "description": {
                                                    "type": "string"
                                                  },
                                                  "parameters": {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string"
                                                      },
                                                      "properties": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "nullable": true
                                                        }
                                                      },
                                                      "required": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "items": {
                                                        "nullable": true
                                                      }
                                                    },
                                                    "required": [
                                                      "type"
                                                    ],
                                                    "additionalProperties": {
                                                      "nullable": true
                                                    }
                                                  },
                                                  "transition_to": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "handler",
                                                  "description",
                                                  "parameters"
                                                ]
                                              },
                                              "config": {
                                                "type": "object",
                                                "properties": {
                                                  "maxPerNTurns": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  },
                                                  "alwaysRunsAt": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string",
                                                      "enum": [
                                                        "each_turn",
                                                        "start_of_call",
                                                        "end_of_call"
                                                      ]
                                                    }
                                                  },
                                                  "timeoutMs": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  }
                                                }
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "function"
                                            ]
                                          },
                                          "default": []
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "systemPrompt",
                                        "firstMessage"
                                      ]
                                    },
                                    "ttsConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "voiceId": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "speed": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0.25,
                                          "maximum": 4,
                                          "default": 1
                                        },
                                        "stability": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "similarityBoost": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        },
                                        "startSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "waitSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 5,
                                              "default": 0.4
                                            }
                                          }
                                        },
                                        "stopSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "numberOfWords": {
                                              "type": "integer",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "default": 1
                                            },
                                            "voiceSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 0.5,
                                              "default": 0.4
                                            },
                                            "backOffSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 3,
                                              "default": 0.4
                                            }
                                          }
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "voiceId",
                                        "stability",
                                        "similarityBoost"
                                      ]
                                    },
                                    "sstConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "punctuate": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": true
                                        },
                                        "diarize": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "temperature"
                                      ],
                                      "additionalProperties": {
                                        "nullable": true
                                      }
                                    },
                                    "complianceConfig": {
                                      "type": "object",
                                      "properties": {
                                        "pciDss": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "mifidIi": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "euAiAct": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "soc2": {
                                          "type": "boolean",
                                          "default": false
                                        }
                                      }
                                    },
                                    "callTimeoutSettings": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "silenceTimeout": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 0
                                        },
                                        "maximumDuration": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 600
                                        }
                                      }
                                    },
                                    "voicemailDetection": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enabled": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "messageMode": {
                                          "type": "string",
                                          "enum": [
                                            "llm",
                                            "custom",
                                            "none"
                                          ],
                                          "default": "none"
                                        },
                                        "staticMessage": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 2000,
                                          "default": null
                                        },
                                        "voicemailResponseDelay": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 30,
                                          "default": 2
                                        }
                                      }
                                    },
                                    "postConversationAnalysis": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "generateSummary": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "summaryPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "generateStructuredData": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "autoDetectProblems": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataSchema": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "name": {
                                                "type": "string",
                                                "minLength": 1,
                                                "pattern": "^[^\\s]+$"
                                              },
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "string",
                                                  "number",
                                                  "rating",
                                                  "checkbox",
                                                  "range",
                                                  "enum",
                                                  "array"
                                                ],
                                                "default": "string"
                                              },
                                              "description": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "enums": {
                                                "type": "array",
                                                "items": {
                                                  "type": "string"
                                                },
                                                "default": []
                                              },
                                              "defaultValue": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "rangeMin": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              },
                                              "rangeMax": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              }
                                            },
                                            "required": [
                                              "name"
                                            ]
                                          },
                                          "default": []
                                        }
                                      }
                                    },
                                    "privacyConfig": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enableRecording": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "getRecordingConsent": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "recordingConsentText": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 500,
                                          "default": null
                                        },
                                        "stopSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "preSpeechMs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "maxDurationSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        }
                                      }
                                    },
                                    "turnAnalyzerConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "enum": [
                                            "local",
                                            "fal"
                                          ]
                                        },
                                        "url": {
                                          "type": "string",
                                          "nullable": true,
                                          "format": "uri"
                                        },
                                        "modelPath": {
                                          "type": "string",
                                          "nullable": true
                                        }
                                      }
                                    }
                                  },
                                  "required": [
                                    "llmConfig",
                                    "ttsConfig",
                                    "sstConfig",
                                    "complianceConfig"
                                  ]
                                },
                                "configDiff": {
                                  "type": "object",
                                  "nullable": true,
                                  "additionalProperties": {
                                    "nullable": true
                                  }
                                },
                                "createdBy": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date-time"
                                }
                              },
                              "required": [
                                "id",
                                "agentId",
                                "workspaceId",
                                "versionNumber",
                                "parentVersionId",
                                "isActive",
                                "configSnapshot",
                                "configDiff",
                                "createdBy",
                                "createdAt"
                              ]
                            }
                          },
                          "required": [
                            "version"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Agent or version not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/agents/{agentId}/versions/rollback": {
      "post": {
        "summary": "Rollback agent version",
        "description": "Rolls back the agent to a previous version, creating a new version entry with type 'rollback'.",
        "tags": [
          "Agent Versions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^\\d+$",
              "description": "Agent ID"
            },
            "required": true,
            "description": "Agent ID",
            "name": "agentId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "versionId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Version ID to rollback to"
                  },
                  "reason": {
                    "type": "string",
                    "maxLength": 5000,
                    "description": "Reason for rollback"
                  }
                },
                "required": [
                  "workspaceId",
                  "versionId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rollback successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "version": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "agentId": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "versionNumber": {
                                  "type": "integer",
                                  "minimum": 0,
                                  "exclusiveMinimum": true
                                },
                                "versionType": {
                                  "type": "string",
                                  "enum": [
                                    "edit",
                                    "rollback"
                                  ],
                                  "default": "edit"
                                },
                                "parentVersionId": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "isActive": {
                                  "type": "boolean"
                                },
                                "configSnapshot": {
                                  "type": "object",
                                  "properties": {
                                    "llmConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "systemPrompt": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100000
                                        },
                                        "firstMessage": {
                                          "type": "string",
                                          "maxLength": 2000
                                        },
                                        "firstMessageMode": {
                                          "type": "string",
                                          "nullable": true,
                                          "enum": [
                                            "assistant-speaks-first-with-model-generated-message",
                                            "assistant-speaks-first",
                                            "assistant-waits-for-user",
                                            null
                                          ],
                                          "default": "assistant-waits-for-user"
                                        },
                                        "disableInterruptionsDuringFirstMessage": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "maxTokens": {
                                          "type": "integer",
                                          "minimum": 1,
                                          "maximum": 4000,
                                          "default": 1000
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 2,
                                          "default": 0.7
                                        },
                                        "thinkingBudgetEnabled": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "thinkingBudget": {
                                          "type": "integer",
                                          "nullable": true,
                                          "minimum": 1000,
                                          "maximum": 100000,
                                          "default": 10000
                                        },
                                        "tools": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "function"
                                                ]
                                              },
                                              "function": {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "handler": {
                                                    "type": "string"
                                                  },
                                                  "description": {
                                                    "type": "string"
                                                  },
                                                  "parameters": {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string"
                                                      },
                                                      "properties": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "nullable": true
                                                        }
                                                      },
                                                      "required": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "items": {
                                                        "nullable": true
                                                      }
                                                    },
                                                    "required": [
                                                      "type"
                                                    ],
                                                    "additionalProperties": {
                                                      "nullable": true
                                                    }
                                                  },
                                                  "transition_to": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "handler",
                                                  "description",
                                                  "parameters"
                                                ]
                                              },
                                              "config": {
                                                "type": "object",
                                                "properties": {
                                                  "maxPerNTurns": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  },
                                                  "alwaysRunsAt": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string",
                                                      "enum": [
                                                        "each_turn",
                                                        "start_of_call",
                                                        "end_of_call"
                                                      ]
                                                    }
                                                  },
                                                  "timeoutMs": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  }
                                                }
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "function"
                                            ]
                                          },
                                          "default": []
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "systemPrompt",
                                        "firstMessage"
                                      ]
                                    },
                                    "ttsConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "voiceId": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "speed": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0.25,
                                          "maximum": 4,
                                          "default": 1
                                        },
                                        "stability": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "similarityBoost": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        },
                                        "startSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "waitSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 5,
                                              "default": 0.4
                                            }
                                          }
                                        },
                                        "stopSpeakingPlan": {
                                          "type": "object",
                                          "nullable": true,
                                          "properties": {
                                            "numberOfWords": {
                                              "type": "integer",
                                              "minimum": 0,
                                              "maximum": 10,
                                              "default": 1
                                            },
                                            "voiceSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 0.5,
                                              "default": 0.4
                                            },
                                            "backOffSeconds": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 3,
                                              "default": 0.4
                                            }
                                          }
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "voiceId",
                                        "stability",
                                        "similarityBoost"
                                      ]
                                    },
                                    "sstConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "minLength": 1,
                                          "maxLength": 50
                                        },
                                        "model": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 100
                                        },
                                        "language": {
                                          "type": "string",
                                          "nullable": true,
                                          "minLength": 1,
                                          "default": "multi"
                                        },
                                        "temperature": {
                                          "type": "number",
                                          "nullable": true,
                                          "minimum": 0,
                                          "maximum": 1
                                        },
                                        "punctuate": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": true
                                        },
                                        "diarize": {
                                          "type": "boolean",
                                          "nullable": true,
                                          "default": false
                                        },
                                        "additionalSettings": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "nullable": true
                                          },
                                          "default": {}
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "temperature"
                                      ],
                                      "additionalProperties": {
                                        "nullable": true
                                      }
                                    },
                                    "complianceConfig": {
                                      "type": "object",
                                      "properties": {
                                        "pciDss": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "mifidIi": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "euAiAct": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "soc2": {
                                          "type": "boolean",
                                          "default": false
                                        }
                                      }
                                    },
                                    "callTimeoutSettings": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "silenceTimeout": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 0
                                        },
                                        "maximumDuration": {
                                          "type": "integer",
                                          "minimum": 0,
                                          "default": 600
                                        }
                                      }
                                    },
                                    "voicemailDetection": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enabled": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "messageMode": {
                                          "type": "string",
                                          "enum": [
                                            "llm",
                                            "custom",
                                            "none"
                                          ],
                                          "default": "none"
                                        },
                                        "staticMessage": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 2000,
                                          "default": null
                                        },
                                        "voicemailResponseDelay": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 30,
                                          "default": 2
                                        }
                                      }
                                    },
                                    "postConversationAnalysis": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "generateSummary": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "summaryPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "generateStructuredData": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataPrompt": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 10000,
                                          "default": null
                                        },
                                        "autoDetectProblems": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "structuredDataSchema": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "name": {
                                                "type": "string",
                                                "minLength": 1,
                                                "pattern": "^[^\\s]+$"
                                              },
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "string",
                                                  "number",
                                                  "rating",
                                                  "checkbox",
                                                  "range",
                                                  "enum",
                                                  "array"
                                                ],
                                                "default": "string"
                                              },
                                              "description": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "enums": {
                                                "type": "array",
                                                "items": {
                                                  "type": "string"
                                                },
                                                "default": []
                                              },
                                              "defaultValue": {
                                                "type": "string",
                                                "nullable": true,
                                                "maxLength": 10000,
                                                "default": null
                                              },
                                              "rangeMin": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              },
                                              "rangeMax": {
                                                "type": "number",
                                                "nullable": true,
                                                "default": null
                                              }
                                            },
                                            "required": [
                                              "name"
                                            ]
                                          },
                                          "default": []
                                        }
                                      }
                                    },
                                    "privacyConfig": {
                                      "type": "object",
                                      "nullable": true,
                                      "properties": {
                                        "enableRecording": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "getRecordingConsent": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "recordingConsentText": {
                                          "type": "string",
                                          "nullable": true,
                                          "maxLength": 500,
                                          "default": null
                                        },
                                        "stopSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "preSpeechMs": {
                                          "type": "number",
                                          "minimum": 0
                                        },
                                        "maxDurationSecs": {
                                          "type": "number",
                                          "minimum": 0
                                        }
                                      }
                                    },
                                    "turnAnalyzerConfig": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string",
                                          "enum": [
                                            "local",
                                            "fal"
                                          ]
                                        },
                                        "url": {
                                          "type": "string",
                                          "nullable": true,
                                          "format": "uri"
                                        },
                                        "modelPath": {
                                          "type": "string",
                                          "nullable": true
                                        }
                                      }
                                    }
                                  },
                                  "required": [
                                    "llmConfig",
                                    "ttsConfig",
                                    "sstConfig",
                                    "complianceConfig"
                                  ]
                                },
                                "configDiff": {
                                  "type": "object",
                                  "nullable": true,
                                  "additionalProperties": {
                                    "nullable": true
                                  }
                                },
                                "createdBy": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date-time"
                                }
                              },
                              "required": [
                                "id",
                                "agentId",
                                "workspaceId",
                                "versionNumber",
                                "parentVersionId",
                                "isActive",
                                "configSnapshot",
                                "configDiff",
                                "createdBy",
                                "createdAt"
                              ]
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success",
                            "version",
                            "message"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Agent or version not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/workflow": {
      "get": {
        "summary": "List workflows",
        "description": "Returns workflows for a workspace with pagination.",
        "tags": [
          "Workflows"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "maximum": 100,
              "default": 50,
              "description": "Maximum number of workflows to return (1-100)"
            },
            "required": false,
            "description": "Maximum number of workflows to return (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "description": "Number of workflows to skip for pagination"
            },
            "required": false,
            "description": "Number of workflows to skip for pagination",
            "name": "offset",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Workflows list with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "workflows": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "name": {
                                    "type": "string",
                                    "minLength": 1,
                                    "maxLength": 255
                                  },
                                  "description": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "version": {
                                    "type": "string",
                                    "minLength": 1,
                                    "maxLength": 50
                                  },
                                  "tags": {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    },
                                    "default": []
                                  },
                                  "workspaceId": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "createdAt": {
                                    "type": "string",
                                    "format": "date-time"
                                  },
                                  "updatedAt": {
                                    "type": "string",
                                    "format": "date-time"
                                  },
                                  "createdBy": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "updatedBy": {
                                    "type": "string",
                                    "format": "uuid"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name",
                                  "description",
                                  "version",
                                  "workspaceId",
                                  "createdAt",
                                  "updatedAt",
                                  "createdBy",
                                  "updatedBy"
                                ]
                              }
                            },
                            "total": {
                              "type": "integer",
                              "minimum": 0
                            },
                            "limit": {
                              "type": "integer",
                              "minimum": 0,
                              "exclusiveMinimum": true
                            },
                            "offset": {
                              "type": "integer",
                              "minimum": 0
                            }
                          },
                          "required": [
                            "workflows",
                            "total",
                            "limit",
                            "offset"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/workflow/{workflowId}": {
      "get": {
        "summary": "Get workflow",
        "description": "Returns detailed workflow information including nodes and canvas state.",
        "tags": [
          "Workflows"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workflow ID"
            },
            "required": true,
            "description": "Workflow ID",
            "name": "workflowId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Workflow details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "workflow": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "name": {
                                  "type": "string",
                                  "minLength": 1,
                                  "maxLength": 255
                                },
                                "description": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "version": {
                                  "type": "string",
                                  "minLength": 1,
                                  "maxLength": 50
                                },
                                "tags": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  },
                                  "default": []
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "template": {
                                  "type": "boolean",
                                  "default": false
                                },
                                "canvasViewport": {
                                  "type": "object",
                                  "nullable": true,
                                  "properties": {
                                    "x": {
                                      "type": "number"
                                    },
                                    "y": {
                                      "type": "number"
                                    },
                                    "zoom": {
                                      "type": "number"
                                    }
                                  },
                                  "required": [
                                    "x",
                                    "y",
                                    "zoom"
                                  ]
                                },
                                "nodePositions": {
                                  "type": "object",
                                  "additionalProperties": {
                                    "type": "object",
                                    "properties": {
                                      "x": {
                                        "type": "number"
                                      },
                                      "y": {
                                        "type": "number"
                                      }
                                    },
                                    "required": [
                                      "x",
                                      "y"
                                    ]
                                  },
                                  "default": {}
                                },
                                "workflow": {
                                  "type": "object",
                                  "properties": {
                                    "initial_node": {
                                      "type": "string"
                                    },
                                    "nodes": {
                                      "type": "object",
                                      "additionalProperties": {
                                        "type": "object",
                                        "properties": {
                                          "role_messages": {
                                            "type": "array",
                                            "items": {
                                              "type": "object",
                                              "properties": {
                                                "role": {
                                                  "type": "string"
                                                },
                                                "content": {
                                                  "type": "string"
                                                }
                                              },
                                              "required": [
                                                "role",
                                                "content"
                                              ]
                                            }
                                          },
                                          "task_messages": {
                                            "type": "array",
                                            "items": {
                                              "type": "object",
                                              "properties": {
                                                "role": {
                                                  "type": "string"
                                                },
                                                "content": {
                                                  "type": "string"
                                                }
                                              },
                                              "required": [
                                                "role",
                                                "content"
                                              ]
                                            }
                                          },
                                          "functions": {
                                            "type": "array",
                                            "items": {
                                              "anyOf": [
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "enum": [
                                                        "function"
                                                      ]
                                                    },
                                                    "function": {
                                                      "type": "object",
                                                      "properties": {
                                                        "name": {
                                                          "type": "string"
                                                        },
                                                        "transition_to": {
                                                          "type": "string"
                                                        },
                                                        "description": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "required": [
                                                        "name",
                                                        "transition_to"
                                                      ]
                                                    }
                                                  },
                                                  "required": [
                                                    "type",
                                                    "function"
                                                  ]
                                                },
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "enum": [
                                                        "function"
                                                      ]
                                                    },
                                                    "function": {
                                                      "type": "object",
                                                      "properties": {
                                                        "name": {
                                                          "type": "string"
                                                        },
                                                        "handler": {
                                                          "type": "string"
                                                        },
                                                        "description": {
                                                          "type": "string"
                                                        },
                                                        "parameters": {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string"
                                                            },
                                                            "properties": {
                                                              "type": "object",
                                                              "additionalProperties": {
                                                                "nullable": true
                                                              }
                                                            },
                                                            "required": {
                                                              "type": "array",
                                                              "items": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "items": {
                                                              "nullable": true
                                                            }
                                                          },
                                                          "required": [
                                                            "type"
                                                          ],
                                                          "additionalProperties": {
                                                            "nullable": true
                                                          }
                                                        },
                                                        "transition_to": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "required": [
                                                        "name",
                                                        "handler",
                                                        "description",
                                                        "parameters"
                                                      ]
                                                    },
                                                    "config": {
                                                      "type": "object",
                                                      "properties": {
                                                        "maxPerNTurns": {
                                                          "type": "integer",
                                                          "minimum": 0,
                                                          "exclusiveMinimum": true
                                                        },
                                                        "alwaysRunsAt": {
                                                          "type": "array",
                                                          "items": {
                                                            "type": "string",
                                                            "enum": [
                                                              "each_turn",
                                                              "start_of_call",
                                                              "end_of_call"
                                                            ]
                                                          }
                                                        },
                                                        "timeoutMs": {
                                                          "type": "integer",
                                                          "minimum": 0,
                                                          "exclusiveMinimum": true
                                                        }
                                                      }
                                                    }
                                                  },
                                                  "required": [
                                                    "type",
                                                    "function"
                                                  ]
                                                },
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "enum": [
                                                        "function"
                                                      ]
                                                    },
                                                    "function": {
                                                      "type": "object",
                                                      "properties": {
                                                        "name": {
                                                          "type": "string"
                                                        },
                                                        "handler": {
                                                          "type": "string",
                                                          "enum": [
                                                            "__function__:end_call"
                                                          ]
                                                        },
                                                        "description": {
                                                          "type": "string"
                                                        },
                                                        "parameters": {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string"
                                                            },
                                                            "properties": {
                                                              "type": "object",
                                                              "additionalProperties": {
                                                                "nullable": true
                                                              }
                                                            },
                                                            "required": {
                                                              "type": "array",
                                                              "items": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "items": {
                                                              "nullable": true
                                                            }
                                                          },
                                                          "required": [
                                                            "type"
                                                          ],
                                                          "additionalProperties": {
                                                            "nullable": true
                                                          }
                                                        }
                                                      },
                                                      "required": [
                                                        "name",
                                                        "handler"
                                                      ]
                                                    },
                                                    "config": {
                                                      "type": "object",
                                                      "properties": {
                                                        "maxPerNTurns": {
                                                          "type": "integer",
                                                          "minimum": 0,
                                                          "exclusiveMinimum": true
                                                        },
                                                        "alwaysRunsAt": {
                                                          "type": "array",
                                                          "items": {
                                                            "type": "string",
                                                            "enum": [
                                                              "each_turn",
                                                              "start_of_call",
                                                              "end_of_call"
                                                            ]
                                                          }
                                                        },
                                                        "timeoutMs": {
                                                          "type": "integer",
                                                          "minimum": 0,
                                                          "exclusiveMinimum": true
                                                        }
                                                      }
                                                    }
                                                  },
                                                  "required": [
                                                    "type",
                                                    "function"
                                                  ]
                                                },
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "enum": [
                                                        "function"
                                                      ]
                                                    },
                                                    "function": {
                                                      "type": "object",
                                                      "properties": {
                                                        "name": {
                                                          "type": "string"
                                                        },
                                                        "handler": {
                                                          "type": "string",
                                                          "enum": [
                                                            "__function__:transfer_call"
                                                          ]
                                                        },
                                                        "description": {
                                                          "type": "string"
                                                        },
                                                        "parameters": {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string"
                                                            },
                                                            "properties": {
                                                              "type": "object",
                                                              "additionalProperties": {
                                                                "nullable": true
                                                              }
                                                            },
                                                            "required": {
                                                              "type": "array",
                                                              "items": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "items": {
                                                              "nullable": true
                                                            }
                                                          },
                                                          "required": [
                                                            "type"
                                                          ],
                                                          "additionalProperties": {
                                                            "nullable": true
                                                          }
                                                        }
                                                      },
                                                      "required": [
                                                        "name",
                                                        "handler"
                                                      ]
                                                    },
                                                    "config": {
                                                      "type": "object",
                                                      "properties": {
                                                        "maxPerNTurns": {
                                                          "type": "integer",
                                                          "minimum": 0,
                                                          "exclusiveMinimum": true
                                                        },
                                                        "alwaysRunsAt": {
                                                          "type": "array",
                                                          "items": {
                                                            "type": "string",
                                                            "enum": [
                                                              "each_turn",
                                                              "start_of_call",
                                                              "end_of_call"
                                                            ]
                                                          }
                                                        },
                                                        "timeoutMs": {
                                                          "type": "integer",
                                                          "minimum": 0,
                                                          "exclusiveMinimum": true
                                                        }
                                                      }
                                                    }
                                                  },
                                                  "required": [
                                                    "type",
                                                    "function"
                                                  ]
                                                },
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "enum": [
                                                        "function"
                                                      ]
                                                    },
                                                    "function": {
                                                      "type": "object",
                                                      "properties": {
                                                        "name": {
                                                          "type": "string"
                                                        },
                                                        "handler": {
                                                          "type": "string",
                                                          "enum": [
                                                            "__function__:reschedule_call"
                                                          ]
                                                        },
                                                        "description": {
                                                          "type": "string"
                                                        },
                                                        "parameters": {
                                                          "type": "object",
                                                          "properties": {
                                                            "type": {
                                                              "type": "string"
                                                            },
                                                            "properties": {
                                                              "type": "object",
                                                              "additionalProperties": {
                                                                "nullable": true
                                                              }
                                                            },
                                                            "required": {
                                                              "type": "array",
                                                              "items": {
                                                                "type": "string"
                                                              }
                                                            },
                                                            "items": {
                                                              "nullable": true
                                                            }
                                                          },
                                                          "required": [
                                                            "type"
                                                          ],
                                                          "additionalProperties": {
                                                            "nullable": true
                                                          }
                                                        }
                                                      },
                                                      "required": [
                                                        "name",
                                                        "handler"
                                                      ]
                                                    }
                                                  },
                                                  "required": [
                                                    "type",
                                                    "function"
                                                  ]
                                                },
                                                {
                                                  "type": "object",
                                                  "properties": {
                                                    "type": {
                                                      "type": "string",
                                                      "enum": [
                                                        "reference"
                                                      ]
                                                    },
                                                    "name": {
                                                      "type": "string"
                                                    }
                                                  },
                                                  "required": [
                                                    "type",
                                                    "name"
                                                  ]
                                                }
                                              ]
                                            }
                                          },
                                          "respond_immediately": {
                                            "type": "boolean",
                                            "default": true
                                          },
                                          "context_strategy": {
                                            "type": "string",
                                            "enum": [
                                              "APPEND",
                                              "RESET",
                                              "RESET_WITH_SUMMARY"
                                            ],
                                            "default": "APPEND"
                                          },
                                          "summary_prompt": {
                                            "type": "string"
                                          },
                                          "agentId": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "role_messages",
                                          "task_messages"
                                        ]
                                      }
                                    },
                                    "globals": {
                                      "type": "array",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "function"
                                                ]
                                              },
                                              "function": {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "transition_to": {
                                                    "type": "string"
                                                  },
                                                  "description": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "transition_to"
                                                ]
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "function"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "function"
                                                ]
                                              },
                                              "function": {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "handler": {
                                                    "type": "string"
                                                  },
                                                  "description": {
                                                    "type": "string"
                                                  },
                                                  "parameters": {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string"
                                                      },
                                                      "properties": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "nullable": true
                                                        }
                                                      },
                                                      "required": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "items": {
                                                        "nullable": true
                                                      }
                                                    },
                                                    "required": [
                                                      "type"
                                                    ],
                                                    "additionalProperties": {
                                                      "nullable": true
                                                    }
                                                  },
                                                  "transition_to": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "handler",
                                                  "description",
                                                  "parameters"
                                                ]
                                              },
                                              "config": {
                                                "type": "object",
                                                "properties": {
                                                  "maxPerNTurns": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  },
                                                  "alwaysRunsAt": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string",
                                                      "enum": [
                                                        "each_turn",
                                                        "start_of_call",
                                                        "end_of_call"
                                                      ]
                                                    }
                                                  },
                                                  "timeoutMs": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  }
                                                }
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "function"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "function"
                                                ]
                                              },
                                              "function": {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "handler": {
                                                    "type": "string",
                                                    "enum": [
                                                      "__function__:end_call"
                                                    ]
                                                  },
                                                  "description": {
                                                    "type": "string"
                                                  },
                                                  "parameters": {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string"
                                                      },
                                                      "properties": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "nullable": true
                                                        }
                                                      },
                                                      "required": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "items": {
                                                        "nullable": true
                                                      }
                                                    },
                                                    "required": [
                                                      "type"
                                                    ],
                                                    "additionalProperties": {
                                                      "nullable": true
                                                    }
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "handler"
                                                ]
                                              },
                                              "config": {
                                                "type": "object",
                                                "properties": {
                                                  "maxPerNTurns": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  },
                                                  "alwaysRunsAt": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string",
                                                      "enum": [
                                                        "each_turn",
                                                        "start_of_call",
                                                        "end_of_call"
                                                      ]
                                                    }
                                                  },
                                                  "timeoutMs": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  }
                                                }
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "function"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "function"
                                                ]
                                              },
                                              "function": {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "handler": {
                                                    "type": "string",
                                                    "enum": [
                                                      "__function__:transfer_call"
                                                    ]
                                                  },
                                                  "description": {
                                                    "type": "string"
                                                  },
                                                  "parameters": {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string"
                                                      },
                                                      "properties": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "nullable": true
                                                        }
                                                      },
                                                      "required": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "items": {
                                                        "nullable": true
                                                      }
                                                    },
                                                    "required": [
                                                      "type"
                                                    ],
                                                    "additionalProperties": {
                                                      "nullable": true
                                                    }
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "handler"
                                                ]
                                              },
                                              "config": {
                                                "type": "object",
                                                "properties": {
                                                  "maxPerNTurns": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  },
                                                  "alwaysRunsAt": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string",
                                                      "enum": [
                                                        "each_turn",
                                                        "start_of_call",
                                                        "end_of_call"
                                                      ]
                                                    }
                                                  },
                                                  "timeoutMs": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "exclusiveMinimum": true
                                                  }
                                                }
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "function"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "type": {
                                                "type": "string",
                                                "enum": [
                                                  "function"
                                                ]
                                              },
                                              "function": {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "handler": {
                                                    "type": "string",
                                                    "enum": [
                                                      "__function__:reschedule_call"
                                                    ]
                                                  },
                                                  "description": {
                                                    "type": "string"
                                                  },
                                                  "parameters": {
                                                    "type": "object",
                                                    "properties": {
                                                      "type": {
                                                        "type": "string"
                                                      },
                                                      "properties": {
                                                        "type": "object",
                                                        "additionalProperties": {
                                                          "nullable": true
                                                        }
                                                      },
                                                      "required": {
                                                        "type": "array",
                                                        "items": {
                                                          "type": "string"
                                                        }
                                                      },
                                                      "items": {
                                                        "nullable": true
                                                      }
                                                    },
                                                    "required": [
                                                      "type"
                                                    ],
                                                    "additionalProperties": {
                                                      "nullable": true
                                                    }
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "handler"
                                                ]
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "function"
                                            ]
                                          }
                                        ]
                                      }
                                    }
                                  },
                                  "default": {
                                    "initial_node": "",
                                    "nodes": {}
                                  },
                                  "required": [
                                    "initial_node",
                                    "nodes"
                                  ]
                                },
                                "executionCount": {
                                  "type": "integer",
                                  "minimum": 0,
                                  "default": 0
                                },
                                "createdAt": {
                                  "type": "string",
                                  "format": "date-time"
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "format": "date-time"
                                },
                                "createdBy": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "updatedBy": {
                                  "type": "string",
                                  "format": "uuid"
                                }
                              },
                              "required": [
                                "id",
                                "name",
                                "description",
                                "version",
                                "workspaceId",
                                "canvasViewport",
                                "createdAt",
                                "updatedAt",
                                "createdBy",
                                "updatedBy"
                              ]
                            }
                          },
                          "required": [
                            "workflow"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Workflow not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/workflow/templates": {
      "get": {
        "summary": "List workflow templates",
        "description": "Returns available workflow templates for a workspace.",
        "tags": [
          "Workflows"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Workflow templates",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "templates": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "name": {
                                    "type": "string",
                                    "minLength": 1,
                                    "maxLength": 255
                                  },
                                  "description": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "workspaceId": {
                                    "type": "string",
                                    "format": "uuid"
                                  }
                                },
                                "required": [
                                  "id",
                                  "name",
                                  "description",
                                  "workspaceId"
                                ]
                              }
                            }
                          },
                          "required": [
                            "templates"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/problems": {
      "get": {
        "summary": "List problems",
        "description": "Returns problems for a workspace with filters, sorting, pagination, and histogram data.",
        "tags": [
          "Problems"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by specific call ID"
            },
            "required": false,
            "description": "Filter by specific call ID",
            "name": "callId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "1h",
                "24h",
                "week",
                "month",
                "year"
              ],
              "description": "Histogram bucket granularity"
            },
            "required": false,
            "description": "Histogram bucket granularity",
            "name": "granularity",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Start date for histogram (ISO format)"
            },
            "required": false,
            "description": "Start date for histogram (ISO format)",
            "name": "startDate",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "End date for histogram (ISO format)"
            },
            "required": false,
            "description": "End date for histogram (ISO format)",
            "name": "endDate",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "all",
                "archived"
              ],
              "default": "active",
              "description": "Filter by archive status"
            },
            "required": false,
            "description": "Filter by archive status",
            "name": "archivedFilter",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "25",
              "description": "Page size"
            },
            "required": false,
            "description": "Page size",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "0",
              "description": "Offset for pagination"
            },
            "required": false,
            "description": "Offset for pagination",
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Base64-encoded filter state"
            },
            "required": false,
            "description": "Base64-encoded filter state",
            "name": "filters",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Global search term"
            },
            "required": false,
            "description": "Global search term",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Sort field name"
            },
            "required": false,
            "description": "Sort field name",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "description": "Sort direction"
            },
            "required": false,
            "description": "Sort direction",
            "name": "sortOrder",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Set to 'true' to return a file export"
            },
            "required": false,
            "description": "Set to 'true' to return a file export",
            "name": "export",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "csv",
                "xlsx",
                "markdown"
              ],
              "description": "Export file format"
            },
            "required": false,
            "description": "Export file format",
            "name": "exportFormat",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "JSON array of column definitions {id,label}"
            },
            "required": false,
            "description": "JSON array of column definitions {id,label}",
            "name": "exportColumns",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Problems with pagination and summary",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "problems": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "workspaceId": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "callId": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "agentId": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "problem": {
                                    "type": "string",
                                    "minLength": 1
                                  },
                                  "description": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "type": {
                                    "type": "string",
                                    "nullable": true,
                                    "enum": [
                                      "system",
                                      "audio",
                                      "transcription",
                                      "decision",
                                      "general",
                                      null
                                    ]
                                  },
                                  "severity": {
                                    "type": "number",
                                    "minimum": 0,
                                    "maximum": 1,
                                    "default": 0.5
                                  },
                                  "status": {
                                    "type": "string",
                                    "default": "open"
                                  },
                                  "assignedTo": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "createdBy": {
                                    "type": "string",
                                    "default": "ai"
                                  },
                                  "messageId": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "resolved": {
                                    "type": "boolean",
                                    "default": false
                                  },
                                  "resolvedAt": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "resolvedBy": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "solutionId": {
                                    "type": "string",
                                    "nullable": true,
                                    "format": "uuid"
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "updatedAt": {
                                    "type": "string"
                                  },
                                  "callStartedAt": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "customerNumber": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "agentName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "resolvedByName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "assignees": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "userId": {
                                          "type": "string"
                                        },
                                        "userName": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "assignedAt": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "userId",
                                        "assignedAt"
                                      ]
                                    }
                                  },
                                  "commentsCount": {
                                    "type": "number"
                                  },
                                  "isArchived": {
                                    "type": "boolean",
                                    "default": false
                                  }
                                },
                                "required": [
                                  "problem"
                                ]
                              }
                            },
                            "pagination": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "number"
                                },
                                "limit": {
                                  "type": "number"
                                },
                                "offset": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "total",
                                "limit",
                                "offset"
                              ]
                            },
                            "summary": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "number"
                                },
                                "resolved": {
                                  "type": "number"
                                },
                                "unresolved": {
                                  "type": "number"
                                },
                                "byType": {
                                  "type": "object",
                                  "properties": {
                                    "system": {
                                      "type": "number"
                                    },
                                    "audio": {
                                      "type": "number"
                                    },
                                    "transcription": {
                                      "type": "number"
                                    },
                                    "decision": {
                                      "type": "number"
                                    },
                                    "general": {
                                      "type": "number"
                                    }
                                  },
                                  "required": [
                                    "system",
                                    "audio",
                                    "transcription",
                                    "decision"
                                  ]
                                },
                                "byStatus": {
                                  "type": "object",
                                  "additionalProperties": {
                                    "type": "number"
                                  }
                                }
                              },
                              "required": [
                                "total",
                                "resolved",
                                "unresolved",
                                "byType"
                              ]
                            },
                            "histogram": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "timestamp": {
                                    "type": "string"
                                  },
                                  "total": {
                                    "type": "number"
                                  },
                                  "resolved": {
                                    "type": "number"
                                  },
                                  "unresolved": {
                                    "type": "number"
                                  },
                                  "filteredTotal": {
                                    "type": "number"
                                  },
                                  "filteredResolved": {
                                    "type": "number"
                                  },
                                  "filteredUnresolved": {
                                    "type": "number"
                                  }
                                },
                                "required": [
                                  "timestamp",
                                  "total",
                                  "resolved",
                                  "unresolved",
                                  "filteredTotal",
                                  "filteredResolved",
                                  "filteredUnresolved"
                                ]
                              }
                            },
                            "uniqueStatuses": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            }
                          },
                          "required": [
                            "success",
                            "problems",
                            "pagination",
                            "summary"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create problem",
        "description": "Creates a new problem. Can be linked to a call or agent, or standalone.",
        "tags": [
          "Problems"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid"
                  },
                  "callId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "agentId": {
                    "type": "string",
                    "pattern": "^\\d+$"
                  },
                  "problem": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "system",
                      "audio",
                      "transcription",
                      "decision",
                      "general"
                    ]
                  },
                  "severity": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 0.5
                  },
                  "status": {
                    "type": "string",
                    "default": "open"
                  },
                  "assignedTo": {
                    "type": "string"
                  },
                  "messageId": {
                    "type": "string",
                    "nullable": true
                  },
                  "resolved": {
                    "type": "boolean",
                    "default": false
                  }
                },
                "required": [
                  "workspaceId",
                  "problem"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Problem created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "problem": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "callId": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "agentId": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "problem": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "description": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "type": {
                                  "type": "string",
                                  "nullable": true,
                                  "enum": [
                                    "system",
                                    "audio",
                                    "transcription",
                                    "decision",
                                    "general",
                                    null
                                  ]
                                },
                                "severity": {
                                  "type": "number",
                                  "minimum": 0,
                                  "maximum": 1,
                                  "default": 0.5
                                },
                                "status": {
                                  "type": "string",
                                  "default": "open"
                                },
                                "assignedTo": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdBy": {
                                  "type": "string",
                                  "default": "ai"
                                },
                                "messageId": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "resolved": {
                                  "type": "boolean",
                                  "default": false
                                },
                                "resolvedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "resolvedBy": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "solutionId": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "callStartedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "customerNumber": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "agentName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "resolvedByName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "assignees": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "userId": {
                                        "type": "string"
                                      },
                                      "userName": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "assignedAt": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "userId",
                                      "assignedAt"
                                    ]
                                  }
                                },
                                "commentsCount": {
                                  "type": "number"
                                },
                                "isArchived": {
                                  "type": "boolean",
                                  "default": false
                                }
                              },
                              "required": [
                                "problem"
                              ]
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update problem",
        "description": "Updates a problem's status, assignment, resolution, or content.",
        "tags": [
          "Problems"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid"
                  },
                  "problemId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid"
                  },
                  "resolved": {
                    "type": "boolean"
                  },
                  "status": {
                    "type": "string"
                  },
                  "assignedTo": {
                    "type": "string",
                    "nullable": true
                  },
                  "resolvedBy": {
                    "type": "string"
                  },
                  "problem": {
                    "type": "string",
                    "minLength": 1
                  },
                  "description": {
                    "type": "string",
                    "nullable": true
                  },
                  "type": {
                    "type": "string",
                    "nullable": true,
                    "enum": [
                      "system",
                      "audio",
                      "transcription",
                      "decision",
                      "general",
                      null
                    ]
                  },
                  "severity": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1
                  },
                  "agentId": {
                    "type": "string",
                    "nullable": true,
                    "pattern": "^\\d+$"
                  }
                },
                "required": [
                  "workspaceId",
                  "problemId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Problem updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "problem": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "callId": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "agentId": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "problem": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "description": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "type": {
                                  "type": "string",
                                  "nullable": true,
                                  "enum": [
                                    "system",
                                    "audio",
                                    "transcription",
                                    "decision",
                                    "general",
                                    null
                                  ]
                                },
                                "severity": {
                                  "type": "number",
                                  "minimum": 0,
                                  "maximum": 1,
                                  "default": 0.5
                                },
                                "status": {
                                  "type": "string",
                                  "default": "open"
                                },
                                "assignedTo": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdBy": {
                                  "type": "string",
                                  "default": "ai"
                                },
                                "messageId": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "resolved": {
                                  "type": "boolean",
                                  "default": false
                                },
                                "resolvedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "resolvedBy": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "solutionId": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "callStartedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "customerNumber": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "agentName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "resolvedByName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "assignees": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "userId": {
                                        "type": "string"
                                      },
                                      "userName": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "assignedAt": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "userId",
                                      "assignedAt"
                                    ]
                                  }
                                },
                                "commentsCount": {
                                  "type": "number"
                                },
                                "isArchived": {
                                  "type": "boolean",
                                  "default": false
                                }
                              },
                              "required": [
                                "problem"
                              ]
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Problem not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Bulk delete problems",
        "tags": [
          "Problems"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Comma-separated problem IDs to delete"
            },
            "required": true,
            "description": "Comma-separated problem IDs to delete",
            "name": "problemIds",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Deletion result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "deletedCount": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "success",
                            "deletedCount"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/problems/statuses": {
      "get": {
        "summary": "Get problem statuses",
        "description": "Returns all unique problem statuses used in the workspace.",
        "tags": [
          "Problem Status Config"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Status list",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "statuses": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            }
                          },
                          "required": [
                            "success",
                            "statuses"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/problems/config": {
      "get": {
        "summary": "Get status config",
        "description": "Returns the workspace's problem status configuration (custom statuses, order, colors).",
        "tags": [
          "Problem Status Config"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Status configuration",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "config": {
                              "type": "object",
                              "properties": {
                                "workspaceId": {
                                  "type": "string"
                                },
                                "customStatuses": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "statusOrder": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "statusMetadata": {
                                  "type": "object",
                                  "additionalProperties": {
                                    "type": "object",
                                    "properties": {
                                      "color": {
                                        "type": "string",
                                        "enum": [
                                          "orange",
                                          "blue",
                                          "green",
                                          "gray",
                                          "red",
                                          "purple",
                                          "pink",
                                          "indigo",
                                          "cyan",
                                          "teal"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "updatedBy": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "workspaceId",
                                "customStatuses",
                                "statusOrder",
                                "statusMetadata",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "success",
                            "config"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update status order",
        "description": "Updates the order of problem statuses (for Kanban column ordering).",
        "tags": [
          "Problem Status Config"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid"
                  },
                  "statusOrder": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "minLength": 1
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "workspaceId",
                  "statusOrder"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status order updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "config": {
                              "type": "object",
                              "properties": {
                                "workspaceId": {
                                  "type": "string"
                                },
                                "customStatuses": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "statusOrder": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "statusMetadata": {
                                  "type": "object",
                                  "additionalProperties": {
                                    "type": "object",
                                    "properties": {
                                      "color": {
                                        "type": "string",
                                        "enum": [
                                          "orange",
                                          "blue",
                                          "green",
                                          "gray",
                                          "red",
                                          "purple",
                                          "pink",
                                          "indigo",
                                          "cyan",
                                          "teal"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "updatedBy": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "workspaceId",
                                "customStatuses",
                                "statusOrder",
                                "statusMetadata",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "success",
                            "config"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Add custom status",
        "description": "Adds a new custom problem status to the workspace.",
        "tags": [
          "Problem Status Config"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid"
                  },
                  "status": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 50
                  },
                  "color": {
                    "type": "string",
                    "enum": [
                      "orange",
                      "blue",
                      "green",
                      "gray",
                      "red",
                      "purple",
                      "pink",
                      "indigo",
                      "cyan",
                      "teal"
                    ]
                  }
                },
                "required": [
                  "workspaceId",
                  "status"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Custom status added",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "config": {
                              "type": "object",
                              "properties": {
                                "workspaceId": {
                                  "type": "string"
                                },
                                "customStatuses": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "statusOrder": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "statusMetadata": {
                                  "type": "object",
                                  "additionalProperties": {
                                    "type": "object",
                                    "properties": {
                                      "color": {
                                        "type": "string",
                                        "enum": [
                                          "orange",
                                          "blue",
                                          "green",
                                          "gray",
                                          "red",
                                          "purple",
                                          "pink",
                                          "indigo",
                                          "cyan",
                                          "teal"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "updatedBy": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "workspaceId",
                                "customStatuses",
                                "statusOrder",
                                "statusMetadata",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "success",
                            "config"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update status properties",
        "description": "Updates a status's color or name.",
        "tags": [
          "Problem Status Config"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid"
                  },
                  "status": {
                    "type": "string",
                    "minLength": 1
                  },
                  "color": {
                    "type": "string",
                    "enum": [
                      "orange",
                      "blue",
                      "green",
                      "gray",
                      "red",
                      "purple",
                      "pink",
                      "indigo",
                      "cyan",
                      "teal"
                    ]
                  },
                  "newName": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "workspaceId",
                  "status"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status properties updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "config": {
                              "type": "object",
                              "properties": {
                                "workspaceId": {
                                  "type": "string"
                                },
                                "customStatuses": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "statusOrder": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "statusMetadata": {
                                  "type": "object",
                                  "additionalProperties": {
                                    "type": "object",
                                    "properties": {
                                      "color": {
                                        "type": "string",
                                        "enum": [
                                          "orange",
                                          "blue",
                                          "green",
                                          "gray",
                                          "red",
                                          "purple",
                                          "pink",
                                          "indigo",
                                          "cyan",
                                          "teal"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "updatedBy": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "workspaceId",
                                "customStatuses",
                                "statusOrder",
                                "statusMetadata",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "success",
                            "config"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete custom status",
        "description": "Deletes a custom problem status from the workspace.",
        "tags": [
          "Problem Status Config"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Status name to delete"
            },
            "required": true,
            "description": "Status name to delete",
            "name": "status",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Custom status deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "config": {
                              "type": "object",
                              "properties": {
                                "workspaceId": {
                                  "type": "string"
                                },
                                "customStatuses": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "statusOrder": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "statusMetadata": {
                                  "type": "object",
                                  "additionalProperties": {
                                    "type": "object",
                                    "properties": {
                                      "color": {
                                        "type": "string",
                                        "enum": [
                                          "orange",
                                          "blue",
                                          "green",
                                          "gray",
                                          "red",
                                          "purple",
                                          "pink",
                                          "indigo",
                                          "cyan",
                                          "teal"
                                        ]
                                      }
                                    }
                                  }
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "updatedBy": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "workspaceId",
                                "customStatuses",
                                "statusOrder",
                                "statusMetadata",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "success",
                            "config"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/problems/{problemId}/assignees": {
      "get": {
        "summary": "List problem assignees",
        "description": "Returns all assignees for a problem.",
        "tags": [
          "Problem Assignees"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Problem ID"
            },
            "required": true,
            "description": "Problem ID",
            "name": "problemId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Assignees list",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "assignees": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "problemId": {
                                    "type": "string"
                                  },
                                  "userId": {
                                    "type": "string"
                                  },
                                  "userName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "assignedAt": {
                                    "type": "string"
                                  },
                                  "assignedBy": {
                                    "type": "string",
                                    "nullable": true
                                  }
                                },
                                "required": [
                                  "id",
                                  "problemId",
                                  "userId",
                                  "assignedAt"
                                ]
                              }
                            }
                          },
                          "required": [
                            "success",
                            "assignees"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Problem not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Add problem assignee",
        "description": "Adds an assignee to a problem.",
        "tags": [
          "Problem Assignees"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Problem ID"
            },
            "required": true,
            "description": "Problem ID",
            "name": "problemId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "userId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid",
                    "description": "User ID to assign"
                  }
                },
                "required": [
                  "workspaceId",
                  "userId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Assignee added",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "assignee": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "problemId": {
                                  "type": "string"
                                },
                                "userId": {
                                  "type": "string"
                                },
                                "userName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "assignedAt": {
                                  "type": "string"
                                },
                                "assignedBy": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "id",
                                "problemId",
                                "userId",
                                "assignedAt"
                              ]
                            }
                          },
                          "required": [
                            "success",
                            "assignee"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Problem not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Replace problem assignees",
        "description": "Replaces all assignees for a problem.",
        "tags": [
          "Problem Assignees"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Problem ID"
            },
            "required": true,
            "description": "Problem ID",
            "name": "problemId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "userIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "minLength": 1,
                      "format": "uuid"
                    },
                    "description": "User IDs to set as assignees"
                  }
                },
                "required": [
                  "workspaceId",
                  "userIds"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Assignees replaced",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "assignees": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "problemId": {
                                    "type": "string"
                                  },
                                  "userId": {
                                    "type": "string"
                                  },
                                  "userName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "assignedAt": {
                                    "type": "string"
                                  },
                                  "assignedBy": {
                                    "type": "string",
                                    "nullable": true
                                  }
                                },
                                "required": [
                                  "id",
                                  "problemId",
                                  "userId",
                                  "assignedAt"
                                ]
                              }
                            }
                          },
                          "required": [
                            "success",
                            "assignees"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Problem not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Remove problem assignee",
        "description": "Removes an assignee from a problem.",
        "tags": [
          "Problem Assignees"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Problem ID"
            },
            "required": true,
            "description": "Problem ID",
            "name": "problemId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "User ID to remove"
            },
            "required": true,
            "description": "User ID to remove",
            "name": "userId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Assignee removed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            }
                          },
                          "required": [
                            "success"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Problem not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/problems/{problemId}/comments": {
      "get": {
        "summary": "List problem comments",
        "description": "Returns all comments for a problem.",
        "tags": [
          "Problem Comments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Problem ID"
            },
            "required": true,
            "description": "Problem ID",
            "name": "problemId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Comments list",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "comments": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "problemId": {
                                    "type": "string"
                                  },
                                  "authorId": {
                                    "type": "string"
                                  },
                                  "authorName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "content": {
                                    "type": "string"
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "updatedAt": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "problemId",
                                  "authorId",
                                  "content",
                                  "createdAt",
                                  "updatedAt"
                                ]
                              }
                            }
                          },
                          "required": [
                            "success",
                            "comments"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Problem not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Add problem comment",
        "description": "Adds a comment to a problem.",
        "tags": [
          "Problem Comments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Problem ID"
            },
            "required": true,
            "description": "Problem ID",
            "name": "problemId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "content": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Comment content"
                  }
                },
                "required": [
                  "workspaceId",
                  "content"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Comment added",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "comment": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "problemId": {
                                  "type": "string"
                                },
                                "authorId": {
                                  "type": "string"
                                },
                                "authorName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "content": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "problemId",
                                "authorId",
                                "content",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "success",
                            "comment"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Problem not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update problem comment",
        "description": "Updates a comment's content.",
        "tags": [
          "Problem Comments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Problem ID"
            },
            "required": true,
            "description": "Problem ID",
            "name": "problemId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "commentId": {
                    "type": "string",
                    "minLength": 1,
                    "format": "uuid",
                    "description": "Comment ID"
                  },
                  "content": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Updated comment content"
                  }
                },
                "required": [
                  "workspaceId",
                  "commentId",
                  "content"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Comment updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "comment": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "problemId": {
                                  "type": "string"
                                },
                                "authorId": {
                                  "type": "string"
                                },
                                "authorName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "content": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "problemId",
                                "authorId",
                                "content",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "success",
                            "comment"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Problem or comment not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete problem comment",
        "description": "Deletes a comment from a problem.",
        "tags": [
          "Problem Comments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Problem ID"
            },
            "required": true,
            "description": "Problem ID",
            "name": "problemId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Comment ID to delete"
            },
            "required": true,
            "description": "Comment ID to delete",
            "name": "commentId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Comment deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            }
                          },
                          "required": [
                            "success"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Problem or comment not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/solutions/status": {
      "get": {
        "summary": "Get optimization status",
        "description": "Returns the current optimization status for an agent, including unresolved problem count and active run.",
        "tags": [
          "Solutions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^\\d+$",
              "description": "Agent ID"
            },
            "required": true,
            "description": "Agent ID",
            "name": "agentId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Optimization status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "hasUnresolvedProblems": {
                              "type": "boolean"
                            },
                            "unresolvedProblemCount": {
                              "type": "number"
                            },
                            "currentRun": {
                              "type": "object",
                              "nullable": true,
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "agentId": {
                                  "type": "string"
                                },
                                "status": {
                                  "type": "string",
                                  "enum": [
                                    "generating",
                                    "pending_review",
                                    "completed",
                                    "failed"
                                  ]
                                },
                                "problemCount": {
                                  "type": "number"
                                },
                                "solutionCount": {
                                  "type": "number"
                                },
                                "acceptedCount": {
                                  "type": "number"
                                },
                                "rejectedCount": {
                                  "type": "number"
                                },
                                "error": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "completedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "solutions": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "runId": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "title": {
                                        "type": "string"
                                      },
                                      "change": {
                                        "type": "object",
                                        "properties": {
                                          "path": {
                                            "type": "string",
                                            "minLength": 1
                                          },
                                          "operation": {
                                            "type": "string",
                                            "enum": [
                                              "set",
                                              "text_diff"
                                            ]
                                          },
                                          "oldValue": {
                                            "nullable": true
                                          },
                                          "newValue": {
                                            "nullable": true
                                          },
                                          "diff": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "path",
                                          "operation"
                                        ]
                                      },
                                      "explanation": {
                                        "type": "string"
                                      },
                                      "status": {
                                        "type": "string",
                                        "enum": [
                                          "pending",
                                          "accepted",
                                          "rejected"
                                        ]
                                      },
                                      "reviewedAt": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "displayOrder": {
                                        "type": "number"
                                      },
                                      "createdAt": {
                                        "type": "string"
                                      },
                                      "problemIds": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "format": "uuid"
                                        }
                                      },
                                      "problems": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "id": {
                                              "type": "string"
                                            },
                                            "workspaceId": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "callId": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "agentId": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "problem": {
                                              "type": "string",
                                              "minLength": 1
                                            },
                                            "description": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "type": {
                                              "type": "string",
                                              "nullable": true,
                                              "enum": [
                                                "system",
                                                "audio",
                                                "transcription",
                                                "decision",
                                                "general",
                                                null
                                              ]
                                            },
                                            "severity": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 1,
                                              "default": 0.5
                                            },
                                            "status": {
                                              "type": "string",
                                              "default": "open"
                                            },
                                            "assignedTo": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "createdBy": {
                                              "type": "string",
                                              "default": "ai"
                                            },
                                            "messageId": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "resolved": {
                                              "type": "boolean",
                                              "default": false
                                            },
                                            "resolvedAt": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "resolvedBy": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "solutionId": {
                                              "type": "string",
                                              "nullable": true,
                                              "format": "uuid"
                                            },
                                            "createdAt": {
                                              "type": "string"
                                            },
                                            "updatedAt": {
                                              "type": "string"
                                            },
                                            "callStartedAt": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "customerNumber": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "agentName": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "resolvedByName": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "assignees": {
                                              "type": "array",
                                              "items": {
                                                "type": "object",
                                                "properties": {
                                                  "userId": {
                                                    "type": "string"
                                                  },
                                                  "userName": {
                                                    "type": "string",
                                                    "nullable": true
                                                  },
                                                  "assignedAt": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "userId",
                                                  "assignedAt"
                                                ]
                                              }
                                            },
                                            "commentsCount": {
                                              "type": "number"
                                            },
                                            "isArchived": {
                                              "type": "boolean",
                                              "default": false
                                            }
                                          },
                                          "required": [
                                            "problem"
                                          ]
                                        }
                                      },
                                      "patchDecisions": {
                                        "type": "object",
                                        "nullable": true,
                                        "additionalProperties": {
                                          "oneOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "pending"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "action"
                                              ]
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "accept"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "action"
                                              ]
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "reject"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "action"
                                              ]
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "edit"
                                                  ]
                                                },
                                                "editedLines": {
                                                  "type": "array",
                                                  "items": {
                                                    "type": "string"
                                                  }
                                                }
                                              },
                                              "required": [
                                                "action",
                                                "editedLines"
                                              ]
                                            }
                                          ]
                                        }
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "runId",
                                      "title",
                                      "change",
                                      "explanation",
                                      "status",
                                      "displayOrder",
                                      "createdAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "workspaceId",
                                "agentId",
                                "status",
                                "problemCount",
                                "solutionCount",
                                "acceptedCount",
                                "rejectedCount",
                                "createdAt"
                              ]
                            },
                            "canStartOptimization": {
                              "type": "boolean"
                            }
                          },
                          "required": [
                            "hasUnresolvedProblems",
                            "unresolvedProblemCount",
                            "currentRun",
                            "canStartOptimization"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/solutions/generate": {
      "post": {
        "summary": "Generate solutions",
        "description": "Generates AI solutions for unresolved problems. Optionally specify problem IDs to solve specific problems.",
        "tags": [
          "Solutions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "agentId": {
                    "type": "string",
                    "pattern": "^\\d+$"
                  },
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "problemIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    }
                  }
                },
                "required": [
                  "agentId",
                  "workspaceId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Solution generation started",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "run": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "agentId": {
                                  "type": "string"
                                },
                                "status": {
                                  "type": "string",
                                  "enum": [
                                    "generating",
                                    "pending_review",
                                    "completed",
                                    "failed"
                                  ]
                                },
                                "problemCount": {
                                  "type": "number"
                                },
                                "solutionCount": {
                                  "type": "number"
                                },
                                "acceptedCount": {
                                  "type": "number"
                                },
                                "rejectedCount": {
                                  "type": "number"
                                },
                                "error": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "completedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "solutions": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "runId": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "title": {
                                        "type": "string"
                                      },
                                      "change": {
                                        "type": "object",
                                        "properties": {
                                          "path": {
                                            "type": "string",
                                            "minLength": 1
                                          },
                                          "operation": {
                                            "type": "string",
                                            "enum": [
                                              "set",
                                              "text_diff"
                                            ]
                                          },
                                          "oldValue": {
                                            "nullable": true
                                          },
                                          "newValue": {
                                            "nullable": true
                                          },
                                          "diff": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "path",
                                          "operation"
                                        ]
                                      },
                                      "explanation": {
                                        "type": "string"
                                      },
                                      "status": {
                                        "type": "string",
                                        "enum": [
                                          "pending",
                                          "accepted",
                                          "rejected"
                                        ]
                                      },
                                      "reviewedAt": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "displayOrder": {
                                        "type": "number"
                                      },
                                      "createdAt": {
                                        "type": "string"
                                      },
                                      "problemIds": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "format": "uuid"
                                        }
                                      },
                                      "problems": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "id": {
                                              "type": "string"
                                            },
                                            "workspaceId": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "callId": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "agentId": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "problem": {
                                              "type": "string",
                                              "minLength": 1
                                            },
                                            "description": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "type": {
                                              "type": "string",
                                              "nullable": true,
                                              "enum": [
                                                "system",
                                                "audio",
                                                "transcription",
                                                "decision",
                                                "general",
                                                null
                                              ]
                                            },
                                            "severity": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 1,
                                              "default": 0.5
                                            },
                                            "status": {
                                              "type": "string",
                                              "default": "open"
                                            },
                                            "assignedTo": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "createdBy": {
                                              "type": "string",
                                              "default": "ai"
                                            },
                                            "messageId": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "resolved": {
                                              "type": "boolean",
                                              "default": false
                                            },
                                            "resolvedAt": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "resolvedBy": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "solutionId": {
                                              "type": "string",
                                              "nullable": true,
                                              "format": "uuid"
                                            },
                                            "createdAt": {
                                              "type": "string"
                                            },
                                            "updatedAt": {
                                              "type": "string"
                                            },
                                            "callStartedAt": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "customerNumber": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "agentName": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "resolvedByName": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "assignees": {
                                              "type": "array",
                                              "items": {
                                                "type": "object",
                                                "properties": {
                                                  "userId": {
                                                    "type": "string"
                                                  },
                                                  "userName": {
                                                    "type": "string",
                                                    "nullable": true
                                                  },
                                                  "assignedAt": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "userId",
                                                  "assignedAt"
                                                ]
                                              }
                                            },
                                            "commentsCount": {
                                              "type": "number"
                                            },
                                            "isArchived": {
                                              "type": "boolean",
                                              "default": false
                                            }
                                          },
                                          "required": [
                                            "problem"
                                          ]
                                        }
                                      },
                                      "patchDecisions": {
                                        "type": "object",
                                        "nullable": true,
                                        "additionalProperties": {
                                          "oneOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "pending"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "action"
                                              ]
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "accept"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "action"
                                              ]
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "reject"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "action"
                                              ]
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "edit"
                                                  ]
                                                },
                                                "editedLines": {
                                                  "type": "array",
                                                  "items": {
                                                    "type": "string"
                                                  }
                                                }
                                              },
                                              "required": [
                                                "action",
                                                "editedLines"
                                              ]
                                            }
                                          ]
                                        }
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "runId",
                                      "title",
                                      "change",
                                      "explanation",
                                      "status",
                                      "displayOrder",
                                      "createdAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "workspaceId",
                                "agentId",
                                "status",
                                "problemCount",
                                "solutionCount",
                                "acceptedCount",
                                "rejectedCount",
                                "createdAt"
                              ]
                            },
                            "error": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/solutions/runs": {
      "get": {
        "summary": "List optimization runs",
        "description": "Returns optimization runs for a workspace with pagination, sorting, and filtering.",
        "tags": [
          "Solution Runs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Maximum number of runs to return"
            },
            "required": false,
            "description": "Maximum number of runs to return",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Number of runs to skip for pagination"
            },
            "required": false,
            "description": "Number of runs to skip for pagination",
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "createdAt",
                "status",
                "problemCount",
                "solutionCount"
              ],
              "default": "createdAt",
              "description": "Field to sort by"
            },
            "required": false,
            "description": "Field to sort by",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc",
              "description": "Sort direction"
            },
            "required": false,
            "description": "Sort direction",
            "name": "sortOrder",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Search term to filter runs"
            },
            "required": false,
            "description": "Search term to filter runs",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Base64-encoded filter state for DataTable"
            },
            "required": false,
            "description": "Base64-encoded filter state for DataTable",
            "name": "filters",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Optimization runs with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "runs": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "workspaceId": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "agentId": {
                                    "type": "string"
                                  },
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "generating",
                                      "pending_review",
                                      "completed",
                                      "failed"
                                    ]
                                  },
                                  "problemCount": {
                                    "type": "number"
                                  },
                                  "solutionCount": {
                                    "type": "number"
                                  },
                                  "acceptedCount": {
                                    "type": "number"
                                  },
                                  "rejectedCount": {
                                    "type": "number"
                                  },
                                  "error": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "completedAt": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "solutions": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "id": {
                                          "type": "string",
                                          "format": "uuid"
                                        },
                                        "runId": {
                                          "type": "string",
                                          "format": "uuid"
                                        },
                                        "title": {
                                          "type": "string"
                                        },
                                        "change": {
                                          "type": "object",
                                          "properties": {
                                            "path": {
                                              "type": "string",
                                              "minLength": 1
                                            },
                                            "operation": {
                                              "type": "string",
                                              "enum": [
                                                "set",
                                                "text_diff"
                                              ]
                                            },
                                            "oldValue": {
                                              "nullable": true
                                            },
                                            "newValue": {
                                              "nullable": true
                                            },
                                            "diff": {
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "path",
                                            "operation"
                                          ]
                                        },
                                        "explanation": {
                                          "type": "string"
                                        },
                                        "status": {
                                          "type": "string",
                                          "enum": [
                                            "pending",
                                            "accepted",
                                            "rejected"
                                          ]
                                        },
                                        "reviewedAt": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "displayOrder": {
                                          "type": "number"
                                        },
                                        "createdAt": {
                                          "type": "string"
                                        },
                                        "problemIds": {
                                          "type": "array",
                                          "items": {
                                            "type": "string",
                                            "format": "uuid"
                                          }
                                        },
                                        "problems": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "id": {
                                                "type": "string"
                                              },
                                              "workspaceId": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "callId": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "agentId": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "problem": {
                                                "type": "string",
                                                "minLength": 1
                                              },
                                              "description": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "type": {
                                                "type": "string",
                                                "nullable": true,
                                                "enum": [
                                                  "system",
                                                  "audio",
                                                  "transcription",
                                                  "decision",
                                                  "general",
                                                  null
                                                ]
                                              },
                                              "severity": {
                                                "type": "number",
                                                "minimum": 0,
                                                "maximum": 1,
                                                "default": 0.5
                                              },
                                              "status": {
                                                "type": "string",
                                                "default": "open"
                                              },
                                              "assignedTo": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "createdBy": {
                                                "type": "string",
                                                "default": "ai"
                                              },
                                              "messageId": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "resolved": {
                                                "type": "boolean",
                                                "default": false
                                              },
                                              "resolvedAt": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "resolvedBy": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "solutionId": {
                                                "type": "string",
                                                "nullable": true,
                                                "format": "uuid"
                                              },
                                              "createdAt": {
                                                "type": "string"
                                              },
                                              "updatedAt": {
                                                "type": "string"
                                              },
                                              "callStartedAt": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "customerNumber": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "agentName": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "resolvedByName": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "assignees": {
                                                "type": "array",
                                                "items": {
                                                  "type": "object",
                                                  "properties": {
                                                    "userId": {
                                                      "type": "string"
                                                    },
                                                    "userName": {
                                                      "type": "string",
                                                      "nullable": true
                                                    },
                                                    "assignedAt": {
                                                      "type": "string"
                                                    }
                                                  },
                                                  "required": [
                                                    "userId",
                                                    "assignedAt"
                                                  ]
                                                }
                                              },
                                              "commentsCount": {
                                                "type": "number"
                                              },
                                              "isArchived": {
                                                "type": "boolean",
                                                "default": false
                                              }
                                            },
                                            "required": [
                                              "problem"
                                            ]
                                          }
                                        },
                                        "patchDecisions": {
                                          "type": "object",
                                          "nullable": true,
                                          "additionalProperties": {
                                            "oneOf": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "action": {
                                                    "type": "string",
                                                    "enum": [
                                                      "pending"
                                                    ]
                                                  }
                                                },
                                                "required": [
                                                  "action"
                                                ]
                                              },
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "action": {
                                                    "type": "string",
                                                    "enum": [
                                                      "accept"
                                                    ]
                                                  }
                                                },
                                                "required": [
                                                  "action"
                                                ]
                                              },
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "action": {
                                                    "type": "string",
                                                    "enum": [
                                                      "reject"
                                                    ]
                                                  }
                                                },
                                                "required": [
                                                  "action"
                                                ]
                                              },
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "action": {
                                                    "type": "string",
                                                    "enum": [
                                                      "edit"
                                                    ]
                                                  },
                                                  "editedLines": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string"
                                                    }
                                                  }
                                                },
                                                "required": [
                                                  "action",
                                                  "editedLines"
                                                ]
                                              }
                                            ]
                                          }
                                        }
                                      },
                                      "required": [
                                        "id",
                                        "runId",
                                        "title",
                                        "change",
                                        "explanation",
                                        "status",
                                        "displayOrder",
                                        "createdAt"
                                      ]
                                    }
                                  },
                                  "agentName": {
                                    "type": "string",
                                    "nullable": true
                                  }
                                },
                                "required": [
                                  "id",
                                  "workspaceId",
                                  "agentId",
                                  "status",
                                  "problemCount",
                                  "solutionCount",
                                  "acceptedCount",
                                  "rejectedCount",
                                  "createdAt"
                                ]
                              }
                            },
                            "pagination": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "number"
                                },
                                "limit": {
                                  "type": "number"
                                },
                                "offset": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "total",
                                "limit",
                                "offset"
                              ]
                            },
                            "summary": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "number"
                                },
                                "generating": {
                                  "type": "number"
                                },
                                "pendingReview": {
                                  "type": "number"
                                },
                                "completed": {
                                  "type": "number"
                                },
                                "failed": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "total",
                                "generating",
                                "pendingReview",
                                "completed",
                                "failed"
                              ]
                            }
                          },
                          "required": [
                            "runs",
                            "pagination",
                            "summary"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Bulk delete optimization runs",
        "tags": [
          "Solution Runs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Comma-separated run IDs to delete"
            },
            "required": true,
            "description": "Comma-separated run IDs to delete",
            "name": "runIds",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Deletion result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "deletedCount": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "success",
                            "deletedCount"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/solutions/run/{runId}": {
      "get": {
        "summary": "Get optimization run",
        "description": "Returns an optimization run with its solutions.",
        "tags": [
          "Solution Runs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "runId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Optimization run with solutions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "run": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "agentId": {
                                  "type": "string"
                                },
                                "status": {
                                  "type": "string",
                                  "enum": [
                                    "generating",
                                    "pending_review",
                                    "completed",
                                    "failed"
                                  ]
                                },
                                "problemCount": {
                                  "type": "number"
                                },
                                "solutionCount": {
                                  "type": "number"
                                },
                                "acceptedCount": {
                                  "type": "number"
                                },
                                "rejectedCount": {
                                  "type": "number"
                                },
                                "error": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "completedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "solutions": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "runId": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "title": {
                                        "type": "string"
                                      },
                                      "change": {
                                        "type": "object",
                                        "properties": {
                                          "path": {
                                            "type": "string",
                                            "minLength": 1
                                          },
                                          "operation": {
                                            "type": "string",
                                            "enum": [
                                              "set",
                                              "text_diff"
                                            ]
                                          },
                                          "oldValue": {
                                            "nullable": true
                                          },
                                          "newValue": {
                                            "nullable": true
                                          },
                                          "diff": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "path",
                                          "operation"
                                        ]
                                      },
                                      "explanation": {
                                        "type": "string"
                                      },
                                      "status": {
                                        "type": "string",
                                        "enum": [
                                          "pending",
                                          "accepted",
                                          "rejected"
                                        ]
                                      },
                                      "reviewedAt": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "displayOrder": {
                                        "type": "number"
                                      },
                                      "createdAt": {
                                        "type": "string"
                                      },
                                      "problemIds": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "format": "uuid"
                                        }
                                      },
                                      "problems": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "id": {
                                              "type": "string"
                                            },
                                            "workspaceId": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "callId": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "agentId": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "problem": {
                                              "type": "string",
                                              "minLength": 1
                                            },
                                            "description": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "type": {
                                              "type": "string",
                                              "nullable": true,
                                              "enum": [
                                                "system",
                                                "audio",
                                                "transcription",
                                                "decision",
                                                "general",
                                                null
                                              ]
                                            },
                                            "severity": {
                                              "type": "number",
                                              "minimum": 0,
                                              "maximum": 1,
                                              "default": 0.5
                                            },
                                            "status": {
                                              "type": "string",
                                              "default": "open"
                                            },
                                            "assignedTo": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "createdBy": {
                                              "type": "string",
                                              "default": "ai"
                                            },
                                            "messageId": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "resolved": {
                                              "type": "boolean",
                                              "default": false
                                            },
                                            "resolvedAt": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "resolvedBy": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "solutionId": {
                                              "type": "string",
                                              "nullable": true,
                                              "format": "uuid"
                                            },
                                            "createdAt": {
                                              "type": "string"
                                            },
                                            "updatedAt": {
                                              "type": "string"
                                            },
                                            "callStartedAt": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "customerNumber": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "agentName": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "resolvedByName": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "assignees": {
                                              "type": "array",
                                              "items": {
                                                "type": "object",
                                                "properties": {
                                                  "userId": {
                                                    "type": "string"
                                                  },
                                                  "userName": {
                                                    "type": "string",
                                                    "nullable": true
                                                  },
                                                  "assignedAt": {
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "userId",
                                                  "assignedAt"
                                                ]
                                              }
                                            },
                                            "commentsCount": {
                                              "type": "number"
                                            },
                                            "isArchived": {
                                              "type": "boolean",
                                              "default": false
                                            }
                                          },
                                          "required": [
                                            "problem"
                                          ]
                                        }
                                      },
                                      "patchDecisions": {
                                        "type": "object",
                                        "nullable": true,
                                        "additionalProperties": {
                                          "oneOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "pending"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "action"
                                              ]
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "accept"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "action"
                                              ]
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "reject"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "action"
                                              ]
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "action": {
                                                  "type": "string",
                                                  "enum": [
                                                    "edit"
                                                  ]
                                                },
                                                "editedLines": {
                                                  "type": "array",
                                                  "items": {
                                                    "type": "string"
                                                  }
                                                }
                                              },
                                              "required": [
                                                "action",
                                                "editedLines"
                                              ]
                                            }
                                          ]
                                        }
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "runId",
                                      "title",
                                      "change",
                                      "explanation",
                                      "status",
                                      "displayOrder",
                                      "createdAt"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "workspaceId",
                                "agentId",
                                "status",
                                "problemCount",
                                "solutionCount",
                                "acceptedCount",
                                "rejectedCount",
                                "createdAt"
                              ]
                            },
                            "solutions": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "runId": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "title": {
                                    "type": "string"
                                  },
                                  "change": {
                                    "type": "object",
                                    "properties": {
                                      "path": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "operation": {
                                        "type": "string",
                                        "enum": [
                                          "set",
                                          "text_diff"
                                        ]
                                      },
                                      "oldValue": {
                                        "nullable": true
                                      },
                                      "newValue": {
                                        "nullable": true
                                      },
                                      "diff": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "path",
                                      "operation"
                                    ]
                                  },
                                  "explanation": {
                                    "type": "string"
                                  },
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "pending",
                                      "accepted",
                                      "rejected"
                                    ]
                                  },
                                  "reviewedAt": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "displayOrder": {
                                    "type": "number"
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "problemIds": {
                                    "type": "array",
                                    "items": {
                                      "type": "string",
                                      "format": "uuid"
                                    }
                                  },
                                  "problems": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "id": {
                                          "type": "string"
                                        },
                                        "workspaceId": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "callId": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "agentId": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "problem": {
                                          "type": "string",
                                          "minLength": 1
                                        },
                                        "description": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "type": {
                                          "type": "string",
                                          "nullable": true,
                                          "enum": [
                                            "system",
                                            "audio",
                                            "transcription",
                                            "decision",
                                            "general",
                                            null
                                          ]
                                        },
                                        "severity": {
                                          "type": "number",
                                          "minimum": 0,
                                          "maximum": 1,
                                          "default": 0.5
                                        },
                                        "status": {
                                          "type": "string",
                                          "default": "open"
                                        },
                                        "assignedTo": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "createdBy": {
                                          "type": "string",
                                          "default": "ai"
                                        },
                                        "messageId": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "resolved": {
                                          "type": "boolean",
                                          "default": false
                                        },
                                        "resolvedAt": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "resolvedBy": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "solutionId": {
                                          "type": "string",
                                          "nullable": true,
                                          "format": "uuid"
                                        },
                                        "createdAt": {
                                          "type": "string"
                                        },
                                        "updatedAt": {
                                          "type": "string"
                                        },
                                        "callStartedAt": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "customerNumber": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "agentName": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "resolvedByName": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "assignees": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "userId": {
                                                "type": "string"
                                              },
                                              "userName": {
                                                "type": "string",
                                                "nullable": true
                                              },
                                              "assignedAt": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "userId",
                                              "assignedAt"
                                            ]
                                          }
                                        },
                                        "commentsCount": {
                                          "type": "number"
                                        },
                                        "isArchived": {
                                          "type": "boolean",
                                          "default": false
                                        }
                                      },
                                      "required": [
                                        "problem"
                                      ]
                                    }
                                  },
                                  "patchDecisions": {
                                    "type": "object",
                                    "nullable": true,
                                    "additionalProperties": {
                                      "oneOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "action": {
                                              "type": "string",
                                              "enum": [
                                                "pending"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "action"
                                          ]
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "action": {
                                              "type": "string",
                                              "enum": [
                                                "accept"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "action"
                                          ]
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "action": {
                                              "type": "string",
                                              "enum": [
                                                "reject"
                                              ]
                                            }
                                          },
                                          "required": [
                                            "action"
                                          ]
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "action": {
                                              "type": "string",
                                              "enum": [
                                                "edit"
                                              ]
                                            },
                                            "editedLines": {
                                              "type": "array",
                                              "items": {
                                                "type": "string"
                                              }
                                            }
                                          },
                                          "required": [
                                            "action",
                                            "editedLines"
                                          ]
                                        }
                                      ]
                                    }
                                  }
                                },
                                "required": [
                                  "id",
                                  "runId",
                                  "title",
                                  "change",
                                  "explanation",
                                  "status",
                                  "displayOrder",
                                  "createdAt"
                                ]
                              }
                            }
                          },
                          "required": [
                            "run",
                            "solutions"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Run not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete optimization run",
        "tags": [
          "Solution Runs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "runId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Run deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "error": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Run not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/solutions/run/{runId}/cancel": {
      "delete": {
        "summary": "Cancel optimization run",
        "description": "Cancels a running optimization (sets status to failed).",
        "tags": [
          "Solution Runs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "runId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Run cancelled",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "error": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Run not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/solutions/{solutionId}": {
      "patch": {
        "summary": "Review solution (deprecated)",
        "description": "Accept or reject a single solution. Use batch review instead for better performance.",
        "tags": [
          "Solution Review"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "required": true,
            "name": "solutionId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "action": {
                    "type": "string",
                    "enum": [
                      "accept",
                      "reject"
                    ]
                  }
                },
                "required": [
                  "workspaceId",
                  "action"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Solution reviewed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "solution": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "runId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "title": {
                                  "type": "string"
                                },
                                "change": {
                                  "type": "object",
                                  "properties": {
                                    "path": {
                                      "type": "string",
                                      "minLength": 1
                                    },
                                    "operation": {
                                      "type": "string",
                                      "enum": [
                                        "set",
                                        "text_diff"
                                      ]
                                    },
                                    "oldValue": {
                                      "nullable": true
                                    },
                                    "newValue": {
                                      "nullable": true
                                    },
                                    "diff": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "path",
                                    "operation"
                                  ]
                                },
                                "explanation": {
                                  "type": "string"
                                },
                                "status": {
                                  "type": "string",
                                  "enum": [
                                    "pending",
                                    "accepted",
                                    "rejected"
                                  ]
                                },
                                "reviewedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "displayOrder": {
                                  "type": "number"
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "problemIds": {
                                  "type": "array",
                                  "items": {
                                    "type": "string",
                                    "format": "uuid"
                                  }
                                },
                                "problems": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "workspaceId": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "callId": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "agentId": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "problem": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "description": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "type": {
                                        "type": "string",
                                        "nullable": true,
                                        "enum": [
                                          "system",
                                          "audio",
                                          "transcription",
                                          "decision",
                                          "general",
                                          null
                                        ]
                                      },
                                      "severity": {
                                        "type": "number",
                                        "minimum": 0,
                                        "maximum": 1,
                                        "default": 0.5
                                      },
                                      "status": {
                                        "type": "string",
                                        "default": "open"
                                      },
                                      "assignedTo": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "createdBy": {
                                        "type": "string",
                                        "default": "ai"
                                      },
                                      "messageId": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "resolved": {
                                        "type": "boolean",
                                        "default": false
                                      },
                                      "resolvedAt": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "resolvedBy": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "solutionId": {
                                        "type": "string",
                                        "nullable": true,
                                        "format": "uuid"
                                      },
                                      "createdAt": {
                                        "type": "string"
                                      },
                                      "updatedAt": {
                                        "type": "string"
                                      },
                                      "callStartedAt": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "customerNumber": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "agentName": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "resolvedByName": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "assignees": {
                                        "type": "array",
                                        "items": {
                                          "type": "object",
                                          "properties": {
                                            "userId": {
                                              "type": "string"
                                            },
                                            "userName": {
                                              "type": "string",
                                              "nullable": true
                                            },
                                            "assignedAt": {
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "userId",
                                            "assignedAt"
                                          ]
                                        }
                                      },
                                      "commentsCount": {
                                        "type": "number"
                                      },
                                      "isArchived": {
                                        "type": "boolean",
                                        "default": false
                                      }
                                    },
                                    "required": [
                                      "problem"
                                    ]
                                  }
                                },
                                "patchDecisions": {
                                  "type": "object",
                                  "nullable": true,
                                  "additionalProperties": {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "action": {
                                            "type": "string",
                                            "enum": [
                                              "pending"
                                            ]
                                          }
                                        },
                                        "required": [
                                          "action"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "action": {
                                            "type": "string",
                                            "enum": [
                                              "accept"
                                            ]
                                          }
                                        },
                                        "required": [
                                          "action"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "action": {
                                            "type": "string",
                                            "enum": [
                                              "reject"
                                            ]
                                          }
                                        },
                                        "required": [
                                          "action"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "action": {
                                            "type": "string",
                                            "enum": [
                                              "edit"
                                            ]
                                          },
                                          "editedLines": {
                                            "type": "array",
                                            "items": {
                                              "type": "string"
                                            }
                                          }
                                        },
                                        "required": [
                                          "action",
                                          "editedLines"
                                        ]
                                      }
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "id",
                                "runId",
                                "title",
                                "change",
                                "explanation",
                                "status",
                                "displayOrder",
                                "createdAt"
                              ]
                            },
                            "updatedConfig": {
                              "nullable": true
                            },
                            "runCompleted": {
                              "type": "boolean"
                            },
                            "error": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success",
                            "runCompleted"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Solution not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/solutions/review": {
      "post": {
        "summary": "Batch review solutions",
        "description": "Accept or reject multiple solutions at once. Supports editing values and patch decisions for text_diff operations.",
        "tags": [
          "Solution Review"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "runId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "decisions": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "solutionId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "action": {
                          "type": "string",
                          "enum": [
                            "accept",
                            "reject"
                          ]
                        },
                        "editedValue": {
                          "nullable": true
                        },
                        "patchDecisions": {
                          "type": "object",
                          "additionalProperties": {
                            "oneOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "action": {
                                    "type": "string",
                                    "enum": [
                                      "pending"
                                    ]
                                  }
                                },
                                "required": [
                                  "action"
                                ]
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "action": {
                                    "type": "string",
                                    "enum": [
                                      "accept"
                                    ]
                                  }
                                },
                                "required": [
                                  "action"
                                ]
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "action": {
                                    "type": "string",
                                    "enum": [
                                      "reject"
                                    ]
                                  }
                                },
                                "required": [
                                  "action"
                                ]
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "action": {
                                    "type": "string",
                                    "enum": [
                                      "edit"
                                    ]
                                  },
                                  "editedLines": {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                },
                                "required": [
                                  "action",
                                  "editedLines"
                                ]
                              }
                            ]
                          }
                        }
                      },
                      "required": [
                        "solutionId",
                        "action"
                      ]
                    }
                  }
                },
                "required": [
                  "runId",
                  "workspaceId",
                  "decisions"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Solutions reviewed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "acceptedCount": {
                              "type": "number"
                            },
                            "rejectedCount": {
                              "type": "number"
                            },
                            "runCompleted": {
                              "type": "boolean"
                            },
                            "error": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success",
                            "acceptedCount",
                            "rejectedCount",
                            "runCompleted"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api-keys": {
      "get": {
        "summary": "List API keys",
        "description": "Returns all API keys for a workspace.",
        "tags": [
          "API Keys"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "API keys list",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "apiKeys": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "key": {
                                    "type": "string"
                                  },
                                  "workspaceId": {
                                    "type": "string"
                                  },
                                  "userId": {
                                    "type": "string"
                                  },
                                  "name": {
                                    "type": "string"
                                  },
                                  "isActive": {
                                    "type": "boolean"
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "lastUsedAt": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "expiresAt": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "rateLimit": {
                                    "type": "object",
                                    "properties": {
                                      "requestsPerMinute": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "exclusiveMinimum": true
                                      },
                                      "requestsPerDay": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "exclusiveMinimum": true
                                      }
                                    },
                                    "required": [
                                      "requestsPerMinute",
                                      "requestsPerDay"
                                    ]
                                  },
                                  "creator": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "email": {
                                        "type": "string",
                                        "nullable": true,
                                        "format": "email"
                                      },
                                      "displayName": {
                                        "type": "string",
                                        "nullable": true
                                      }
                                    },
                                    "required": [
                                      "id"
                                    ]
                                  }
                                },
                                "required": [
                                  "id",
                                  "key",
                                  "workspaceId",
                                  "userId",
                                  "name",
                                  "isActive",
                                  "createdAt"
                                ]
                              }
                            }
                          },
                          "required": [
                            "apiKeys"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create API key",
        "description": "Creates a new API key. The key value is only returned in this response.",
        "tags": [
          "API Keys"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Name for the API key"
                  },
                  "workspaceId": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Workspace ID"
                  },
                  "userId": {
                    "type": "string",
                    "minLength": 1,
                    "description": "User ID creating the key"
                  },
                  "expiresAt": {
                    "type": "string",
                    "description": "Expiration date (ISO format)"
                  },
                  "rateLimit": {
                    "type": "object",
                    "properties": {
                      "requestsPerMinute": {
                        "type": "integer",
                        "minimum": 0,
                        "exclusiveMinimum": true
                      },
                      "requestsPerDay": {
                        "type": "integer",
                        "minimum": 0,
                        "exclusiveMinimum": true
                      }
                    },
                    "required": [
                      "requestsPerMinute",
                      "requestsPerDay"
                    ],
                    "description": "Rate limit configuration"
                  }
                },
                "required": [
                  "name",
                  "workspaceId",
                  "userId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "API key created (includes the key value)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "apiKey": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "key": {
                                  "type": "string"
                                },
                                "workspaceId": {
                                  "type": "string"
                                },
                                "userId": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "isActive": {
                                  "type": "boolean"
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "lastUsedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "expiresAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "rateLimit": {
                                  "type": "object",
                                  "properties": {
                                    "requestsPerMinute": {
                                      "type": "integer",
                                      "minimum": 0,
                                      "exclusiveMinimum": true
                                    },
                                    "requestsPerDay": {
                                      "type": "integer",
                                      "minimum": 0,
                                      "exclusiveMinimum": true
                                    }
                                  },
                                  "required": [
                                    "requestsPerMinute",
                                    "requestsPerDay"
                                  ]
                                },
                                "creator": {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "string"
                                    },
                                    "email": {
                                      "type": "string",
                                      "nullable": true,
                                      "format": "email"
                                    },
                                    "displayName": {
                                      "type": "string",
                                      "nullable": true
                                    }
                                  },
                                  "required": [
                                    "id"
                                  ]
                                }
                              },
                              "required": [
                                "id",
                                "key",
                                "workspaceId",
                                "userId",
                                "name",
                                "isActive",
                                "createdAt"
                              ]
                            },
                            "key": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "apiKey",
                            "key"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update API keys",
        "description": "Updates one or more API keys (name, active status, expiration, rate limits).",
        "tags": [
          "API Keys"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "apiKeys": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "minLength": 1,
                          "description": "API key ID"
                        },
                        "name": {
                          "type": "string",
                          "description": "New name for the API key"
                        },
                        "isActive": {
                          "type": "boolean",
                          "description": "Whether the key is active"
                        },
                        "expiresAt": {
                          "type": "string",
                          "description": "Expiration date (ISO format)"
                        },
                        "rateLimit": {
                          "type": "object",
                          "properties": {
                            "requestsPerMinute": {
                              "type": "integer",
                              "minimum": 0,
                              "exclusiveMinimum": true
                            },
                            "requestsPerDay": {
                              "type": "integer",
                              "minimum": 0,
                              "exclusiveMinimum": true
                            }
                          },
                          "required": [
                            "requestsPerMinute",
                            "requestsPerDay"
                          ],
                          "description": "Rate limit configuration"
                        }
                      },
                      "required": [
                        "id"
                      ]
                    }
                  }
                },
                "required": [
                  "apiKeys"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "API keys updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "updated": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "key": {
                                    "type": "string"
                                  },
                                  "workspaceId": {
                                    "type": "string"
                                  },
                                  "userId": {
                                    "type": "string"
                                  },
                                  "name": {
                                    "type": "string"
                                  },
                                  "isActive": {
                                    "type": "boolean"
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "lastUsedAt": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "expiresAt": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "rateLimit": {
                                    "type": "object",
                                    "properties": {
                                      "requestsPerMinute": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "exclusiveMinimum": true
                                      },
                                      "requestsPerDay": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "exclusiveMinimum": true
                                      }
                                    },
                                    "required": [
                                      "requestsPerMinute",
                                      "requestsPerDay"
                                    ]
                                  },
                                  "creator": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "email": {
                                        "type": "string",
                                        "nullable": true,
                                        "format": "email"
                                      },
                                      "displayName": {
                                        "type": "string",
                                        "nullable": true
                                      }
                                    },
                                    "required": [
                                      "id"
                                    ]
                                  }
                                },
                                "required": [
                                  "id",
                                  "key",
                                  "workspaceId",
                                  "userId",
                                  "name",
                                  "isActive",
                                  "createdAt"
                                ]
                              }
                            },
                            "errors": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "error": {
                                    "type": "string"
                                  },
                                  "details": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "field": {
                                          "type": "string"
                                        },
                                        "message": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "field",
                                        "message"
                                      ]
                                    }
                                  }
                                },
                                "required": [
                                  "id",
                                  "error"
                                ]
                              }
                            }
                          },
                          "required": [
                            "updated"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete API keys",
        "description": "Deletes one or more API keys.",
        "tags": [
          "API Keys"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Comma-separated API key IDs to delete"
            },
            "required": true,
            "description": "Comma-separated API key IDs to delete",
            "name": "apiKeyIds",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "API keys deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "deletedCount": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "success",
                            "deletedCount"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/analytics": {
      "get": {
        "summary": "Get analytics",
        "description": "Returns call analytics for a workspace including summary statistics, time series data, ended reasons, top locations, sentiment distribution, and more.\n\n**Available Metrics:**\n- `summary`: Total calls, answered calls, voicemail, durations, answer rate\n- `timeSeries`: Call volume over time with configurable granularity\n- `endedReasons`: Distribution of call end reasons\n- `topLocations`: Most common caller locations\n- `topCalls`: Longest or most recent calls\n- `geoDistribution`: Geographic distribution by country and state\n- `callThemes`: Common topics from call analysis\n- `sentimentDistribution`: Customer sentiment breakdown",
        "tags": [
          "Analytics"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Start date for analytics period (ISO format)"
            },
            "required": false,
            "description": "Start date for analytics period (ISO format)",
            "name": "startDate",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "End date for analytics period (ISO format)"
            },
            "required": false,
            "description": "End date for analytics period (ISO format)",
            "name": "endDate",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Filter by phone number ID"
            },
            "required": false,
            "description": "Filter by phone number ID",
            "name": "phoneNumberId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "pattern": "^\\d+$",
              "description": "Filter by assistant/agent ID (bigint as string)"
            },
            "required": false,
            "description": "Filter by assistant/agent ID (bigint as string)",
            "name": "assistantId",
            "in": "query"
          },
          {
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "pattern": "^\\d+$"
              },
              "description": "Filter by multiple assistant IDs (JSON array)"
            },
            "required": false,
            "description": "Filter by multiple assistant IDs (JSON array)",
            "name": "assistantIds",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "hour",
                "day",
                "month"
              ],
              "description": "Time series granularity: hour, day, or month"
            },
            "required": false,
            "description": "Time series granularity: hour, day, or month",
            "name": "granularity",
            "in": "query"
          },
          {
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "summary",
                  "timeSeries",
                  "endedReasons",
                  "topLocations",
                  "topCalls",
                  "geoDistribution",
                  "callThemes",
                  "sentimentDistribution"
                ]
              },
              "description": "Specific metrics to return (JSON array)"
            },
            "required": false,
            "description": "Specific metrics to return (JSON array)",
            "name": "metrics",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 2,
              "maxLength": 64,
              "description": "IANA timezone for date calculations"
            },
            "required": false,
            "description": "IANA timezone for date calculations",
            "name": "timezone",
            "in": "query"
          },
          {
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1
              },
              "description": "Filter by call status (JSON array)"
            },
            "required": false,
            "description": "Filter by call status (JSON array)",
            "name": "status",
            "in": "query"
          },
          {
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1
              },
              "description": "Filter by call type: inbound, outbound, web (JSON array)"
            },
            "required": false,
            "description": "Filter by call type: inbound, outbound, web (JSON array)",
            "name": "callType",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Analytics data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "workspaceId": {
                              "type": "string"
                            },
                            "timeRange": {
                              "type": "object",
                              "properties": {
                                "start": {
                                  "type": "string"
                                },
                                "end": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "start",
                                "end"
                              ]
                            },
                            "granularity": {
                              "type": "string",
                              "enum": [
                                "hour",
                                "day",
                                "month"
                              ]
                            },
                            "summary": {
                              "type": "object",
                              "properties": {
                                "totalCalls": {
                                  "type": "number"
                                },
                                "answeredCalls": {
                                  "type": "number"
                                },
                                "voicemailCalls": {
                                  "type": "number"
                                },
                                "totalDurationSec": {
                                  "type": "number"
                                },
                                "averageDurationSec": {
                                  "type": "number"
                                },
                                "answerRate": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "totalCalls",
                                "answeredCalls",
                                "voicemailCalls",
                                "totalDurationSec",
                                "averageDurationSec",
                                "answerRate"
                              ]
                            },
                            "timeSeries": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "date": {
                                    "type": "string"
                                  },
                                  "totalCalls": {
                                    "type": "number"
                                  },
                                  "answeredCalls": {
                                    "type": "number"
                                  },
                                  "averageDurationSec": {
                                    "type": "number"
                                  },
                                  "sentimentCounts": {
                                    "type": "object",
                                    "properties": {
                                      "very-unhappy": {
                                        "type": "number"
                                      },
                                      "unhappy": {
                                        "type": "number"
                                      },
                                      "neutral": {
                                        "type": "number"
                                      },
                                      "happy": {
                                        "type": "number"
                                      },
                                      "very-happy": {
                                        "type": "number"
                                      }
                                    },
                                    "required": [
                                      "very-unhappy",
                                      "unhappy",
                                      "neutral",
                                      "happy",
                                      "very-happy"
                                    ]
                                  }
                                },
                                "required": [
                                  "date",
                                  "totalCalls",
                                  "answeredCalls",
                                  "averageDurationSec"
                                ]
                              }
                            },
                            "endedReasons": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "reason": {
                                    "type": "string"
                                  },
                                  "count": {
                                    "type": "number"
                                  }
                                },
                                "required": [
                                  "reason",
                                  "count"
                                ]
                              }
                            },
                            "topLocations": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "locale": {
                                    "type": "string"
                                  },
                                  "callCount": {
                                    "type": "number"
                                  }
                                },
                                "required": [
                                  "locale",
                                  "callCount"
                                ]
                              }
                            },
                            "topCalls": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "callId": {
                                    "type": "string"
                                  },
                                  "customerNumber": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "durationSec": {
                                    "type": "number"
                                  },
                                  "startedAt": {
                                    "type": "string"
                                  },
                                  "status": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "endedReason": {
                                    "type": "string",
                                    "nullable": true
                                  }
                                },
                                "required": [
                                  "callId",
                                  "customerNumber",
                                  "durationSec",
                                  "startedAt",
                                  "status",
                                  "endedReason"
                                ]
                              }
                            },
                            "geoDistribution": {
                              "type": "object",
                              "properties": {
                                "countries": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "countryCode": {
                                        "type": "string"
                                      },
                                      "countryName": {
                                        "type": "string"
                                      },
                                      "callCount": {
                                        "type": "number"
                                      }
                                    },
                                    "required": [
                                      "countryCode",
                                      "countryName",
                                      "callCount"
                                    ]
                                  }
                                },
                                "states": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "countryCode": {
                                        "type": "string"
                                      },
                                      "countryName": {
                                        "type": "string"
                                      },
                                      "stateCode": {
                                        "type": "string"
                                      },
                                      "stateName": {
                                        "type": "string"
                                      },
                                      "callCount": {
                                        "type": "number"
                                      }
                                    },
                                    "required": [
                                      "countryCode",
                                      "countryName",
                                      "stateCode",
                                      "stateName",
                                      "callCount"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "countries",
                                "states"
                              ]
                            },
                            "callThemes": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "theme": {
                                    "type": "string"
                                  },
                                  "count": {
                                    "type": "number"
                                  }
                                },
                                "required": [
                                  "theme",
                                  "count"
                                ]
                              }
                            },
                            "sentimentDistribution": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "bucket": {
                                    "type": "string",
                                    "enum": [
                                      "very-unhappy",
                                      "unhappy",
                                      "neutral",
                                      "happy",
                                      "very-happy"
                                    ]
                                  },
                                  "count": {
                                    "type": "number"
                                  }
                                },
                                "required": [
                                  "bucket",
                                  "count"
                                ]
                              }
                            },
                            "generatedAt": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "workspaceId",
                            "timeRange",
                            "granularity",
                            "generatedAt"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/analytics/credits": {
      "get": {
        "summary": "Get credits analytics",
        "description": "Returns credit usage analytics for a workspace including daily breakdown and totals.",
        "tags": [
          "Analytics"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Start date for credits period (ISO format)"
            },
            "required": false,
            "description": "Start date for credits period (ISO format)",
            "name": "startDate",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "End date for credits period (ISO format)"
            },
            "required": false,
            "description": "End date for credits period (ISO format)",
            "name": "endDate",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Credits analytics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "creditsData": {
                              "type": "object",
                              "properties": {
                                "dailyCredits": {
                                  "type": "object",
                                  "additionalProperties": {
                                    "type": "number"
                                  }
                                },
                                "totalTransactions": {
                                  "type": "number"
                                },
                                "totalCreditsUsed": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "dailyCredits",
                                "totalTransactions",
                                "totalCreditsUsed"
                              ]
                            }
                          },
                          "required": [
                            "creditsData"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/phone-numbers": {
      "get": {
        "summary": "List phone numbers",
        "description": "Returns phone numbers for a workspace with pagination, filtering, and optional counts by column.",
        "tags": [
          "Phone Numbers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "25",
              "description": "Page size"
            },
            "required": false,
            "description": "Page size",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "default": "0",
              "description": "Offset for pagination"
            },
            "required": false,
            "description": "Offset for pagination",
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Base64-encoded filter state"
            },
            "required": false,
            "description": "Base64-encoded filter state",
            "name": "filters",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Global search term"
            },
            "required": false,
            "description": "Global search term",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Sort field name"
            },
            "required": false,
            "description": "Sort field name",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "description": "Sort direction"
            },
            "required": false,
            "description": "Sort direction",
            "name": "sortOrder",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Set to 'true' to return a file export"
            },
            "required": false,
            "description": "Set to 'true' to return a file export",
            "name": "export",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "csv",
                "xlsx",
                "markdown"
              ],
              "description": "Export file format"
            },
            "required": false,
            "description": "Export file format",
            "name": "exportFormat",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "JSON array of column definitions {id,label}"
            },
            "required": false,
            "description": "JSON array of column definitions {id,label}",
            "name": "exportColumns",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Column ID to return counts for (e.g., 'configType')"
            },
            "required": false,
            "description": "Column ID to return counts for (e.g., 'configType')",
            "name": "countBy",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Phone numbers with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "phoneNumbers": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "number": {
                                    "type": "string"
                                  },
                                  "friendlyName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "workspaceId": {
                                    "type": "string"
                                  },
                                  "userId": {
                                    "type": "string"
                                  },
                                  "config": {
                                    "type": "object",
                                    "nullable": true,
                                    "properties": {
                                      "capabilities": {
                                        "type": "object",
                                        "properties": {
                                          "voice": {
                                            "type": "string"
                                          },
                                          "sms": {
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      "voiceConfig": {
                                        "type": "string"
                                      },
                                      "messagingConfig": {
                                        "type": "string"
                                      },
                                      "emergencyCalls": {
                                        "type": "boolean"
                                      },
                                      "configType": {
                                        "type": "string",
                                        "enum": [
                                          "agents",
                                          "workflows"
                                        ]
                                      },
                                      "inboundAgentId": {
                                        "type": "string"
                                      },
                                      "outboundAgentId": {
                                        "type": "string"
                                      },
                                      "inboundWorkflowId": {
                                        "type": "string"
                                      },
                                      "outboundWorkflowId": {
                                        "type": "string"
                                      },
                                      "originationUri": {
                                        "type": "string"
                                      },
                                      "sipInbound": {
                                        "type": "object",
                                        "properties": {
                                          "enabled": {
                                            "type": "boolean"
                                          }
                                        },
                                        "required": [
                                          "enabled"
                                        ]
                                      },
                                      "sipOutbound": {
                                        "type": "object",
                                        "properties": {
                                          "enabled": {
                                            "type": "boolean"
                                          },
                                          "endpoint": {
                                            "type": "string"
                                          },
                                          "port": {
                                            "type": "number"
                                          },
                                          "username": {
                                            "type": "string"
                                          },
                                          "password": {
                                            "type": "string"
                                          },
                                          "transportProtocol": {
                                            "type": "string",
                                            "enum": [
                                              "UDP",
                                              "TCP",
                                              "TLS"
                                            ]
                                          },
                                          "secureMedia": {
                                            "type": "boolean"
                                          },
                                          "headers": {
                                            "type": "array",
                                            "items": {
                                              "type": "object",
                                              "properties": {
                                                "key": {
                                                  "type": "string"
                                                },
                                                "value": {
                                                  "type": "string"
                                                }
                                              },
                                              "required": [
                                                "key",
                                                "value"
                                              ]
                                            }
                                          }
                                        },
                                        "required": [
                                          "enabled"
                                        ]
                                      }
                                    },
                                    "additionalProperties": {
                                      "nullable": true
                                    }
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "updatedAt": {
                                    "type": "string"
                                  },
                                  "inboundAgentName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "outboundAgentName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "inboundWorkflowName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "outboundWorkflowName": {
                                    "type": "string",
                                    "nullable": true
                                  }
                                },
                                "required": [
                                  "id",
                                  "number",
                                  "workspaceId",
                                  "userId",
                                  "createdAt",
                                  "updatedAt"
                                ]
                              }
                            },
                            "pagination": {
                              "type": "object",
                              "properties": {
                                "total": {
                                  "type": "number"
                                },
                                "limit": {
                                  "type": "number"
                                },
                                "offset": {
                                  "type": "number"
                                },
                                "hasNext": {
                                  "type": "boolean"
                                },
                                "hasPrevious": {
                                  "type": "boolean"
                                }
                              },
                              "required": [
                                "total",
                                "limit",
                                "offset",
                                "hasNext",
                                "hasPrevious"
                              ]
                            },
                            "counts": {
                              "type": "object",
                              "additionalProperties": {
                                "type": "number"
                              }
                            }
                          },
                          "required": [
                            "phoneNumbers",
                            "pagination"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create phone number",
        "description": "Registers a new phone number with optional agent/workflow configuration for inbound and outbound calls.",
        "tags": [
          "Phone Numbers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "number": {
                    "type": "string",
                    "minLength": 1
                  },
                  "friendlyName": {
                    "type": "string"
                  },
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "userId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "config": {
                    "type": "object",
                    "properties": {
                      "capabilities": {
                        "type": "object",
                        "properties": {
                          "voice": {
                            "type": "string"
                          },
                          "sms": {
                            "type": "boolean"
                          }
                        }
                      },
                      "voiceConfig": {
                        "type": "string"
                      },
                      "messagingConfig": {
                        "type": "string"
                      },
                      "emergencyCalls": {
                        "type": "boolean"
                      },
                      "configType": {
                        "type": "string",
                        "enum": [
                          "agents",
                          "workflows"
                        ]
                      },
                      "inboundAgentId": {
                        "type": "string"
                      },
                      "outboundAgentId": {
                        "type": "string"
                      },
                      "inboundWorkflowId": {
                        "type": "string"
                      },
                      "outboundWorkflowId": {
                        "type": "string"
                      },
                      "originationUri": {
                        "type": "string"
                      },
                      "sipInbound": {
                        "type": "object",
                        "properties": {
                          "enabled": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "enabled"
                        ]
                      },
                      "sipOutbound": {
                        "type": "object",
                        "properties": {
                          "enabled": {
                            "type": "boolean"
                          },
                          "endpoint": {
                            "type": "string"
                          },
                          "port": {
                            "type": "number"
                          },
                          "username": {
                            "type": "string"
                          },
                          "password": {
                            "type": "string"
                          },
                          "transportProtocol": {
                            "type": "string",
                            "enum": [
                              "UDP",
                              "TCP",
                              "TLS"
                            ]
                          },
                          "secureMedia": {
                            "type": "boolean"
                          },
                          "headers": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "key": {
                                  "type": "string"
                                },
                                "value": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "key",
                                "value"
                              ]
                            }
                          }
                        },
                        "required": [
                          "enabled"
                        ]
                      }
                    },
                    "additionalProperties": {
                      "nullable": true
                    }
                  }
                },
                "required": [
                  "number",
                  "workspaceId",
                  "userId"
                ]
              },
              "example": {
                "number": "+14155551234",
                "friendlyName": "Main Support Line",
                "workspaceId": "550e8400-e29b-41d4-a716-446655440000",
                "userId": "user_abc123",
                "config": {
                  "configType": "agents",
                  "inboundAgentId": "agent_inbound123",
                  "outboundAgentId": "agent_outbound456"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Phone number created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "phoneNumber": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "number": {
                                  "type": "string"
                                },
                                "friendlyName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "workspaceId": {
                                  "type": "string"
                                },
                                "userId": {
                                  "type": "string"
                                },
                                "config": {
                                  "type": "object",
                                  "nullable": true,
                                  "properties": {
                                    "capabilities": {
                                      "type": "object",
                                      "properties": {
                                        "voice": {
                                          "type": "string"
                                        },
                                        "sms": {
                                          "type": "boolean"
                                        }
                                      }
                                    },
                                    "voiceConfig": {
                                      "type": "string"
                                    },
                                    "messagingConfig": {
                                      "type": "string"
                                    },
                                    "emergencyCalls": {
                                      "type": "boolean"
                                    },
                                    "configType": {
                                      "type": "string",
                                      "enum": [
                                        "agents",
                                        "workflows"
                                      ]
                                    },
                                    "inboundAgentId": {
                                      "type": "string"
                                    },
                                    "outboundAgentId": {
                                      "type": "string"
                                    },
                                    "inboundWorkflowId": {
                                      "type": "string"
                                    },
                                    "outboundWorkflowId": {
                                      "type": "string"
                                    },
                                    "originationUri": {
                                      "type": "string"
                                    },
                                    "sipInbound": {
                                      "type": "object",
                                      "properties": {
                                        "enabled": {
                                          "type": "boolean"
                                        }
                                      },
                                      "required": [
                                        "enabled"
                                      ]
                                    },
                                    "sipOutbound": {
                                      "type": "object",
                                      "properties": {
                                        "enabled": {
                                          "type": "boolean"
                                        },
                                        "endpoint": {
                                          "type": "string"
                                        },
                                        "port": {
                                          "type": "number"
                                        },
                                        "username": {
                                          "type": "string"
                                        },
                                        "password": {
                                          "type": "string"
                                        },
                                        "transportProtocol": {
                                          "type": "string",
                                          "enum": [
                                            "UDP",
                                            "TCP",
                                            "TLS"
                                          ]
                                        },
                                        "secureMedia": {
                                          "type": "boolean"
                                        },
                                        "headers": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "key": {
                                                "type": "string"
                                              },
                                              "value": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "key",
                                              "value"
                                            ]
                                          }
                                        }
                                      },
                                      "required": [
                                        "enabled"
                                      ]
                                    }
                                  },
                                  "additionalProperties": {
                                    "nullable": true
                                  }
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "inboundAgentName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "outboundAgentName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "inboundWorkflowName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "outboundWorkflowName": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "id",
                                "number",
                                "workspaceId",
                                "userId",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "phoneNumber"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update phone numbers",
        "description": "Updates one or more phone numbers. Returns updated records and any validation errors.",
        "tags": [
          "Phone Numbers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "phoneNumbers": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "minLength": 1
                        },
                        "number": {
                          "type": "string"
                        },
                        "friendlyName": {
                          "type": "string"
                        },
                        "config": {
                          "type": "object",
                          "properties": {
                            "capabilities": {
                              "type": "object",
                              "properties": {
                                "voice": {
                                  "type": "string"
                                },
                                "sms": {
                                  "type": "boolean"
                                }
                              }
                            },
                            "voiceConfig": {
                              "type": "string"
                            },
                            "messagingConfig": {
                              "type": "string"
                            },
                            "emergencyCalls": {
                              "type": "boolean"
                            },
                            "configType": {
                              "type": "string",
                              "enum": [
                                "agents",
                                "workflows"
                              ]
                            },
                            "inboundAgentId": {
                              "type": "string"
                            },
                            "outboundAgentId": {
                              "type": "string"
                            },
                            "inboundWorkflowId": {
                              "type": "string"
                            },
                            "outboundWorkflowId": {
                              "type": "string"
                            },
                            "originationUri": {
                              "type": "string"
                            },
                            "sipInbound": {
                              "type": "object",
                              "properties": {
                                "enabled": {
                                  "type": "boolean"
                                }
                              },
                              "required": [
                                "enabled"
                              ]
                            },
                            "sipOutbound": {
                              "type": "object",
                              "properties": {
                                "enabled": {
                                  "type": "boolean"
                                },
                                "endpoint": {
                                  "type": "string"
                                },
                                "port": {
                                  "type": "number"
                                },
                                "username": {
                                  "type": "string"
                                },
                                "password": {
                                  "type": "string"
                                },
                                "transportProtocol": {
                                  "type": "string",
                                  "enum": [
                                    "UDP",
                                    "TCP",
                                    "TLS"
                                  ]
                                },
                                "secureMedia": {
                                  "type": "boolean"
                                },
                                "headers": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "key": {
                                        "type": "string"
                                      },
                                      "value": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "key",
                                      "value"
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "enabled"
                              ]
                            }
                          },
                          "additionalProperties": {
                            "nullable": true
                          }
                        }
                      },
                      "required": [
                        "id"
                      ]
                    }
                  }
                },
                "required": [
                  "workspaceId",
                  "phoneNumbers"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Phone numbers updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "updated": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "number": {
                                    "type": "string"
                                  },
                                  "friendlyName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "workspaceId": {
                                    "type": "string"
                                  },
                                  "userId": {
                                    "type": "string"
                                  },
                                  "config": {
                                    "type": "object",
                                    "nullable": true,
                                    "properties": {
                                      "capabilities": {
                                        "type": "object",
                                        "properties": {
                                          "voice": {
                                            "type": "string"
                                          },
                                          "sms": {
                                            "type": "boolean"
                                          }
                                        }
                                      },
                                      "voiceConfig": {
                                        "type": "string"
                                      },
                                      "messagingConfig": {
                                        "type": "string"
                                      },
                                      "emergencyCalls": {
                                        "type": "boolean"
                                      },
                                      "configType": {
                                        "type": "string",
                                        "enum": [
                                          "agents",
                                          "workflows"
                                        ]
                                      },
                                      "inboundAgentId": {
                                        "type": "string"
                                      },
                                      "outboundAgentId": {
                                        "type": "string"
                                      },
                                      "inboundWorkflowId": {
                                        "type": "string"
                                      },
                                      "outboundWorkflowId": {
                                        "type": "string"
                                      },
                                      "originationUri": {
                                        "type": "string"
                                      },
                                      "sipInbound": {
                                        "type": "object",
                                        "properties": {
                                          "enabled": {
                                            "type": "boolean"
                                          }
                                        },
                                        "required": [
                                          "enabled"
                                        ]
                                      },
                                      "sipOutbound": {
                                        "type": "object",
                                        "properties": {
                                          "enabled": {
                                            "type": "boolean"
                                          },
                                          "endpoint": {
                                            "type": "string"
                                          },
                                          "port": {
                                            "type": "number"
                                          },
                                          "username": {
                                            "type": "string"
                                          },
                                          "password": {
                                            "type": "string"
                                          },
                                          "transportProtocol": {
                                            "type": "string",
                                            "enum": [
                                              "UDP",
                                              "TCP",
                                              "TLS"
                                            ]
                                          },
                                          "secureMedia": {
                                            "type": "boolean"
                                          },
                                          "headers": {
                                            "type": "array",
                                            "items": {
                                              "type": "object",
                                              "properties": {
                                                "key": {
                                                  "type": "string"
                                                },
                                                "value": {
                                                  "type": "string"
                                                }
                                              },
                                              "required": [
                                                "key",
                                                "value"
                                              ]
                                            }
                                          }
                                        },
                                        "required": [
                                          "enabled"
                                        ]
                                      }
                                    },
                                    "additionalProperties": {
                                      "nullable": true
                                    }
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "updatedAt": {
                                    "type": "string"
                                  },
                                  "inboundAgentName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "outboundAgentName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "inboundWorkflowName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "outboundWorkflowName": {
                                    "type": "string",
                                    "nullable": true
                                  }
                                },
                                "required": [
                                  "id",
                                  "number",
                                  "workspaceId",
                                  "userId",
                                  "createdAt",
                                  "updatedAt"
                                ]
                              }
                            },
                            "errors": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "error": {
                                    "type": "string"
                                  },
                                  "details": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "field": {
                                          "type": "string"
                                        },
                                        "message": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "field",
                                        "message"
                                      ]
                                    }
                                  }
                                },
                                "required": [
                                  "id",
                                  "error"
                                ]
                              }
                            }
                          },
                          "required": [
                            "updated"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete phone numbers",
        "description": "Deletes one or more phone numbers by ID.",
        "tags": [
          "Phone Numbers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Comma-separated phone number IDs to delete"
            },
            "required": true,
            "description": "Comma-separated phone number IDs to delete",
            "name": "phoneNumberIds",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Phone numbers deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "deletedCount": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "success",
                            "deletedCount"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/phone-numbers/resolve": {
      "post": {
        "summary": "Resolve phone number",
        "description": "Resolves a phone number to its configured agent or workflow for the specified call type (inbound/outbound).",
        "tags": [
          "Phone Numbers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "phoneNumber": {
                    "type": "string",
                    "minLength": 1
                  },
                  "callType": {
                    "type": "string",
                    "enum": [
                      "inboundCall",
                      "outboundCall"
                    ]
                  }
                },
                "required": [
                  "phoneNumber",
                  "callType"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resolved agent or workflow configuration",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "anyOf": [
                            {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "enum": [
                                    "workflow"
                                  ]
                                },
                                "id": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "description": {
                                  "type": "string"
                                },
                                "version": {
                                  "type": "string"
                                },
                                "tags": {
                                  "type": "array",
                                  "items": {
                                    "type": "string"
                                  }
                                },
                                "workspaceId": {
                                  "type": "string"
                                },
                                "canvasViewport": {
                                  "nullable": true
                                },
                                "nodePositions": {
                                  "nullable": true
                                },
                                "workflow": {
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "updatedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdBy": {
                                  "type": "string"
                                },
                                "updatedBy": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "type",
                                "id",
                                "name",
                                "workspaceId",
                                "createdAt",
                                "updatedAt"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "enum": [
                                    "agent"
                                  ]
                                },
                                "id": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "config": {
                                  "type": "object",
                                  "properties": {
                                    "llm": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string"
                                        },
                                        "model": {
                                          "type": "string"
                                        },
                                        "systemPrompt": {
                                          "type": "string"
                                        },
                                        "firstMessage": {
                                          "type": "string"
                                        },
                                        "firstMessageMode": {
                                          "type": "string"
                                        },
                                        "disableInterruptionsDuringFirstMessage": {
                                          "type": "boolean"
                                        },
                                        "maxTokens": {
                                          "type": "number"
                                        },
                                        "temperature": {
                                          "type": "number"
                                        },
                                        "thinkingBudgetEnabled": {
                                          "type": "boolean"
                                        },
                                        "thinkingBudget": {
                                          "type": "number"
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "disableInterruptionsDuringFirstMessage",
                                        "thinkingBudgetEnabled",
                                        "thinkingBudget"
                                      ]
                                    },
                                    "tts": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string"
                                        },
                                        "model": {
                                          "type": "string"
                                        },
                                        "voiceId": {
                                          "type": "string"
                                        },
                                        "speed": {
                                          "type": "number"
                                        },
                                        "stability": {
                                          "type": "number"
                                        },
                                        "similarityBoost": {
                                          "type": "number"
                                        },
                                        "additionalSettings": {
                                          "nullable": true
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model",
                                        "voiceId"
                                      ]
                                    },
                                    "sst": {
                                      "type": "object",
                                      "properties": {
                                        "provider": {
                                          "type": "string"
                                        },
                                        "model": {
                                          "type": "string"
                                        },
                                        "language": {
                                          "type": "string"
                                        },
                                        "temperature": {
                                          "type": "number"
                                        },
                                        "punctuate": {
                                          "type": "boolean"
                                        },
                                        "diarize": {
                                          "type": "boolean"
                                        },
                                        "additionalSettings": {
                                          "nullable": true
                                        }
                                      },
                                      "required": [
                                        "provider",
                                        "model"
                                      ]
                                    },
                                    "compliance": {
                                      "type": "object",
                                      "properties": {
                                        "pciDss": {
                                          "type": "boolean"
                                        },
                                        "mifidIi": {
                                          "type": "boolean"
                                        },
                                        "euAiAct": {
                                          "type": "boolean"
                                        },
                                        "soc2": {
                                          "type": "boolean"
                                        }
                                      },
                                      "required": [
                                        "pciDss",
                                        "mifidIi",
                                        "euAiAct",
                                        "soc2"
                                      ]
                                    }
                                  },
                                  "required": [
                                    "llm",
                                    "tts",
                                    "sst",
                                    "compliance"
                                  ]
                                },
                                "userId": {
                                  "type": "string"
                                },
                                "workspaceId": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "anyOf": [
                                    {
                                      "type": "string",
                                      "format": "date-time"
                                    },
                                    {
                                      "type": "string"
                                    }
                                  ]
                                }
                              },
                              "required": [
                                "type",
                                "id",
                                "name",
                                "config",
                                "userId",
                                "workspaceId",
                                "createdAt"
                              ]
                            }
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Phone number not found or not configured"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/phone-numbers/import/twilio": {
      "post": {
        "summary": "Import from Twilio",
        "description": "Imports an existing Twilio phone number into the workspace. The phone number must already be provisioned in your Twilio account.",
        "tags": [
          "Phone Numbers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "phoneNumber": {
                    "type": "string",
                    "minLength": 1
                  },
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid"
                  }
                },
                "required": [
                  "phoneNumber",
                  "workspaceId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Phone number imported",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "message": {
                              "type": "string"
                            },
                            "phoneNumber": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "number": {
                                  "type": "string"
                                },
                                "friendlyName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "workspaceId": {
                                  "type": "string"
                                },
                                "userId": {
                                  "type": "string"
                                },
                                "config": {
                                  "type": "object",
                                  "nullable": true,
                                  "properties": {
                                    "capabilities": {
                                      "type": "object",
                                      "properties": {
                                        "voice": {
                                          "type": "string"
                                        },
                                        "sms": {
                                          "type": "boolean"
                                        }
                                      }
                                    },
                                    "voiceConfig": {
                                      "type": "string"
                                    },
                                    "messagingConfig": {
                                      "type": "string"
                                    },
                                    "emergencyCalls": {
                                      "type": "boolean"
                                    },
                                    "configType": {
                                      "type": "string",
                                      "enum": [
                                        "agents",
                                        "workflows"
                                      ]
                                    },
                                    "inboundAgentId": {
                                      "type": "string"
                                    },
                                    "outboundAgentId": {
                                      "type": "string"
                                    },
                                    "inboundWorkflowId": {
                                      "type": "string"
                                    },
                                    "outboundWorkflowId": {
                                      "type": "string"
                                    },
                                    "originationUri": {
                                      "type": "string"
                                    },
                                    "sipInbound": {
                                      "type": "object",
                                      "properties": {
                                        "enabled": {
                                          "type": "boolean"
                                        }
                                      },
                                      "required": [
                                        "enabled"
                                      ]
                                    },
                                    "sipOutbound": {
                                      "type": "object",
                                      "properties": {
                                        "enabled": {
                                          "type": "boolean"
                                        },
                                        "endpoint": {
                                          "type": "string"
                                        },
                                        "port": {
                                          "type": "number"
                                        },
                                        "username": {
                                          "type": "string"
                                        },
                                        "password": {
                                          "type": "string"
                                        },
                                        "transportProtocol": {
                                          "type": "string",
                                          "enum": [
                                            "UDP",
                                            "TCP",
                                            "TLS"
                                          ]
                                        },
                                        "secureMedia": {
                                          "type": "boolean"
                                        },
                                        "headers": {
                                          "type": "array",
                                          "items": {
                                            "type": "object",
                                            "properties": {
                                              "key": {
                                                "type": "string"
                                              },
                                              "value": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "key",
                                              "value"
                                            ]
                                          }
                                        }
                                      },
                                      "required": [
                                        "enabled"
                                      ]
                                    }
                                  },
                                  "additionalProperties": {
                                    "nullable": true
                                  }
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "inboundAgentName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "outboundAgentName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "inboundWorkflowName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "outboundWorkflowName": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "id",
                                "number",
                                "workspaceId",
                                "userId",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "success",
                            "message"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Phone number not found in Twilio"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/workspaces": {
      "get": {
        "summary": "List workspaces",
        "description": "Returns all workspaces the authenticated user has access to, including settings and members.",
        "tags": [
          "Workspaces"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User's workspaces",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "workspaces": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "name": {
                                    "type": "string"
                                  },
                                  "logoPath": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "ownerId": {
                                    "type": "string"
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "updatedAt": {
                                    "type": "string"
                                  },
                                  "workspaceSettings": {
                                    "type": "object",
                                    "properties": {
                                      "workspaceId": {
                                        "type": "string"
                                      },
                                      "language": {
                                        "type": "string"
                                      },
                                      "webhooks": {
                                        "type": "object",
                                        "nullable": true,
                                        "additionalProperties": {
                                          "type": "string"
                                        },
                                        "default": {}
                                      }
                                    },
                                    "required": [
                                      "workspaceId",
                                      "language"
                                    ]
                                  },
                                  "workspaceIntegrations": {
                                    "type": "object",
                                    "properties": {
                                      "workspaceId": {
                                        "type": "string"
                                      },
                                      "version": {
                                        "type": "string"
                                      },
                                      "assistantIds": {
                                        "type": "array",
                                        "items": {
                                          "type": "string"
                                        },
                                        "default": []
                                      }
                                    },
                                    "required": [
                                      "workspaceId",
                                      "version"
                                    ]
                                  },
                                  "workspaceMembers": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "userId": {
                                          "type": "string"
                                        },
                                        "role": {
                                          "type": "string"
                                        },
                                        "joinedAt": {
                                          "type": "string"
                                        },
                                        "displayName": {
                                          "type": "string"
                                        },
                                        "username": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "email": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "avatarUrl": {
                                          "type": "string",
                                          "nullable": true
                                        }
                                      },
                                      "required": [
                                        "userId",
                                        "role",
                                        "joinedAt",
                                        "displayName"
                                      ]
                                    },
                                    "default": []
                                  },
                                  "workspaceInvitations": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "id": {
                                          "type": "string"
                                        },
                                        "workspaceId": {
                                          "type": "string"
                                        },
                                        "inviterId": {
                                          "type": "string"
                                        },
                                        "email": {
                                          "type": "string",
                                          "format": "email"
                                        },
                                        "role": {
                                          "type": "string"
                                        },
                                        "status": {
                                          "type": "string"
                                        },
                                        "token": {
                                          "type": "string"
                                        },
                                        "expiresAt": {
                                          "type": "string"
                                        },
                                        "createdAt": {
                                          "type": "string"
                                        },
                                        "updatedAt": {
                                          "type": "string"
                                        },
                                        "acceptedAt": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "inviterEmail": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "inviterDisplayName": {
                                          "type": "string",
                                          "nullable": true
                                        }
                                      },
                                      "required": [
                                        "id",
                                        "workspaceId",
                                        "inviterId",
                                        "email",
                                        "role",
                                        "status",
                                        "token",
                                        "expiresAt",
                                        "createdAt",
                                        "updatedAt"
                                      ]
                                    },
                                    "default": []
                                  }
                                },
                                "required": [
                                  "id",
                                  "name",
                                  "ownerId",
                                  "createdAt",
                                  "updatedAt",
                                  "workspaceSettings",
                                  "workspaceIntegrations"
                                ]
                              }
                            }
                          },
                          "required": [
                            "workspaces"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create workspace",
        "description": "Creates a new workspace with the authenticated user as owner.",
        "tags": [
          "Workspaces"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Workspace name"
                  },
                  "logoPath": {
                    "type": "string",
                    "description": "Path to workspace logo"
                  },
                  "workspaceSettings": {
                    "type": "object",
                    "properties": {
                      "language": {
                        "type": "string",
                        "default": "en"
                      },
                      "webhooks": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        },
                        "default": {}
                      }
                    },
                    "description": "Workspace settings"
                  },
                  "integrationVersion": {
                    "type": "string",
                    "default": "v1",
                    "description": "Integration version"
                  },
                  "assistantIds": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "default": [],
                    "description": "List of assistant IDs"
                  },
                  "isAutoCreate": {
                    "type": "boolean",
                    "description": "Whether this workspace is auto-created"
                  }
                },
                "required": [
                  "name"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Workspace created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "workspace": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "logoPath": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "ownerId": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "workspaceSettings": {
                                  "type": "object",
                                  "properties": {
                                    "workspaceId": {
                                      "type": "string"
                                    },
                                    "language": {
                                      "type": "string"
                                    },
                                    "webhooks": {
                                      "type": "object",
                                      "nullable": true,
                                      "additionalProperties": {
                                        "type": "string"
                                      },
                                      "default": {}
                                    }
                                  },
                                  "required": [
                                    "workspaceId",
                                    "language"
                                  ]
                                },
                                "workspaceIntegrations": {
                                  "type": "object",
                                  "properties": {
                                    "workspaceId": {
                                      "type": "string"
                                    },
                                    "version": {
                                      "type": "string"
                                    },
                                    "assistantIds": {
                                      "type": "array",
                                      "items": {
                                        "type": "string"
                                      },
                                      "default": []
                                    }
                                  },
                                  "required": [
                                    "workspaceId",
                                    "version"
                                  ]
                                },
                                "workspaceMembers": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "userId": {
                                        "type": "string"
                                      },
                                      "role": {
                                        "type": "string"
                                      },
                                      "joinedAt": {
                                        "type": "string"
                                      },
                                      "displayName": {
                                        "type": "string"
                                      },
                                      "username": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "email": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "avatarUrl": {
                                        "type": "string",
                                        "nullable": true
                                      }
                                    },
                                    "required": [
                                      "userId",
                                      "role",
                                      "joinedAt",
                                      "displayName"
                                    ]
                                  },
                                  "default": []
                                },
                                "workspaceInvitations": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "workspaceId": {
                                        "type": "string"
                                      },
                                      "inviterId": {
                                        "type": "string"
                                      },
                                      "email": {
                                        "type": "string",
                                        "format": "email"
                                      },
                                      "role": {
                                        "type": "string"
                                      },
                                      "status": {
                                        "type": "string"
                                      },
                                      "token": {
                                        "type": "string"
                                      },
                                      "expiresAt": {
                                        "type": "string"
                                      },
                                      "createdAt": {
                                        "type": "string"
                                      },
                                      "updatedAt": {
                                        "type": "string"
                                      },
                                      "acceptedAt": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "inviterEmail": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "inviterDisplayName": {
                                        "type": "string",
                                        "nullable": true
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "workspaceId",
                                      "inviterId",
                                      "email",
                                      "role",
                                      "status",
                                      "token",
                                      "expiresAt",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  },
                                  "default": []
                                }
                              },
                              "required": [
                                "id",
                                "name",
                                "ownerId",
                                "createdAt",
                                "updatedAt",
                                "workspaceSettings",
                                "workspaceIntegrations"
                              ]
                            }
                          },
                          "required": [
                            "workspace"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update workspace",
        "description": "Updates workspace name, logo, settings, or integration configuration.",
        "tags": [
          "Workspaces"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "name": {
                    "type": "string",
                    "description": "Workspace name"
                  },
                  "logoPath": {
                    "type": "string",
                    "description": "Path to workspace logo"
                  },
                  "workspaceSettings": {
                    "type": "object",
                    "properties": {
                      "language": {
                        "type": "string",
                        "default": "en"
                      },
                      "webhooks": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        },
                        "default": {}
                      }
                    },
                    "description": "Workspace settings"
                  },
                  "integrationVersion": {
                    "type": "string",
                    "description": "Integration version"
                  },
                  "assistantIds": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "List of assistant IDs"
                  }
                },
                "required": [
                  "workspaceId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Workspace updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "workspace": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "logoPath": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "ownerId": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "workspaceSettings": {
                                  "type": "object",
                                  "properties": {
                                    "workspaceId": {
                                      "type": "string"
                                    },
                                    "language": {
                                      "type": "string"
                                    },
                                    "webhooks": {
                                      "type": "object",
                                      "nullable": true,
                                      "additionalProperties": {
                                        "type": "string"
                                      },
                                      "default": {}
                                    }
                                  },
                                  "required": [
                                    "workspaceId",
                                    "language"
                                  ]
                                },
                                "workspaceIntegrations": {
                                  "type": "object",
                                  "properties": {
                                    "workspaceId": {
                                      "type": "string"
                                    },
                                    "version": {
                                      "type": "string"
                                    },
                                    "assistantIds": {
                                      "type": "array",
                                      "items": {
                                        "type": "string"
                                      },
                                      "default": []
                                    }
                                  },
                                  "required": [
                                    "workspaceId",
                                    "version"
                                  ]
                                },
                                "workspaceMembers": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "userId": {
                                        "type": "string"
                                      },
                                      "role": {
                                        "type": "string"
                                      },
                                      "joinedAt": {
                                        "type": "string"
                                      },
                                      "displayName": {
                                        "type": "string"
                                      },
                                      "username": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "email": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "avatarUrl": {
                                        "type": "string",
                                        "nullable": true
                                      }
                                    },
                                    "required": [
                                      "userId",
                                      "role",
                                      "joinedAt",
                                      "displayName"
                                    ]
                                  },
                                  "default": []
                                },
                                "workspaceInvitations": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "workspaceId": {
                                        "type": "string"
                                      },
                                      "inviterId": {
                                        "type": "string"
                                      },
                                      "email": {
                                        "type": "string",
                                        "format": "email"
                                      },
                                      "role": {
                                        "type": "string"
                                      },
                                      "status": {
                                        "type": "string"
                                      },
                                      "token": {
                                        "type": "string"
                                      },
                                      "expiresAt": {
                                        "type": "string"
                                      },
                                      "createdAt": {
                                        "type": "string"
                                      },
                                      "updatedAt": {
                                        "type": "string"
                                      },
                                      "acceptedAt": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "inviterEmail": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "inviterDisplayName": {
                                        "type": "string",
                                        "nullable": true
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "workspaceId",
                                      "inviterId",
                                      "email",
                                      "role",
                                      "status",
                                      "token",
                                      "expiresAt",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  },
                                  "default": []
                                }
                              },
                              "required": [
                                "id",
                                "name",
                                "ownerId",
                                "createdAt",
                                "updatedAt",
                                "workspaceSettings",
                                "workspaceIntegrations"
                              ]
                            }
                          },
                          "required": [
                            "workspace"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Workspace not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete workspace",
        "description": "Permanently deletes a workspace and all associated data. Only the workspace owner can delete.",
        "tags": [
          "Workspaces"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Workspace deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success",
                            "message"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Only workspace owner can delete"
          },
          "404": {
            "description": "Workspace not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/members": {
      "get": {
        "summary": "List members",
        "description": "Returns all members of the specified workspace with their roles.",
        "tags": [
          "Workspace Members"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Workspace members",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "members": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "userId": {
                                    "type": "string"
                                  },
                                  "role": {
                                    "type": "string"
                                  },
                                  "joinedAt": {
                                    "type": "string"
                                  },
                                  "displayName": {
                                    "type": "string"
                                  },
                                  "username": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "email": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "avatarUrl": {
                                    "type": "string",
                                    "nullable": true
                                  }
                                },
                                "required": [
                                  "userId",
                                  "role",
                                  "joinedAt",
                                  "displayName"
                                ]
                              }
                            }
                          },
                          "required": [
                            "members"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Workspace not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update member",
        "description": "Updates the authenticated user's display name in the workspace.",
        "tags": [
          "Workspace Members"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "displayName": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100,
                    "description": "New display name for the member"
                  }
                },
                "required": [
                  "workspaceId",
                  "displayName"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Member updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "member": {
                              "type": "object",
                              "properties": {
                                "userId": {
                                  "type": "string"
                                },
                                "role": {
                                  "type": "string"
                                },
                                "joinedAt": {
                                  "type": "string"
                                },
                                "displayName": {
                                  "type": "string"
                                },
                                "username": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "email": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "avatarUrl": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "userId",
                                "role",
                                "joinedAt",
                                "displayName"
                              ]
                            }
                          },
                          "required": [
                            "member"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Remove member",
        "description": "Removes a member from the workspace. Admins can remove other members; members can remove themselves.",
        "tags": [
          "Workspace Members"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "User ID to remove"
            },
            "required": true,
            "description": "User ID to remove",
            "name": "userId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Member removed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "userId": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success",
                            "userId"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Permission denied"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/invitations": {
      "get": {
        "summary": "List invitations",
        "description": "Returns all pending invitations for the workspace.",
        "tags": [
          "Workspace Invitations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Pending invitations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "invitations": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "workspaceId": {
                                    "type": "string"
                                  },
                                  "inviterId": {
                                    "type": "string"
                                  },
                                  "email": {
                                    "type": "string",
                                    "format": "email"
                                  },
                                  "role": {
                                    "type": "string"
                                  },
                                  "status": {
                                    "type": "string"
                                  },
                                  "token": {
                                    "type": "string"
                                  },
                                  "expiresAt": {
                                    "type": "string"
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  },
                                  "updatedAt": {
                                    "type": "string"
                                  },
                                  "acceptedAt": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "inviterEmail": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "inviterDisplayName": {
                                    "type": "string",
                                    "nullable": true
                                  }
                                },
                                "required": [
                                  "id",
                                  "workspaceId",
                                  "inviterId",
                                  "email",
                                  "role",
                                  "status",
                                  "token",
                                  "expiresAt",
                                  "createdAt",
                                  "updatedAt"
                                ]
                              }
                            }
                          },
                          "required": [
                            "invitations"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Invite member",
        "description": "Sends an email invitation to join the workspace. The invitee can accept within 7 days.",
        "tags": [
          "Workspace Invitations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email address to invite"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "member",
                      "admin"
                    ],
                    "default": "member",
                    "description": "Role to assign: member or admin"
                  },
                  "message": {
                    "type": "string",
                    "maxLength": 500,
                    "description": "Optional invitation message"
                  }
                },
                "required": [
                  "workspaceId",
                  "email"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invitation sent",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "invitation": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "workspaceId": {
                                  "type": "string"
                                },
                                "inviterId": {
                                  "type": "string"
                                },
                                "email": {
                                  "type": "string",
                                  "format": "email"
                                },
                                "role": {
                                  "type": "string"
                                },
                                "status": {
                                  "type": "string"
                                },
                                "token": {
                                  "type": "string"
                                },
                                "expiresAt": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "acceptedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "inviterEmail": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "inviterDisplayName": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "id",
                                "workspaceId",
                                "inviterId",
                                "email",
                                "role",
                                "status",
                                "token",
                                "expiresAt",
                                "createdAt",
                                "updatedAt"
                              ]
                            },
                            "emailWarning": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "invitation"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "User already a member or has pending invitation"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Revoke invitation",
        "description": "Revokes a pending workspace invitation.",
        "tags": [
          "Workspace Invitations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Invitation ID to revoke"
            },
            "required": true,
            "description": "Invitation ID to revoke",
            "name": "invitationId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitation revoked",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "invitation": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "workspaceId": {
                                  "type": "string"
                                },
                                "inviterId": {
                                  "type": "string"
                                },
                                "email": {
                                  "type": "string",
                                  "format": "email"
                                },
                                "role": {
                                  "type": "string"
                                },
                                "status": {
                                  "type": "string"
                                },
                                "token": {
                                  "type": "string"
                                },
                                "expiresAt": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "acceptedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "inviterEmail": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "inviterDisplayName": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "id",
                                "workspaceId",
                                "inviterId",
                                "email",
                                "role",
                                "status",
                                "token",
                                "expiresAt",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "invitation"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Invitation not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/invitations/token": {
      "get": {
        "summary": "Get invitation by token",
        "description": "Retrieves invitation details using the invitation token. Used to display invitation info before accepting.",
        "tags": [
          "Workspace Invitations"
        ],
        "security": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "description": "Invitation token"
            },
            "required": true,
            "description": "Invitation token",
            "name": "token",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitation details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "invitation": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "workspaceId": {
                                  "type": "string"
                                },
                                "inviterId": {
                                  "type": "string"
                                },
                                "email": {
                                  "type": "string",
                                  "format": "email"
                                },
                                "role": {
                                  "type": "string"
                                },
                                "status": {
                                  "type": "string"
                                },
                                "token": {
                                  "type": "string"
                                },
                                "expiresAt": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "acceptedAt": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "inviterEmail": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "inviterDisplayName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "workspaceName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "userAlreadyRegistered": {
                                  "type": "boolean",
                                  "default": false
                                }
                              },
                              "required": [
                                "id",
                                "workspaceId",
                                "inviterId",
                                "email",
                                "role",
                                "status",
                                "token",
                                "expiresAt",
                                "createdAt",
                                "updatedAt",
                                "workspaceName"
                              ]
                            }
                          },
                          "required": [
                            "invitation"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Invitation not found or expired"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/invitations/accept": {
      "post": {
        "summary": "Accept invitation",
        "description": "Accepts a workspace invitation and adds the user as a member.",
        "tags": [
          "Workspace Invitations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "token": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Invitation token"
                  }
                },
                "required": [
                  "token"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invitation accepted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "workspaceId": {
                              "type": "string"
                            },
                            "member": {
                              "type": "object",
                              "properties": {
                                "userId": {
                                  "type": "string"
                                },
                                "role": {
                                  "type": "string"
                                },
                                "joinedAt": {
                                  "type": "string"
                                },
                                "displayName": {
                                  "type": "string"
                                },
                                "username": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "email": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "avatarUrl": {
                                  "type": "string",
                                  "nullable": true
                                }
                              },
                              "required": [
                                "userId",
                                "role",
                                "joinedAt",
                                "displayName"
                              ]
                            },
                            "workspace": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "name": {
                                  "type": "string"
                                },
                                "logoPath": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "ownerId": {
                                  "type": "string"
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                },
                                "workspaceSettings": {
                                  "type": "object",
                                  "properties": {
                                    "workspaceId": {
                                      "type": "string"
                                    },
                                    "language": {
                                      "type": "string"
                                    },
                                    "webhooks": {
                                      "type": "object",
                                      "nullable": true,
                                      "additionalProperties": {
                                        "type": "string"
                                      },
                                      "default": {}
                                    }
                                  },
                                  "required": [
                                    "workspaceId",
                                    "language"
                                  ]
                                },
                                "workspaceIntegrations": {
                                  "type": "object",
                                  "properties": {
                                    "workspaceId": {
                                      "type": "string"
                                    },
                                    "version": {
                                      "type": "string"
                                    },
                                    "assistantIds": {
                                      "type": "array",
                                      "items": {
                                        "type": "string"
                                      },
                                      "default": []
                                    }
                                  },
                                  "required": [
                                    "workspaceId",
                                    "version"
                                  ]
                                },
                                "workspaceMembers": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "userId": {
                                        "type": "string"
                                      },
                                      "role": {
                                        "type": "string"
                                      },
                                      "joinedAt": {
                                        "type": "string"
                                      },
                                      "displayName": {
                                        "type": "string"
                                      },
                                      "username": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "email": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "avatarUrl": {
                                        "type": "string",
                                        "nullable": true
                                      }
                                    },
                                    "required": [
                                      "userId",
                                      "role",
                                      "joinedAt",
                                      "displayName"
                                    ]
                                  },
                                  "default": []
                                },
                                "workspaceInvitations": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string"
                                      },
                                      "workspaceId": {
                                        "type": "string"
                                      },
                                      "inviterId": {
                                        "type": "string"
                                      },
                                      "email": {
                                        "type": "string",
                                        "format": "email"
                                      },
                                      "role": {
                                        "type": "string"
                                      },
                                      "status": {
                                        "type": "string"
                                      },
                                      "token": {
                                        "type": "string"
                                      },
                                      "expiresAt": {
                                        "type": "string"
                                      },
                                      "createdAt": {
                                        "type": "string"
                                      },
                                      "updatedAt": {
                                        "type": "string"
                                      },
                                      "acceptedAt": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "inviterEmail": {
                                        "type": "string",
                                        "nullable": true
                                      },
                                      "inviterDisplayName": {
                                        "type": "string",
                                        "nullable": true
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "workspaceId",
                                      "inviterId",
                                      "email",
                                      "role",
                                      "status",
                                      "token",
                                      "expiresAt",
                                      "createdAt",
                                      "updatedAt"
                                    ]
                                  },
                                  "default": []
                                }
                              },
                              "required": [
                                "id",
                                "name",
                                "ownerId",
                                "createdAt",
                                "updatedAt",
                                "workspaceSettings",
                                "workspaceIntegrations"
                              ]
                            }
                          },
                          "required": [
                            "workspaceId",
                            "member",
                            "workspace"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Invitation not found or expired"
          },
          "409": {
            "description": "User already a member"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/logs": {
      "get": {
        "summary": "Get audit logs",
        "description": "Returns audit log entries for workspace events (login, API key changes, member changes, exports, etc.).",
        "tags": [
          "Workspace Logs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "description": "Maximum number of logs to return (1-100)"
            },
            "required": false,
            "description": "Maximum number of logs to return (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "Cursor for pagination"
            },
            "required": false,
            "description": "Cursor for pagination",
            "name": "cursor",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Audit log entries",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "logs": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "workspaceId": {
                                    "type": "string"
                                  },
                                  "eventType": {
                                    "type": "string",
                                    "enum": [
                                      "LOGIN",
                                      "LOGOUT",
                                      "SIGNUP",
                                      "PASSWORD_RESET",
                                      "API_KEYS",
                                      "MEMBERS",
                                      "PHONE_NUMBERS",
                                      "EXPORTS"
                                    ]
                                  },
                                  "eventDescription": {
                                    "type": "string"
                                  },
                                  "actorId": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "actorEmail": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "metadata": {
                                    "type": "object",
                                    "additionalProperties": {
                                      "nullable": true
                                    }
                                  },
                                  "createdAt": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "id",
                                  "workspaceId",
                                  "eventType",
                                  "eventDescription",
                                  "actorId",
                                  "createdAt"
                                ]
                              }
                            },
                            "nextCursor": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "logs"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/workspaces/credits": {
      "get": {
        "summary": "Get credits",
        "description": "Returns the current credit balance for the workspace.",
        "tags": [
          "Workspace Credits"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Credit balance",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "creditsLeft": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "creditsLeft"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/export": {
      "post": {
        "summary": "Request export",
        "description": "Requests a data export from one of the supported endpoints. The export can be delivered as a direct download URL or sent via email.\n\n**Supported Endpoints:**\n- `/api/v2/call` - Export calls\n- `/api/v2/campaign` - Export campaigns\n- `/api/v2/phone-numbers` - Export phone numbers\n- `/api/v2/solutions/runs` - Export solution runs\n- `/api/v2/problems` - Export feedback/problems\n\n**Export Formats:**\n- `csv` - Comma-separated values\n- `xlsx` - Excel spreadsheet\n- `markdown` - Markdown table\n- `json` - JSON array\n\nThe `params` object should include the same query parameters you would use when calling the endpoint directly, including `workspaceId`.",
        "tags": [
          "Export"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PostExportRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Export ready or email sent",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "$ref": "#/components/schemas/PostExportResponse"
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Too many export requests"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "503": {
            "description": "Email export not configured"
          }
        }
      }
    },
    "/export/download": {
      "get": {
        "summary": "Download export",
        "description": "Downloads an export file using a signed payload and signature. The URL is typically generated by the POST /export endpoint.\n\n**Note:** This endpoint does not require authentication - the signature serves as the authentication mechanism. Export links expire after 24 hours.",
        "tags": [
          "Export"
        ],
        "security": [],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Base64-encoded export payload"
            },
            "required": true,
            "description": "Base64-encoded export payload",
            "name": "payload",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "HMAC signature of the payload"
            },
            "required": true,
            "description": "HMAC signature of the payload",
            "name": "signature",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Export file content",
            "content": {
              "text/csv": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "text/markdown": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "application/json": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "410": {
            "description": "Export link expired"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/integrations": {
      "get": {
        "summary": "List integrations",
        "description": "Returns available integrations with optional connection status for the workspace.\n\nWhen `detail=true`, returns full integration metadata from Nango including available actions, endpoints, and whether the workspace has an active connection.\n\nWhen `detail=false` (default), returns only connected integrations from the database.",
        "tags": [
          "Integrations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "maximum": 100,
              "default": 50,
              "description": "Maximum number of integrations to return (1-100)"
            },
            "required": false,
            "description": "Maximum number of integrations to return (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "description": "Number of integrations to skip for pagination"
            },
            "required": false,
            "description": "Number of integrations to skip for pagination",
            "name": "offset",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "default": false,
              "description": "Include detailed integration metadata"
            },
            "required": false,
            "description": "Include detailed integration metadata",
            "name": "detail",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Integrations list",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "integrations": {
                              "type": "array",
                              "items": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "unique_key": {
                                        "type": "string"
                                      },
                                      "display_name": {
                                        "type": "string"
                                      },
                                      "provider": {
                                        "type": "string"
                                      },
                                      "logo": {
                                        "type": "string"
                                      },
                                      "created_at": {
                                        "type": "string"
                                      },
                                      "updated_at": {
                                        "type": "string"
                                      },
                                      "connection": {
                                        "type": "object",
                                        "nullable": true,
                                        "properties": {
                                          "id": {
                                            "type": "string",
                                            "format": "uuid"
                                          },
                                          "workspaceId": {
                                            "type": "string",
                                            "format": "uuid"
                                          },
                                          "integrationType": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 50
                                          },
                                          "nangoConnectionId": {
                                            "type": "string",
                                            "minLength": 1,
                                            "maxLength": 255
                                          },
                                          "connectedAt": {
                                            "type": "string",
                                            "format": "date-time"
                                          }
                                        },
                                        "required": [
                                          "id",
                                          "workspaceId",
                                          "integrationType",
                                          "nangoConnectionId",
                                          "connectedAt"
                                        ]
                                      },
                                      "config": {
                                        "type": "object",
                                        "properties": {
                                          "provider": {
                                            "type": "string"
                                          },
                                          "providerConfigKey": {
                                            "type": "string"
                                          },
                                          "actions": {
                                            "type": "array",
                                            "items": {
                                              "type": "object",
                                              "properties": {
                                                "id": {
                                                  "type": "number"
                                                },
                                                "name": {
                                                  "type": "string"
                                                },
                                                "type": {
                                                  "type": "string",
                                                  "enum": [
                                                    "action",
                                                    "sync",
                                                    "webhook"
                                                  ]
                                                },
                                                "description": {
                                                  "type": "string"
                                                },
                                                "version": {
                                                  "type": "string"
                                                },
                                                "enabled": {
                                                  "type": "boolean"
                                                }
                                              },
                                              "required": [
                                                "id",
                                                "name",
                                                "type",
                                                "description",
                                                "version",
                                                "enabled"
                                              ]
                                            }
                                          }
                                        },
                                        "required": [
                                          "provider",
                                          "providerConfigKey",
                                          "actions"
                                        ]
                                      },
                                      "orphaned": {
                                        "type": "boolean"
                                      }
                                    }
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "workspaceId": {
                                        "type": "string",
                                        "format": "uuid"
                                      },
                                      "integrationType": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 50
                                      },
                                      "nangoConnectionId": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 255
                                      },
                                      "connectedAt": {
                                        "type": "string",
                                        "format": "date-time"
                                      }
                                    },
                                    "required": [
                                      "id",
                                      "workspaceId",
                                      "integrationType",
                                      "nangoConnectionId",
                                      "connectedAt"
                                    ]
                                  }
                                ]
                              }
                            },
                            "total": {
                              "type": "integer",
                              "minimum": 0
                            },
                            "limit": {
                              "type": "integer",
                              "minimum": 0,
                              "exclusiveMinimum": true
                            },
                            "offset": {
                              "type": "integer",
                              "minimum": 0
                            }
                          },
                          "required": [
                            "integrations",
                            "total",
                            "limit",
                            "offset"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Remove integration",
        "description": "Disconnects an integration from the workspace. This removes the connection but does not affect data that was synced.",
        "tags": [
          "Integrations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 50,
              "description": "Integration type to disconnect"
            },
            "required": true,
            "description": "Integration type to disconnect",
            "name": "integrationType",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Integration removed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "success",
                            "message"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Integration not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/integrations/{integrationType}": {
      "get": {
        "summary": "Get integration",
        "description": "Returns the workspace's connection for a specific integration type, or null if not connected.",
        "tags": [
          "Integrations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 50,
              "description": "Integration type (e.g., 'salesforce', 'hubspot')"
            },
            "required": true,
            "description": "Integration type (e.g., 'salesforce', 'hubspot')",
            "name": "integrationType",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Integration connection or null",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "integration": {
                              "type": "object",
                              "nullable": true,
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "workspaceId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "integrationType": {
                                  "type": "string",
                                  "minLength": 1,
                                  "maxLength": 50
                                },
                                "nangoConnectionId": {
                                  "type": "string",
                                  "minLength": 1,
                                  "maxLength": 255
                                },
                                "connectedAt": {
                                  "type": "string",
                                  "format": "date-time"
                                }
                              },
                              "required": [
                                "id",
                                "workspaceId",
                                "integrationType",
                                "nangoConnectionId",
                                "connectedAt"
                              ]
                            }
                          },
                          "required": [
                            "integration"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/integrations/session": {
      "post": {
        "summary": "Create session",
        "description": "Creates a Nango session token for initiating the OAuth flow with a third-party integration.\n\nThe returned session token should be used with the Nango Connect UI to complete the OAuth authorization. Once authorized, the connection is automatically saved to the workspace.",
        "tags": [
          "Integrations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "integrationType": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 50,
                    "description": "Integration type to connect"
                  }
                },
                "required": [
                  "workspaceId",
                  "integrationType"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session token created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "sessionToken": {
                              "type": "string"
                            },
                            "integrationType": {
                              "type": "string"
                            },
                            "workspaceId": {
                              "type": "string",
                              "format": "uuid"
                            }
                          },
                          "required": [
                            "sessionToken",
                            "integrationType",
                            "workspaceId"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/reviews": {
      "get": {
        "summary": "Get review",
        "description": "Returns the review for a specific call, or null if no review exists.",
        "tags": [
          "Reviews"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Call ID"
            },
            "required": true,
            "description": "Call ID",
            "name": "callId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Call review or null",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "review": {
                              "type": "object",
                              "nullable": true,
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "callId": {
                                  "type": "string"
                                },
                                "workspaceId": {
                                  "type": "string"
                                },
                                "reviewAssignee": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "reviewStatus": {
                                  "type": "string",
                                  "enum": [
                                    "No Review Status",
                                    "Pending Review",
                                    "In Progress",
                                    "Completed",
                                    "Not Needed"
                                  ]
                                },
                                "reviewTag": {
                                  "type": "string",
                                  "nullable": true,
                                  "enum": [
                                    "Successful",
                                    "Technical Issue",
                                    "Wrong Number",
                                    "No Answer",
                                    "Needs Review",
                                    null
                                  ]
                                },
                                "reviewNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "callId",
                                "workspaceId",
                                "reviewAssignee",
                                "reviewStatus",
                                "reviewTag",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "review"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Upsert review",
        "description": "Creates or updates a review for a call.\n\n**Review Statuses:**\n- `No Review Status` - Default state\n- `Pending Review` - Waiting for review\n- `In Progress` - Currently being reviewed\n- `Completed` - Review finished\n- `Not Needed` - No review required\n\n**Review Tags:**\n- `Successful` - Call achieved its goal\n- `Technical Issue` - Technical problems occurred\n- `Wrong Number` - Reached wrong contact\n- `No Answer` - Customer didn't answer\n- `Needs Review` - Flagged for further review",
        "tags": [
          "Reviews"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "callId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Call ID"
                  },
                  "reviewAssignee": {
                    "type": "string",
                    "nullable": true,
                    "format": "uuid",
                    "description": "Assignee user ID (deprecated)"
                  },
                  "reviewStatus": {
                    "type": "string",
                    "enum": [
                      "No Review Status",
                      "Pending Review",
                      "In Progress",
                      "Completed",
                      "Not Needed"
                    ],
                    "description": "Review status"
                  },
                  "reviewTag": {
                    "type": "string",
                    "nullable": true,
                    "enum": [
                      "Successful",
                      "Technical Issue",
                      "Wrong Number",
                      "No Answer",
                      "Needs Review",
                      null
                    ],
                    "description": "Review tag"
                  },
                  "reviewNotes": {
                    "type": "string",
                    "nullable": true,
                    "description": "Review notes"
                  }
                },
                "required": [
                  "workspaceId",
                  "callId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Review created or updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "review": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "callId": {
                                  "type": "string"
                                },
                                "workspaceId": {
                                  "type": "string"
                                },
                                "reviewAssignee": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                },
                                "reviewStatus": {
                                  "type": "string",
                                  "enum": [
                                    "No Review Status",
                                    "Pending Review",
                                    "In Progress",
                                    "Completed",
                                    "Not Needed"
                                  ]
                                },
                                "reviewTag": {
                                  "type": "string",
                                  "nullable": true,
                                  "enum": [
                                    "Successful",
                                    "Technical Issue",
                                    "Wrong Number",
                                    "No Answer",
                                    "Needs Review",
                                    null
                                  ]
                                },
                                "reviewNotes": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "createdAt": {
                                  "type": "string"
                                },
                                "updatedAt": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "callId",
                                "workspaceId",
                                "reviewAssignee",
                                "reviewStatus",
                                "reviewTag",
                                "createdAt",
                                "updatedAt"
                              ]
                            }
                          },
                          "required": [
                            "review"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/reviews/{reviewId}/assignees": {
      "get": {
        "summary": "List assignees",
        "description": "Returns all users assigned to a review.",
        "tags": [
          "Review Assignees"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Review ID"
            },
            "required": true,
            "description": "Review ID",
            "name": "reviewId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Review assignees",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "assignees": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "reviewId": {
                                    "type": "string"
                                  },
                                  "userId": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "userName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "assignedAt": {
                                    "type": "string"
                                  },
                                  "assignedBy": {
                                    "type": "string",
                                    "nullable": true,
                                    "format": "uuid"
                                  }
                                },
                                "required": [
                                  "id",
                                  "reviewId",
                                  "userId",
                                  "assignedAt"
                                ]
                              }
                            }
                          },
                          "required": [
                            "success",
                            "assignees"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Review not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Add assignee",
        "description": "Adds a user as an assignee to the review.",
        "tags": [
          "Review Assignees"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Review ID"
            },
            "required": true,
            "description": "Review ID",
            "name": "reviewId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "userId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "User ID to assign"
                  }
                },
                "required": [
                  "workspaceId",
                  "userId"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Assignee added",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "assignee": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string"
                                },
                                "reviewId": {
                                  "type": "string"
                                },
                                "userId": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "userName": {
                                  "type": "string",
                                  "nullable": true
                                },
                                "assignedAt": {
                                  "type": "string"
                                },
                                "assignedBy": {
                                  "type": "string",
                                  "nullable": true,
                                  "format": "uuid"
                                }
                              },
                              "required": [
                                "id",
                                "reviewId",
                                "userId",
                                "assignedAt"
                              ]
                            }
                          },
                          "required": [
                            "success",
                            "assignee"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Review or user not found"
          },
          "409": {
            "description": "User already assigned"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Replace assignees",
        "description": "Replaces all assignees with the provided list. Pass an empty array to remove all assignees.",
        "tags": [
          "Review Assignees"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Review ID"
            },
            "required": true,
            "description": "Review ID",
            "name": "reviewId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Workspace ID"
                  },
                  "userIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "description": "List of user IDs to assign"
                  }
                },
                "required": [
                  "workspaceId",
                  "userIds"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Assignees updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "assignees": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "reviewId": {
                                    "type": "string"
                                  },
                                  "userId": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "userName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "assignedAt": {
                                    "type": "string"
                                  },
                                  "assignedBy": {
                                    "type": "string",
                                    "nullable": true,
                                    "format": "uuid"
                                  }
                                },
                                "required": [
                                  "id",
                                  "reviewId",
                                  "userId",
                                  "assignedAt"
                                ]
                              }
                            }
                          },
                          "required": [
                            "success",
                            "assignees"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Review not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Remove assignee",
        "description": "Removes a user from the review's assignees.",
        "tags": [
          "Review Assignees"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Review ID"
            },
            "required": true,
            "description": "Review ID",
            "name": "reviewId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "Workspace ID"
            },
            "required": true,
            "description": "Workspace ID",
            "name": "workspaceId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "User ID to remove"
            },
            "required": true,
            "description": "User ID to remove",
            "name": "userId",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Assignee removed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        true
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "type": "object",
                          "properties": {
                            "success": {
                              "type": "boolean"
                            },
                            "assignees": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "id": {
                                    "type": "string"
                                  },
                                  "reviewId": {
                                    "type": "string"
                                  },
                                  "userId": {
                                    "type": "string",
                                    "format": "uuid"
                                  },
                                  "userName": {
                                    "type": "string",
                                    "nullable": true
                                  },
                                  "assignedAt": {
                                    "type": "string"
                                  },
                                  "assignedBy": {
                                    "type": "string",
                                    "nullable": true,
                                    "format": "uuid"
                                  }
                                },
                                "required": [
                                  "id",
                                  "reviewId",
                                  "userId",
                                  "assignedAt"
                                ]
                              }
                            }
                          },
                          "required": [
                            "success",
                            "assignees"
                          ]
                        }
                      },
                      "required": [
                        "message",
                        "result"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Review or assignee not found"
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/audio/transcriptions": {
      "post": {
        "summary": "Create transcription",
        "description": "Transcribes an uploaded audio file using Freya's transcription models. (Closed Beta)",
        "tags": [
          "Audio"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Audio file to transcribe"
                  },
                  "model": {
                    "type": "string",
                    "enum": [
                      "freya-transcribe-v1"
                    ],
                    "default": "freya-transcribe-v1",
                    "description": "Freya transcription model"
                  },
                  "prompt": {
                    "type": "string",
                    "nullable": true,
                    "description": "Optional context to guide the transcription"
                  },
                  "response_format": {
                    "type": "string",
                    "enum": [
                      "json",
                      "text",
                      "srt",
                      "verbose_json",
                      "vtt"
                    ],
                    "default": "json"
                  },
                  "language": {
                    "type": "string",
                    "nullable": true,
                    "enum": [
                      "tr",
                      "cs",
                      null
                    ],
                    "description": "Language hint (supported: tr, cs)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Transcription created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "text": {
                      "type": "string",
                      "description": "Full transcription text"
                    },
                    "usage": {
                      "type": "object",
                      "properties": {
                        "type": {
                          "type": "string",
                          "enum": [
                            "tokens"
                          ],
                          "description": "Usage accounting type"
                        },
                        "input_tokens": {
                          "type": "number",
                          "description": "Total input tokens"
                        },
                        "input_token_details": {
                          "type": "object",
                          "properties": {
                            "text_tokens": {
                              "type": "number",
                              "description": "Text token count"
                            },
                            "audio_tokens": {
                              "type": "number",
                              "description": "Audio token count"
                            }
                          },
                          "required": [
                            "text_tokens",
                            "audio_tokens"
                          ]
                        },
                        "output_tokens": {
                          "type": "number",
                          "description": "Output token count"
                        },
                        "total_tokens": {
                          "type": "number",
                          "description": "Sum of input and output tokens"
                        }
                      },
                      "required": [
                        "type",
                        "input_tokens",
                        "input_token_details",
                        "output_tokens",
                        "total_tokens"
                      ]
                    }
                  },
                  "required": [
                    "text",
                    "usage"
                  ]
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/audio/speech": {
      "post": {
        "summary": "Create speech",
        "description": "Generates speech audio from text using Freya's speech model. (Closed Beta)",
        "tags": [
          "Audio"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "model": {
                    "type": "string",
                    "enum": [
                      "freya-audio-v1"
                    ],
                    "default": "freya-audio-v1",
                    "description": "Freya speech model"
                  },
                  "input": {
                    "type": "string",
                    "description": "Text to synthesize"
                  },
                  "voice": {
                    "type": "string",
                    "enum": [
                      "leyla"
                    ],
                    "description": "Voice to use"
                  },
                  "response_format": {
                    "type": "string",
                    "enum": [
                      "wav"
                    ],
                    "default": "wav"
                  }
                },
                "required": [
                  "input",
                  "voice"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Audio stream",
            "content": {
              "audio/mpeg": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "audio/wav": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "audio/ogg": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ]
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "result": {
                          "nullable": true
                        }
                      },
                      "required": [
                        "message"
                      ]
                    }
                  },
                  "required": [
                    "success",
                    "data"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "End of Call Report": {
      "post": {
        "summary": "End of call report webhook",
        "description": "Sent when a call completes with detailed information about the call.\n\n**Payload includes:**\n- Call identification (callId, workspaceId)\n- Call outcome (summary, endedReason, status)\n- Timing information (startedAt, endedAt, durationMs)\n- Call content (transcript, recordingUrl)\n- Customer information (customer phone number)\n\nThis webhook provides comprehensive call data including AI-generated summaries, full transcripts, and recording URLs for post-call analysis and reporting.",
        "tags": [
          "Webhooks"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EndOfCallReport"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Webhook received successfully"
          }
        }
      }
    }
  }
}